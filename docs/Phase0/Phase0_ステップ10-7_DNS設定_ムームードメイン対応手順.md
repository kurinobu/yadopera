# Phase 0 ステップ10-7: DNS設定 ムームードメイン対応手順

**作成日**: 2025年11月27日  
**目的**: ムームードメインでGitHub Pagesのカスタムドメインを設定  
**背景**: ムームードメインではルートドメイン（@）にCNAMEレコードを設定できないため、Aレコードを使用

---

## 問題の状況

ムームードメインのDNS設定で、ルートドメイン（@）にCNAMEレコードを設定しようとすると、以下のエラーが表示されます：

- 「@」をサブドメインに入力すると「不正な文字が含まれています」

これは、ムームードメインの仕様で、ルートドメイン（@）にはCNAMEレコードを設定できないためです。

---

## 解決策: Aレコードを使用

GitHub Pagesのカスタムドメインは、CNAMEレコードの代わりにAレコード（IPアドレス）を使用することもできます。

### GitHub PagesのIPアドレス

GitHub Pagesのカスタムドメイン用のIPアドレスは以下の4つです：

1. `185.199.108.153`
2. `185.199.109.153`
3. `185.199.110.153`
4. `185.199.111.153`

**重要**: これら4つのIPアドレスすべてをAレコードとして設定する必要があります。

---

## DNS設定手順

### ステップ1: 既存のAレコードを削除

1. ムームードメインのDNS設定画面で、既存のAレコードを削除：
   - サブドメイン: `@`（または空欄）
   - 種別: `A`
   - 内容: `216.198.79.1`（VercelのIPアドレス）
   - → **削除**

### ステップ2: GitHub PagesのAレコードを4つ追加

以下の4つのAレコードを追加してください：

#### Aレコード1
- サブドメイン: `@`（または空欄、ルートドメイン）
- 種別: `A`
- 内容: `185.199.108.153`
- 優先度: 設定不要

#### Aレコード2
- サブドメイン: `@`（または空欄、ルートドメイン）
- 種別: `A`
- 内容: `185.199.109.153`
- 優先度: 設定不要

#### Aレコード3
- サブドメイン: `@`（または空欄、ルートドメイン）
- 種別: `A`
- 内容: `185.199.110.153`
- 優先度: 設定不要

#### Aレコード4
- サブドメイン: `@`（または空欄、ルートドメイン）
- 種別: `A`
- 内容: `185.199.111.153`
- 優先度: 設定不要

### ステップ3: wwwのCNAMEレコードを変更（オプション）

wwwサブドメインもGitHub Pagesに設定する場合：

- サブドメイン: `www`
- 種別: `CNAME`
- 内容: `kurinobu.github.io`
- 優先度: 設定不要

または、wwwサブドメインを削除しても構いません。

---

## 設定後の状態

```
サブドメイン    種別    内容
@              A       185.199.108.153
@              A       185.199.109.153
@              A       185.199.110.153
@              A       185.199.111.153
www            CNAME   kurinobu.github.io  （オプション）
```

---

## 重要なポイント

1. **4つのAレコードすべてを設定**: GitHub Pagesは4つのIPアドレスすべてを設定する必要があります
2. **サブドメインは空欄または@**: ルートドメインを指定する場合は、サブドメインを空欄にするか、@を入力（ムームードメインの仕様に従う）
3. **反映時間**: DNS設定の反映には5-30分かかります

---

## 確認方法

DNS設定が正しく反映されているか確認：

```bash
# 方法1: digコマンド
dig yadopera.com +short

# 方法2: nslookupコマンド
nslookup yadopera.com
```

正しく設定されていれば、4つのIPアドレスのいずれかが返ってきます。

---

## トラブルシューティング

### 問題: サブドメインに「@」を入力できない

**解決策**: サブドメインを空欄にしてください。空欄はルートドメイン（@）を意味します。

### 問題: 4つのAレコードを設定できない

**解決策**: ムームードメインの設定画面で、同じサブドメイン（@）に複数のAレコードを設定できるか確認してください。できない場合は、サポートに問い合わせるか、別の方法を検討してください。

---

## 参考資料

- **GitHub Pages公式ドキュメント**: https://docs.github.com/ja/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages#supported-custom-domains
- **GitHub Pages IPアドレス**: https://docs.github.com/ja/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-an-apex-domain

---

**Document Version**: v1.0  
**Author**: Air  
**Last Updated**: 2025-11-27  
**Status**: ムームードメイン対応手順完成

