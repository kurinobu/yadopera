\# YadOPERA å¤šè¨€èªå®Ÿè£…è¨ˆç”»æ›¸ï¼ˆä¿®æ­£ç‰ˆï¼‰

\*\*ä½œæˆæ—¥\*\*: 2026å¹´1æœˆ24æ—¥    
\*\*æœ€çµ‚æ›´æ–°\*\*: 2026å¹´1æœˆ25æ—¥    
\*\*å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³\*\*: v0.3.11ä»¥é™    
\*\*å®Ÿè£…è¨€èª\*\*: ç¹ä½“ä¸­å›½èªï¼ˆzh-TWï¼‰ã€ãƒ•ãƒ©ãƒ³ã‚¹èªï¼ˆfrï¼‰ã€éŸ“å›½èªï¼ˆkoï¼‰

\---

\#\# ç›®æ¬¡

1\. \[å®Ÿè£…æ¦‚è¦\](\#1-å®Ÿè£…æ¦‚è¦)  
2\. \[ç¾çŠ¶åˆ†æ\](\#2-ç¾çŠ¶åˆ†æ)  
3\. \[å®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ\](\#3-å®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ)  
4\. \[ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ\](\#4-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ)  
5\. \[ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…\](\#5-ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…)  
6\. \[ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…\](\#6-ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…)  
7\. \[FAQè‡ªå‹•è¨­å®šå®Ÿè£…\](\#7-faqè‡ªå‹•è¨­å®šå®Ÿè£…)  
8\. \[ãƒ†ã‚¹ãƒˆè¨ˆç”»\](\#8-ãƒ†ã‚¹ãƒˆè¨ˆç”»)  
9\. \[ãƒ‡ãƒ—ãƒ­ã‚¤è¨ˆç”»\](\#9-ãƒ‡ãƒ—ãƒ­ã‚¤è¨ˆç”»)  
10\. \[ãƒªã‚¹ã‚¯ã¨å¯¾ç­–\](\#10-ãƒªã‚¹ã‚¯ã¨å¯¾ç­–)  
11\. \[ä»Šå¾Œã®æ‹¡å¼µè¨ˆç”»\](\#11-ä»Šå¾Œã®æ‹¡å¼µè¨ˆç”»)  
12\. \[ã¾ã¨ã‚\](\#12-ã¾ã¨ã‚)

\---

\#\# 1\. å®Ÿè£…æ¦‚è¦

\#\#\# 1.1 ç›®çš„

æ–°è¦å®¿æ³Šæ–½è¨­ç™»éŒ²æ™‚ã«ã€æ–™é‡‘ãƒ—ãƒ©ãƒ³ã«å¿œã˜ãŸå¤šè¨€èªFAQã‚’è‡ªå‹•è¨­å®šã—ã€ã‚²ã‚¹ãƒˆãŒé¸æŠã—ãŸè¨€èªã§AIå¿œç­”ã‚’å—ã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

\#\#\# 1.2 å¯¾å¿œè¨€èªè¿½åŠ 

\*\*æ—¢å­˜è¨€èª\*\*:  
\- æ—¥æœ¬èªï¼ˆjaï¼‰  
\- è‹±èªï¼ˆenï¼‰

\*\*è¿½åŠ è¨€èª\*\*:  
\- ç¹ä½“ä¸­å›½èªï¼ˆzh-TWï¼‰- å°æ¹¾ãƒ»é¦™æ¸¯å‘ã‘  
\- ãƒ•ãƒ©ãƒ³ã‚¹èªï¼ˆfrï¼‰- ãƒ•ãƒ©ãƒ³ã‚¹ãƒ»ãƒ™ãƒ«ã‚®ãƒ¼ãƒ»ã‚¹ã‚¤ã‚¹å‘ã‘  
\- éŸ“å›½èªï¼ˆkoï¼‰- éŸ“å›½å‘ã‘

\#\#\# 1.3 æ–™é‡‘ãƒ—ãƒ©ãƒ³ã¨è¨€èªæ•°ã®å¯¾å¿œ

| ãƒ—ãƒ©ãƒ³ | åŒæ™‚åˆ©ç”¨è¨€èªæ•° | FAQä»¶æ•°ä¸Šé™ | æƒ³å®šåˆ©ç”¨è¨€èª | Phase 3å®Ÿè£… |  
|--------|---------------|------------|-------------|------------|  
| Free | 1è¨€èª | 20FAQ | æ—¥æœ¬èªã®ã¿ï¼ˆé¸æŠä¸å¯ï¼‰ | 20FAQ |  
| Mini | 2è¨€èª | 30FAQ | æ—¥æœ¬èª+è‹±èª | 30FAQ |  
| Small | 3è¨€èª | 50FAQ | æ—¥æœ¬èª+è‹±èª+ç¹ä½“ä¸­å›½èª | 30FAQâ€»1 |  
| Standard | 4è¨€èª | 100FAQ | æ—¥æœ¬èª+è‹±èª+ç¹ä½“ä¸­å›½èª+ãƒ•ãƒ©ãƒ³ã‚¹èª | 30FAQâ€»1 |  
| Premium | ç„¡åˆ¶é™ | ç„¡åˆ¶é™ | ã™ã¹ã¦ã®è¨€èª | 30FAQâ€»1 |

â€»1: Phase 3æ™‚ç‚¹ã§FAQ\_PRESETSã¯30å€‹ã®ã¿å®Ÿè£…ã€‚50FAQ/100FAQ/ç„¡åˆ¶é™ã¯Phase 4ä»¥é™ã§æ‹¡å¼µäºˆå®šã€‚

\#\#\# 1.4 å®Ÿè£…ã‚¹ã‚³ãƒ¼ãƒ—

\*\*Phase 3ï¼ˆPoCå®Ÿæ–½ä¸­ï¼‰ã§å®Ÿè£…\*\*:  
\- FAQ\_PRESETSã¸ã®3è¨€èªè¿½åŠ ï¼ˆç¹ä½“ä¸­å›½èªãƒ»ãƒ•ãƒ©ãƒ³ã‚¹èªãƒ»éŸ“å›½èªï¼‰  
\- æ–°è¦ç™»éŒ²æ™‚ã®FAQè‡ªå‹•è¨­å®šãƒ­ã‚¸ãƒƒã‚¯ä¿®æ­£  
\- ãƒ—ãƒ©ãƒ³åˆ¥è¨€èªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å®Ÿè£…  
\- ã‚²ã‚¹ãƒˆå´è¨€èªé¸æŠUIã®ãƒ—ãƒ©ãƒ³å¯¾å¿œè¨€èªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰  
\- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã®å¤šè¨€èªå¯¾å¿œå¼·åŒ–

\*\*å®Ÿè£…ã—ãªã„é …ç›®\*\*:  
\- æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ï¼ˆã‚¤ãƒ³ãƒ†ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹æ§‹é€ ã¯å®Ÿè£…æ¸ˆã¿ï¼‰  
\- æ—¢å­˜FAQç¿»è¨³ã®è¿½åŠ ï¼ˆæ‰‹å‹•è¿½åŠ ã®ã¿ï¼‰  
\- UIãƒ†ã‚­ã‚¹ãƒˆã®å¤šè¨€èªåŒ–ï¼ˆè‹±èªãƒ»æ—¥æœ¬èªã®ã¿ç¶­æŒï¼‰

\---

\#\# 2\. ç¾çŠ¶åˆ†æ

\#\#\# 2.1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ ï¼ˆv0.3.5å®Ÿè£…æ¸ˆã¿ï¼‰

\#\#\#\# 2.1.1 FAQãƒ†ãƒ¼ãƒ–ãƒ«

\`\`\`sql  
\-- FAQï¼ˆã‚¤ãƒ³ãƒ†ãƒ³ãƒˆï¼‰ãƒ†ãƒ¼ãƒ–ãƒ«: æ„å‘³å˜ä½ã§ç®¡ç†  
CREATE TABLE faqs (  
    id SERIAL PRIMARY KEY,  
    facility\_id INTEGER NOT NULL REFERENCES facilities(id),  
    category VARCHAR(50) NOT NULL,  
    intent\_key VARCHAR(100) NOT NULL,  \-- ä¾‹: 'basic\_checkout\_time'  
    priority INTEGER DEFAULT 1,  
    is\_active BOOLEAN DEFAULT TRUE,  
    created\_by INTEGER REFERENCES users(id),  
    created\_at TIMESTAMP DEFAULT CURRENT\_TIMESTAMP,  
    updated\_at TIMESTAMP DEFAULT CURRENT\_TIMESTAMP,  
    UNIQUE(facility\_id, intent\_key)  
);

\-- FAQç¿»è¨³ãƒ†ãƒ¼ãƒ–ãƒ«: è¨€èªã”ã¨ã®è³ªå•ãƒ»å›ç­”ãƒ»åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«  
CREATE TABLE faq\_translations (  
    id SERIAL PRIMARY KEY,  
    faq\_id INTEGER NOT NULL REFERENCES faqs(id) ON DELETE CASCADE,  
    language VARCHAR(10) NOT NULL,  \-- 'en', 'ja', 'zh-TW', 'fr', 'ko'  
    question TEXT NOT NULL,  
    answer TEXT NOT NULL,  
    embedding vector(1536),  \-- OpenAI text-embedding-3-small  
    created\_at TIMESTAMP DEFAULT CURRENT\_TIMESTAMP,  
    updated\_at TIMESTAMP DEFAULT CURRENT\_TIMESTAMP,  
    UNIQUE(faq\_id, language)  
);

\-- pgvectorã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆã‚³ã‚µã‚¤ãƒ³é¡ä¼¼åº¦æ¤œç´¢ç”¨ï¼‰  
CREATE INDEX idx\_faq\_translations\_embedding ON faq\_translations   
USING ivfflat (embedding vector\_cosine\_ops);  
\`\`\`

\*\*âœ… è©•ä¾¡\*\*: æ—¢å­˜æ§‹é€ ã§å¤šè¨€èªå¯¾å¿œå¯èƒ½ã€‚ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ä¸è¦ã€‚

\#\#\#\# 2.1.2 Facilitiesãƒ†ãƒ¼ãƒ–ãƒ«

\`\`\`sql  
\-- æ–½è¨­ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆè¨€èªè¨­å®šé–¢é€£ã‚«ãƒ©ãƒ ã®ã¿æŠœç²‹ï¼‰  
CREATE TABLE facilities (  
    id SERIAL PRIMARY KEY,  
    name VARCHAR(255) NOT NULL,  
    slug VARCHAR(100) UNIQUE NOT NULL,  
    email VARCHAR(255) NOT NULL,  
    languages TEXT\[\],  \-- åˆ©ç”¨å¯èƒ½è¨€èªã®ãƒªã‚¹ãƒˆï¼ˆPostgreSQLé…åˆ—å‹ï¼‰  
    language\_limit INTEGER,  \-- ãƒ—ãƒ©ãƒ³åˆ¥ã®è¨€èªæ•°ä¸Šé™ï¼ˆNULL=ç„¡åˆ¶é™ï¼‰  
    \-- ... ä»–ã®ã‚«ãƒ©ãƒ   
    created\_at TIMESTAMP DEFAULT CURRENT\_TIMESTAMP,  
    updated\_at TIMESTAMP DEFAULT CURRENT\_TIMESTAMP  
);  
\`\`\`

\*\*ãƒ‡ãƒ¼ã‚¿å‹è©³ç´°\*\*:  
\- \`languages\`: PostgreSQL ARRAYå‹ï¼ˆTEXT\[\]ï¼‰  
\- ä¾‹: \`ARRAY\['ja', 'en', 'zh-TW'\]\`  
\- é…åˆ—æ“ä½œ: \`array\_length(languages, 1)\` ã§ä»¶æ•°å–å¾—

\*\*âœ… è©•ä¾¡\*\*: æ—¢å­˜ã®ARRAYå‹ã§å¤šè¨€èªãƒªã‚¹ãƒˆç®¡ç†å¯èƒ½ã€‚ä¿®æ­£ä¸è¦ã€‚

\#\#\# 2.2 FAQ\_PRESETSã®ç¾çŠ¶

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`backend/app/data/faq\_presets.py\`

\*\*ç¾çŠ¶\*\*: 30å€‹ã®FAQ Ã— 2è¨€èªï¼ˆæ—¥æœ¬èªãƒ»è‹±èªï¼‰= 60ç¿»è¨³

\*\*æ§‹é€ \*\*:  
\`\`\`python  
FAQ\_PRESETS \= \[  
    {  
        "category": "basic",  
        "intent\_key": "basic\_quiet\_hours",  
        "priority": 5,  
        "translations": \[  
            {  
                "language": "ja",  
                "question": "å¤œé–“ã®é™éŸ³ãƒ«ãƒ¼ãƒ«ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",  
                "answer": "22æ™‚ä»¥é™ã¯ä»–ã®ã‚²ã‚¹ãƒˆã¸ã®é…æ…®ã‚’ãŠé¡˜ã„ã—ã¾ã™..."  
            },  
            {  
                "language": "en",  
                "question": "Is there a quiet rule at night?",  
                "answer": "Please keep noise to a minimum after 10:00 PM..."  
            }  
        \]  
    },  
    \# ... 29å€‹ã®FAQ  
\]  
\`\`\`

\*\*âš ï¸ èª²é¡Œ\*\*: 3è¨€èªï¼ˆç¹ä½“ä¸­å›½èªãƒ»ãƒ•ãƒ©ãƒ³ã‚¹èªãƒ»éŸ“å›½èªï¼‰ã®ç¿»è¨³ãŒæœªå®Ÿè£…ã€‚

\#\#\# 2.3 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®è¨€èªå®šæ•°

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`frontend/src/utils/constants.ts\`

\`\`\`typescript  
export const SUPPORTED\_LANGUAGES \= \[  
  { code: 'ja', name: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ' },  
  { code: 'en', name: 'English', flag: 'ğŸ‡¬ğŸ‡§' },  
  { code: 'zh-TW', name: 'ç¹é«”ä¸­æ–‡', flag: 'ğŸ‡¹ğŸ‡¼' },  
  { code: 'fr', name: 'FranÃ§ais', flag: 'ğŸ‡«ğŸ‡·' },  
  { code: 'es', name: 'EspaÃ±ol', flag: 'ğŸ‡ªğŸ‡¸' },  
  { code: 'de', name: 'Deutsch', flag: 'ğŸ‡©ğŸ‡ª' },  
  { code: 'ko', name: 'í•œêµ­ì–´', flag: 'ğŸ‡°ğŸ‡·' },  
  { code: 'th', name: 'à¹„à¸—à¸¢', flag: 'ğŸ‡¹ğŸ‡­' },  
  { code: 'vi', name: 'Tiáº¿ng Viá»‡t', flag: 'ğŸ‡»ğŸ‡³' },  
\] as const  
\`\`\`

\*\*âœ… è©•ä¾¡\*\*: 9è¨€èªå®šç¾©æ¸ˆã¿ã€‚ãŸã ã—å®Ÿéš›ã®åˆ©ç”¨ã¯2è¨€èªã®ã¿ã€‚

\#\#\# 2.4 è¨€èªé¸æŠUIã®ãƒ—ãƒ©ãƒ³å¯¾å¿œï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`frontend/src/views/guest/LanguageSelect.vue\`

\`\`\`typescript  
// ãƒ—ãƒ©ãƒ³ã«å¿œã˜ãŸåˆ©ç”¨å¯èƒ½è¨€èªã‚’å–å¾—  
const availableLanguages \= response.facility.available\_languages || \['en'\]

// SUPPORTED\_LANGUAGESã‹ã‚‰ã€åˆ©ç”¨å¯èƒ½ãªè¨€èªã®ã¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°  
const filteredLanguages \= SUPPORTED\_LANGUAGES.filter(lang \=\>   
  availableLanguages.includes(lang.code)  
)  
\`\`\`

\*\*âœ… è©•ä¾¡\*\*: ãƒ—ãƒ©ãƒ³åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å®Ÿè£…æ¸ˆã¿ã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ä¿®æ­£ã®ã¿ã§å‹•ä½œã™ã‚‹è¦‹è¾¼ã¿ã€‚

\#\#\# 2.5 FAQè‡ªå‹•è¨­å®šã®ç¾çŠ¶

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`backend/app/services/auth\_service.py\`

\#\#\#\# 2.5.1 æ—¢å­˜ã‚³ãƒ¼ãƒ‰ï¼ˆä¿®æ­£å‰ï¼‰

\`\`\`python  
\# æ–°è¦ç™»éŒ²æ™‚ã®FAQè‡ªå‹•è¨­å®šå‡¦ç†  
async def \_setup\_default\_faqs(self, facility\_id: int, subscription\_plan: str):  
    """æ–½è¨­ã®åˆæœŸFAQã‚’è¨­å®š"""  
      
    \# æ–™é‡‘ãƒ—ãƒ©ãƒ³ã«åŸºã¥ã„ã¦FAQãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆä»¶æ•°ã®ã¿ï¼‰  
    filtered\_presets \= filter\_faq\_presets\_by\_plan(  
        FAQ\_PRESETS,  
        subscription\_plan  
    )  
      
    \# ãƒ—ãƒªã‚»ãƒƒãƒˆFAQã‚’FAQRequestã«å¤‰æ›  
    for preset in filtered\_presets:  
        faq\_request \= FAQRequest(  
            category=preset\["category"\],  
            intent\_key=preset\["intent\_key"\],  
            translations=\[  
                {  
                    "language": t\["language"\],  
                    "question": t\["question"\],  
                    "answer": t\["answer"\]  
                } for t in preset\["translations"\]  \# å…¨è¨€èªã®ç¿»è¨³ã‚’ç™»éŒ²  
            \],  
            priority=preset\["priority"\],  
            is\_active=True  
        )  
          
        \# FAQç™»éŒ²  
        await faq\_service.create\_faq(facility\_id, faq\_request)  
\`\`\`

\#\#\#\# 2.5.2 æ—¢å­˜ã®filter\_faq\_presets\_by\_plan()

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`backend/app/core/plan\_limits.py\`

\`\`\`python  
def filter\_faq\_presets\_by\_plan(  
    faq\_presets: List\[dict\],  
    subscription\_plan: str  
) \-\> List\[dict\]:  
    """  
    æ–™é‡‘ãƒ—ãƒ©ãƒ³ã«åŸºã¥ã„ã¦FAQãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆä»¶æ•°ã®ã¿ï¼‰  
      
    Args:  
        faq\_presets: FAQãƒ—ãƒªã‚»ãƒƒãƒˆãƒªã‚¹ãƒˆ  
        subscription\_plan: æ–™é‡‘ãƒ—ãƒ©ãƒ³ï¼ˆ'free', 'mini', 'small', 'standard', 'premium'ï¼‰  
      
    Returns:  
        ãƒ•ã‚£ãƒ«ã‚¿ã•ã‚ŒãŸFAQãƒ—ãƒªã‚»ãƒƒãƒˆãƒªã‚¹ãƒˆ  
    """  
    \# ãƒ—ãƒ©ãƒ³åã‚’æ­£è¦åŒ–ï¼ˆå°æ–‡å­— â†’ å¤§æ–‡å­—å§‹ã¾ã‚Šï¼‰  
    plan\_type \= convert\_subscription\_plan\_to\_plan\_type(subscription\_plan)  
      
    \# ãƒ—ãƒ©ãƒ³åˆ¥ã®FAQä»¶æ•°ä¸Šé™ã‚’å–å¾—  
    plan\_defaults \= get\_plan\_defaults(plan\_type)  
    faq\_limit \= plan\_defaults.get("faq\_limit")  
      
    \# FAQä»¶æ•°ã§ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆè¨€èªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãªã—ï¼‰  
    if faq\_limit:  
        return faq\_presets\[:faq\_limit\]  
    else:  
        return faq\_presets  
\`\`\`

\#\#\#\# 2.5.3 convert\_subscription\_plan\_to\_plan\_type()ã®ä»•æ§˜

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`backend/app/core/plan\_limits.py\`

\`\`\`python  
def convert\_subscription\_plan\_to\_plan\_type(subscription\_plan: str) \-\> str:  
    """  
    ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³åã‚’æ­£è¦åŒ–  
      
    Args:  
        subscription\_plan: 'free', 'mini', 'small', 'standard', 'premium'ï¼ˆå°æ–‡å­—ï¼‰  
      
    Returns:  
        'Free', 'Mini', 'Small', 'Standard', 'Premium'ï¼ˆå¤§æ–‡å­—å§‹ã¾ã‚Šï¼‰  
      
    Examples:  
        \>\>\> convert\_subscription\_plan\_to\_plan\_type('free')  
        'Free'  
        \>\>\> convert\_subscription\_plan\_to\_plan\_type('PREMIUM')  
        'Premium'  
    """  
    return subscription\_plan.strip().capitalize()  
\`\`\`

\*\*âš ï¸ èª²é¡Œ\*\*: ãƒ—ãƒ©ãƒ³åˆ¥ã®è¨€èªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãŒæœªå®Ÿè£…ã€‚å…¨è¨€èªã®ç¿»è¨³ãŒç™»éŒ²ã•ã‚Œã‚‹ã€‚

\#\#\# 2.6 è¨€èªæ•°åˆ¶é™ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`backend/app/services/faq\_service.py\`

\`\`\`python  
async def create\_faq(self, facility\_id: int, request: FAQRequest) \-\> FAQ:  
    """FAQä½œæˆï¼ˆè¨€èªæ•°åˆ¶é™ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãï¼‰"""  
      
    \# æ–½è¨­æƒ…å ±å–å¾—  
    facility \= await self.db.get(Facility, facility\_id)  
      
    \# è¨€èªæ•°åˆ¶é™ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆPremiumãƒ—ãƒ©ãƒ³ã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—ï¼‰  
    if facility.language\_limit is not None:  
        \# æ—¢å­˜ã®è¨€èªãƒªã‚¹ãƒˆã‚’å–å¾—  
        existing\_languages \= await self.\_get\_facility\_languages(facility\_id)  
          
        \# æ–°è¦ç™»éŒ²ã•ã‚Œã‚‹è¨€èªã‚’å–å¾—  
        new\_languages \= {trans.language for trans in request.translations}  
          
        \# æ—¢å­˜ã®è¨€èªã¨æ–°è¦è¨€èªã‚’çµåˆ  
        all\_languages \= existing\_languages | new\_languages  
          
        \# è¨€èªæ•°åˆ¶é™ã‚’ãƒã‚§ãƒƒã‚¯  
        if len(all\_languages) \> facility.language\_limit:  
            raise ValueError(  
                f"ãƒ—ãƒ©ãƒ³ã®è¨€èªæ•°åˆ¶é™ã«é”ã—ã¦ã„ã¾ã™ã€‚"  
                f"ç¾åœ¨: {len(existing\_languages)}è¨€èªã€"  
                f"è¿½åŠ : {len(new\_languages)}è¨€èªã€"  
                f"ä¸Šé™: {facility.language\_limit}è¨€èª"  
            )  
      
    \# FAQä½œæˆå‡¦ç†...  
\`\`\`

\*\*âœ… è©•ä¾¡\*\*: FAQç™»éŒ²æ™‚ã®è¨€èªæ•°åˆ¶é™ã¯å®Ÿè£…æ¸ˆã¿ã€‚åˆæœŸè¨­å®šæ™‚ã®ãƒ•ã‚£ãƒ«ã‚¿ãŒå¿…è¦ã€‚

\#\#\# 2.7 ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã®å®Ÿè£…

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`backend/app/services/auth\_service.py\`

\*\*ä½¿ç”¨æŠ€è¡“\*\*: FastAPI BackgroundTasks

\`\`\`python  
from fastapi import BackgroundTasks

async def register\_facility(  
    self,  
    registration\_data: FacilityRegistrationRequest,  
    background\_tasks: BackgroundTasks  
) \-\> dict:  
    """æ–½è¨­æ–°è¦ç™»éŒ²"""  
      
    \# ... ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»æ–½è¨­ä½œæˆ ...  
      
    \# FAQè‡ªå‹•è¨­å®šã‚’ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å®Ÿè¡Œ  
    background\_tasks.add\_task(  
        self.\_setup\_default\_faqs,  
        facility.id,  
        registration\_data.subscription\_plan  
    )  
      
    return {"facility": facility, "user": user}  
\`\`\`

\*\*ç‰¹å¾´\*\*:  
\- FastAPIæ¨™æº–æ©Ÿèƒ½ã‚’ä½¿ç”¨ï¼ˆCeleryä¸è¦ï¼‰  
\- ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¿”å´å¾Œã«éåŒæœŸå®Ÿè¡Œ  
\- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯ãƒ­ã‚®ãƒ³ã‚°ã®ã¿

\---

\#\# 3\. å®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

\#\#\# 3.1 å¤§åŸå‰‡æº–æ‹ 

\*\*å®Ÿè£…ã‚„ä¿®æ­£ã®åŸºæœ¬æ–¹é‡\*\*:

1\. \*\*æ ¹æœ¬è§£æ±º \> æš«å®šè§£æ±º\*\*: FAQ\_PRESETSã«3è¨€èªã‚’å®Œå…¨è¿½åŠ   
2\. \*\*ã‚·ãƒ³ãƒ—ãƒ«æ§‹é€  \> è¤‡é›‘æ§‹é€ \*\*: æ—¢å­˜ã®ç¿»è¨³é…åˆ—ã«3è¨€èªã‚’è¿½åŠ ã™ã‚‹ã ã‘  
3\. \*\*çµ±ä¸€ãƒ»åŒä¸€åŒ– \> ç‰¹æ®Šç‹¬è‡ª\*\*: æ—¢å­˜ã®æ—¥æœ¬èªãƒ»è‹±èªã¨åŒã˜æ§‹é€ ã§å®Ÿè£…  
4\. \*\*å…·ä½“çš„ \> ä¸€èˆ¬\*\*: 30å€‹ã®FAQ Ã— 3è¨€èª \= 90ç¿»è¨³ã‚’å…·ä½“çš„ã«è¨˜è¼‰  
5\. \*\*æ‹™é€Ÿ \< å®‰å…¨ç¢ºå®Ÿ\*\*: ç¿»è¨³å“è³ªã‚’å„ªå…ˆã€æ©Ÿæ¢°ç¿»è¨³+ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒã‚§ãƒƒã‚¯  
6\. \*\*Dockerç’°å¢ƒå¿…é ˆ\*\*: ã™ã¹ã¦ã®ä¿®æ­£ãƒ»ãƒ†ã‚¹ãƒˆã¯Dockerç’°å¢ƒã§å®Ÿè¡Œ

\#\#\# 3.2 å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—æ¦‚è¦

\*\*ã‚¹ãƒ†ãƒƒãƒ—1\*\*: FAQ\_PRESETSã¸ã®3è¨€èªè¿½åŠ ï¼ˆ30FAQ Ã— 3è¨€èª \= 90ç¿»è¨³ï¼‰    
\*\*ã‚¹ãƒ†ãƒƒãƒ—2\*\*: ãƒ—ãƒ©ãƒ³åˆ¥è¨€èªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…    
\*\*ã‚¹ãƒ†ãƒƒãƒ—3\*\*: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å˜ä½“ãƒ†ã‚¹ãƒˆ    
\*\*ã‚¹ãƒ†ãƒƒãƒ—4\*\*: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å‹•ä½œç¢ºèªï¼ˆä¿®æ­£ä¸è¦ã®è¦‹è¾¼ã¿ï¼‰    
\*\*ã‚¹ãƒ†ãƒƒãƒ—5\*\*: çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆDockerç’°å¢ƒï¼‰    
\*\*ã‚¹ãƒ†ãƒƒãƒ—6\*\*: ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆï¼ˆæ–°è¦ç™»éŒ²ãƒ•ãƒ­ãƒ¼ï¼‰    
\*\*ã‚¹ãƒ†ãƒƒãƒ—7\*\*: ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤    
\*\*ã‚¹ãƒ†ãƒƒãƒ—8\*\*: æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤

\#\#\# 3.3 ç¿»è¨³æ–¹é‡

\*\*å„ªå…ˆé †ä½\*\*:  
1\. \*\*è‡ªç„¶ã•\*\*: ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ãŒé•å’Œæ„Ÿãªãèª­ã‚ã‚‹ï¼ˆCEFR B2ãƒ¬ãƒ™ãƒ«ç›¸å½“ï¼‰  
2\. \*\*ä¸€è²«æ€§\*\*: ç”¨èªãƒ»ãƒˆãƒ¼ãƒ³ãƒ»æ–‡ä½“ã®çµ±ä¸€  
3\. \*\*ç°¡æ½”æ€§\*\*: è³ªå•150æ–‡å­—ä»¥å†…ã€å›ç­”500æ–‡å­—ä»¥å†…ï¼ˆæ—¥æœ¬èªåŸºæº–ï¼‰

\*\*ç¿»è¨³ãƒ—ãƒ­ã‚»ã‚¹\*\*:  
1\. æ—¥æœ¬èªãƒ»è‹±èªã‚’åŸºæº–ã«æ©Ÿæ¢°ç¿»è¨³ï¼ˆDeepL Proæ¨å¥¨ï¼‰  
2\. ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒã‚§ãƒƒã‚¯ï¼ˆã‚¯ãƒ©ã‚¦ãƒ‰ã‚½ãƒ¼ã‚·ãƒ³ã‚°åˆ©ç”¨ï¼‰  
3\. å®¿æ³Šæ¥­ç•Œç”¨èªã®ç¢ºèªï¼ˆãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³/ã‚¢ã‚¦ãƒˆç­‰ï¼‰  
4\. æœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆé–‹ç™ºãƒãƒ¼ãƒ ï¼‰

\---

\#\# 4\. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

\#\#\# 4.1 ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´

\*\*çµè«–\*\*: \*\*å¤‰æ›´ä¸è¦\*\*

æ—¢å­˜ã®\`faq\_translations\`ãƒ†ãƒ¼ãƒ–ãƒ«ã¯\`language VARCHAR(10)\`ã§å®šç¾©æ¸ˆã¿ã€‚    
\`zh-TW\`ï¼ˆ6æ–‡å­—ï¼‰ã€\`fr\`ï¼ˆ2æ–‡å­—ï¼‰ã€\`ko\`ï¼ˆ2æ–‡å­—ï¼‰ã™ã¹ã¦å¯¾å¿œå¯èƒ½ã€‚

\#\#\# 4.2 ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

\*\*çµè«–\*\*: \*\*ä¸è¦\*\*

ãƒ‡ãƒ¼ã‚¿æŠ•å…¥ã¯\`FAQ\_PRESETS\`çµŒç”±ã§è¡Œã†ãŸã‚ã€ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ãªã—ã€‚

\#\#\# 4.3 ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç¢ºèª

\*\*æ—¢å­˜ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹\*\*:  
\`\`\`sql  
\-- pgvectorã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆæ—¢ã«å®Ÿè£…æ¸ˆã¿ï¼‰  
CREATE INDEX idx\_faq\_translations\_embedding ON faq\_translations   
USING ivfflat (embedding vector\_cosine\_ops);

\-- è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆç¢ºèªæ¨å¥¨ï¼‰  
CREATE INDEX idx\_faq\_translations\_lookup ON faq\_translations   
(faq\_id, language);  
\`\`\`

\*\*ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™\*\*:  
\- FAQæ¤œç´¢ï¼ˆãƒ™ã‚¯ãƒˆãƒ«é¡ä¼¼åº¦ï¼‰: 50msä»¥å†…  
\- è¨€èªåˆ¥FAQå–å¾—: 10msä»¥å†…

\---

\#\# 5\. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…

\#\#\# 5.1 FAQ\_PRESETSã¸ã®3è¨€èªè¿½åŠ 

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`backend/app/data/faq\_presets.py\`

\*\*ä¿®æ­£å†…å®¹\*\*: å„FAQã®\`translations\`é…åˆ—ã«3è¨€èªã‚’è¿½åŠ 

\#\#\#\# 5.1.1 å®Ÿè£…ä¾‹ï¼ˆbasic\_quiet\_hoursï¼‰

\`\`\`python  
{  
    "category": "basic",  
    "intent\_key": "basic\_quiet\_hours",  
    "priority": 5,  
    "translations": \[  
        {  
            "language": "ja",  
            "question": "å¤œé–“ã®é™éŸ³ãƒ«ãƒ¼ãƒ«ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",  
            "answer": "22æ™‚ä»¥é™ã¯ä»–ã®ã‚²ã‚¹ãƒˆã¸ã®é…æ…®ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚é€šè©±ã‚„ä¼šè©±ã¯å…±ç”¨ã‚¹ãƒšãƒ¼ã‚¹ã§è¡Œã£ã¦ãã ã•ã„ã€‚"  
        },  
        {  
            "language": "en",  
            "question": "Is there a quiet rule at night?",  
            "answer": "Please keep noise to a minimum after 10:00 PM. Phone calls and conversations should be done in common areas."  
        },  
        {  
            "language": "zh-TW",  
            "question": "æ™šä¸Šæœ‰å®‰éœè¦å‰‡å—ï¼Ÿ",  
            "answer": "æ™šä¸Š10é»å¾Œè«‹ç›¡é‡ä¿æŒå®‰éœã€‚é€šè©±å’Œäº¤è«‡è«‹åœ¨å…¬å…±å€åŸŸé€²è¡Œã€‚"  
        },  
        {  
            "language": "fr",  
            "question": "Y a-t-il une rÃ¨gle de silence la nuit ?",  
            "answer": "Veuillez garder le silence aprÃ¨s 22h00. Les appels tÃ©lÃ©phoniques et les conversations doivent se faire dans les espaces communs."  
        },  
        {  
            "language": "ko",  
            "question": "ì•¼ê°„ì— ì¡°ìš©íˆ í•´ì•¼ í•˜ëŠ” ê·œì¹™ì´ ìˆë‚˜ìš”?",  
            "answer": "ì˜¤í›„ 10ì‹œ ì´í›„ì—ëŠ” ë‹¤ë¥¸ ê²ŒìŠ¤íŠ¸ë¥¼ ë°°ë ¤í•´ ì£¼ì„¸ìš”. í†µí™”ë‚˜ ëŒ€í™”ëŠ” ê³µìš© ê³µê°„ì—ì„œ í•´ì£¼ì„¸ìš”."  
        }  
    \]  
},  
\`\`\`

\#\#\#\# 5.1.2 ç¿»è¨³ä½œæ¥­ç¯„å›²

\*\*å¯¾è±¡FAQæ•°\*\*: 30å€‹    
\*\*è¿½åŠ è¨€èª\*\*: 3è¨€èª    
\*\*è¿½åŠ ç¿»è¨³æ•°\*\*: 30 Ã— 3 \= \*\*90ç¿»è¨³\*\*

\*\*ã‚«ãƒ†ã‚´ãƒªåˆ¥å†…è¨³\*\*:  
\- Basic: 8FAQ Ã— 3è¨€èª \= 24ç¿»è¨³  
\- Facilities: 8FAQ Ã— 3è¨€èª \= 24ç¿»è¨³  
\- Location: 7FAQ Ã— 3è¨€èª \= 21ç¿»è¨³  
\- Trouble: 7FAQ Ã— 3è¨€èª \= 21ç¿»è¨³

\#\#\#\# 5.1.3 ç¿»è¨³ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆï¼ˆæ¨å¥¨ï¼‰

ç¿»è¨³ä½œæ¥­åŠ¹ç‡åŒ–ã®ãŸã‚ã€ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆç®¡ç†ã‚’æ¨å¥¨:

| intent\_key | category | ja | en | zh-TW | fr | ko |  
|-----------|----------|----|----|-------|----|----|  
| basic\_quiet\_hours | basic | å¤œé–“ã®é™éŸ³ãƒ«ãƒ¼ãƒ«... | Is there a quiet... | æ™šä¸Šæœ‰å®‰éœè¦å‰‡... | Y a-t-il une... | ì•¼ê°„ì— ì¡°ìš©íˆ... |  
| ... | ... | ... | ... | ... | ... | ... |

\*\*CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå¾Œã€Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã§\`FAQ\_PRESETS\`ã«å¤‰æ›å¯èƒ½\*\*

\#\#\# 5.2 ãƒ—ãƒ©ãƒ³åˆ¥è¨€èªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å®Ÿè£…

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`backend/app/core/plan\_limits.py\`

\#\#\#\# 5.2.1 è¨€èªå„ªå…ˆé †ä½å®šç¾©ï¼ˆæ–°è¦è¿½åŠ ï¼‰

\`\`\`python  
\# æ–™é‡‘ãƒ—ãƒ©ãƒ³åˆ¥ã®è¨€èªå„ªå…ˆé †ä½  
PLAN\_LANGUAGE\_PRIORITY \= {  
    "Free": \["ja"\],  \# æ—¥æœ¬èªã®ã¿  
    "Mini": \["ja", "en"\],  \# æ—¥æœ¬èª+è‹±èª  
    "Small": \["ja", "en", "zh-TW"\],  \# \+ç¹ä½“ä¸­å›½èª  
    "Standard": \["ja", "en", "zh-TW", "fr"\],  \# \+ãƒ•ãƒ©ãƒ³ã‚¹èª  
    "Premium": None  \# ç„¡åˆ¶é™ï¼ˆã™ã¹ã¦ã®è¨€èªï¼‰  
}  
\`\`\`

\*\*è¨­è¨ˆæ ¹æ‹ \*\*:  
\- \*\*Free\*\*: å›½å†…æ—¥æœ¬èªã‚²ã‚¹ãƒˆã®ã¿æƒ³å®š  
\- \*\*Mini\*\*: æœ€å°é™ã®å¤šè¨€èªå¯¾å¿œï¼ˆè‹±èªåœï¼‰  
\- \*\*Small\*\*: ã‚¢ã‚¸ã‚¢åœï¼ˆå°æ¹¾ãƒ»é¦™æ¸¯ï¼‰ã‚’è¿½åŠ   
\- \*\*Standard\*\*: æ¬§å·åœï¼ˆãƒ•ãƒ©ãƒ³ã‚¹ï¼‰ã‚’è¿½åŠ   
\- \*\*Premium\*\*: éŸ“å›½èªã‚’å«ã‚€ã™ã¹ã¦ã®è¨€èª

\*\*ãƒ—ãƒ©ãƒ³åã®å½¢å¼\*\*: å¤§æ–‡å­—å§‹ã¾ã‚Šï¼ˆ"Free", "Mini"ï¼‰    
â€» convert\_subscription\_plan\_to\_plan\_type()ã§å°æ–‡å­—ã‹ã‚‰å¤‰æ›æ¸ˆã¿

\#\#\#\# 5.2.2 FAQãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°é–¢æ•°ä¿®æ­£

\*\*ä¿®æ­£å‰ã®ã‚³ãƒ¼ãƒ‰\*\*:  
\`\`\`python  
def filter\_faq\_presets\_by\_plan(  
    faq\_presets: List\[dict\],  
    subscription\_plan: str  
) \-\> List\[dict\]:  
    """æ–™é‡‘ãƒ—ãƒ©ãƒ³ã«åŸºã¥ã„ã¦FAQãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆä»¶æ•°ã®ã¿ï¼‰"""  
    plan\_type \= convert\_subscription\_plan\_to\_plan\_type(subscription\_plan)  
    faq\_limit \= get\_plan\_defaults(plan\_type).get("faq\_limit")  
      
    if faq\_limit:  
        return faq\_presets\[:faq\_limit\]  
    else:  
        return faq\_presets  
\`\`\`

\*\*ä¿®æ­£å¾Œã®ã‚³ãƒ¼ãƒ‰\*\*:  
\`\`\`python  
def filter\_faq\_presets\_by\_plan(  
    faq\_presets: List\[dict\],  
    subscription\_plan: str  
) \-\> List\[dict\]:  
    """  
    æ–™é‡‘ãƒ—ãƒ©ãƒ³ã«åŸºã¥ã„ã¦FAQãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ãƒ•ã‚£ãƒ«ã‚¿  
      
    Args:  
        faq\_presets: FAQãƒ—ãƒªã‚»ãƒƒãƒˆãƒªã‚¹ãƒˆ  
        subscription\_plan: æ–™é‡‘ãƒ—ãƒ©ãƒ³ï¼ˆ'free', 'mini', 'small', 'standard', 'premium'ï¼‰  
      
    Returns:  
        ãƒ•ã‚£ãƒ«ã‚¿ã•ã‚ŒãŸFAQãƒ—ãƒªã‚»ãƒƒãƒˆãƒªã‚¹ãƒˆï¼ˆä»¶æ•°ãƒ»è¨€èªã®ä¸¡æ–¹ã§ãƒ•ã‚£ãƒ«ã‚¿æ¸ˆã¿ï¼‰  
    """  
    \# ãƒ—ãƒ©ãƒ³åã‚’æ­£è¦åŒ–ï¼ˆå°æ–‡å­— â†’ å¤§æ–‡å­—å§‹ã¾ã‚Šï¼‰  
    plan\_type \= convert\_subscription\_plan\_to\_plan\_type(subscription\_plan)  
      
    \# ãƒ—ãƒ©ãƒ³åˆ¥ã®FAQä»¶æ•°ä¸Šé™ã‚’å–å¾—  
    faq\_limit \= get\_plan\_defaults(plan\_type).get("faq\_limit")  
      
    \# ãƒ—ãƒ©ãƒ³åˆ¥ã®è¨€èªå„ªå…ˆé †ä½ã‚’å–å¾—  
    allowed\_languages \= PLAN\_LANGUAGE\_PRIORITY.get(plan\_type)  
      
    \# FAQã‚’ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆä»¶æ•°åˆ¶é™ï¼‰  
    filtered\_faqs \= faq\_presets\[:faq\_limit\] if faq\_limit else faq\_presets  
      
    \# ç¿»è¨³ã‚’ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆè¨€èªåˆ¶é™ï¼‰  
    \# Premiumãƒ—ãƒ©ãƒ³ï¼ˆallowed\_languages=Noneï¼‰ã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—  
    if allowed\_languages is not None:  
        for faq in filtered\_faqs:  
            \# è¨±å¯ã•ã‚ŒãŸè¨€èªã®ç¿»è¨³ã®ã¿ã‚’æ®‹ã™  
            faq\["translations"\] \= \[  
                t for t in faq\["translations"\]  
                if t\["language"\] in allowed\_languages  
            \]  
      
    return filtered\_faqs  
\`\`\`

\*\*âœ… åŠ¹æœ\*\*:  
\- Freeãƒ—ãƒ©ãƒ³: 20FAQ Ã— æ—¥æœ¬èªã®ã¿ï¼ˆ1è¨€èªï¼‰= 20ç¿»è¨³  
\- Miniãƒ—ãƒ©ãƒ³: 30FAQ Ã— æ—¥æœ¬èª+è‹±èªï¼ˆ2è¨€èªï¼‰= 60ç¿»è¨³  
\- Smallãƒ—ãƒ©ãƒ³: 30FAQ Ã— æ—¥æœ¬èª+è‹±èª+ç¹ä½“ä¸­å›½èªï¼ˆ3è¨€èªï¼‰= 90ç¿»è¨³  
\- Standardãƒ—ãƒ©ãƒ³: 30FAQ Ã— æ—¥æœ¬èª+è‹±èª+ç¹ä½“ä¸­å›½èª+ãƒ•ãƒ©ãƒ³ã‚¹èªï¼ˆ4è¨€èªï¼‰= 120ç¿»è¨³  
\- Premiumãƒ—ãƒ©ãƒ³: 30FAQ Ã— ã™ã¹ã¦ã®è¨€èªï¼ˆ5è¨€èªï¼‰= 150ç¿»è¨³

\#\#\# 5.3 Facilitiesãƒ†ãƒ¼ãƒ–ãƒ«ã®available\_languagesæ›´æ–°

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`backend/app/services/auth\_service.py\`

\*\*ä¿®æ­£å†…å®¹\*\*: æ–°è¦ç™»éŒ²æ™‚ã«\`languages\`ã‚’ãƒ—ãƒ©ãƒ³åˆ¥ã«è¨­å®š

\#\#\#\# 5.3.1 ä¿®æ­£å‰ã®ã‚³ãƒ¼ãƒ‰

\`\`\`python  
async def register\_facility(  
    self,  
    registration\_data: FacilityRegistrationRequest,  
    background\_tasks: BackgroundTasks  
) \-\> dict:  
    """æ–½è¨­æ–°è¦ç™»éŒ²"""  
      
    \# ... ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ ...  
      
    facility \= Facility(  
        name=registration\_data.facility\_name,  
        slug=slug,  
        email=registration\_data.email,  
        languages=\["en"\],  \# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯è‹±èªã®ã¿ â† ã“ã“ã‚’ä¿®æ­£  
        \# ...  
    )  
\`\`\`

\#\#\#\# 5.3.2 ä¿®æ­£å¾Œã®ã‚³ãƒ¼ãƒ‰

\`\`\`python  
async def register\_facility(  
    self,  
    registration\_data: FacilityRegistrationRequest,  
    background\_tasks: BackgroundTasks  
) \-\> dict:  
    """æ–½è¨­æ–°è¦ç™»éŒ²"""  
      
    \# ... ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ ...  
      
    \# ãƒ—ãƒ©ãƒ³åˆ¥ã®è¨€èªå„ªå…ˆé †ä½ã‚’å–å¾—  
    from app.core.plan\_limits import (  
        PLAN\_LANGUAGE\_PRIORITY,  
        convert\_subscription\_plan\_to\_plan\_type  
    )  
      
    plan\_type \= convert\_subscription\_plan\_to\_plan\_type(  
        registration\_data.subscription\_plan  
    )  
      
    \# ãƒ—ãƒ©ãƒ³åˆ¥ã®åˆ©ç”¨å¯èƒ½è¨€èªã‚’å–å¾—  
    allowed\_languages \= PLAN\_LANGUAGE\_PRIORITY.get(plan\_type)  
      
    \# Premiumãƒ—ãƒ©ãƒ³ï¼ˆNoneï¼‰ã®å ´åˆã¯å…¨è¨€èª  
    if allowed\_languages is None:  
        allowed\_languages \= \["ja", "en", "zh-TW", "fr", "ko"\]  
      
    facility \= Facility(  
        name=registration\_data.facility\_name,  
slug=slug,  
        email=registration\_data.email,  
        languages=allowed\_languages,  \# ãƒ—ãƒ©ãƒ³åˆ¥ã®è¨€èªãƒªã‚¹ãƒˆ  
        language\_limit=len(allowed\_languages) if plan\_type \!= "Premium" else None,  
        \# ...  
    )  
      
    \# ... æ®‹ã‚Šã®å‡¦ç† ...  
\`\`\`

\*\*âœ… åŠ¹æœ\*\*: ã‚²ã‚¹ãƒˆå´ã®è¨€èªé¸æŠç”»é¢ã§ã€ãƒ—ãƒ©ãƒ³åˆ¥ã®è¨€èªã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹ã€‚

\#\#\# 5.4 ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`backend/app/services/faq\_service.py\`

\*\*ç¢ºèªå†…å®¹\*\*: æ—¢å­˜ã®è¨€èªæ•°åˆ¶é™ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£å¸¸å‹•ä½œã™ã‚‹ã‹ç¢ºèª

\`\`\`python  
\# æ—¢å­˜ã‚³ãƒ¼ãƒ‰ï¼ˆä¿®æ­£ä¸è¦ã€å‹•ä½œç¢ºèªã®ã¿ï¼‰  
if facility.language\_limit is not None:  
    existing\_languages \= await self.\_get\_facility\_languages(facility\_id)  
    new\_languages \= {trans.language for trans in request.translations}  
    all\_languages \= existing\_languages | new\_languages  
      
    if len(all\_languages) \> facility.language\_limit:  
        raise ValueError(f"ãƒ—ãƒ©ãƒ³ã®è¨€èªæ•°åˆ¶é™ã«é”ã—ã¦ã„ã¾ã™...")  
\`\`\`

\*\*âœ… ç¢ºèªé …ç›®\*\*:  
\- Freeãƒ—ãƒ©ãƒ³ï¼ˆ1è¨€èªåˆ¶é™ï¼‰ã§æ—¥æœ¬èªä»¥å¤–ã®è¨€èªã‚’è¿½åŠ â†’ã‚¨ãƒ©ãƒ¼  
\- Miniãƒ—ãƒ©ãƒ³ï¼ˆ2è¨€èªåˆ¶é™ï¼‰ã§3è¨€èªç›®ã‚’è¿½åŠ â†’ã‚¨ãƒ©ãƒ¼  
\- Premiumãƒ—ãƒ©ãƒ³ï¼ˆç„¡åˆ¶é™ï¼‰ã§5è¨€èªã™ã¹ã¦è¿½åŠ â†’æˆåŠŸ

\#\#\# 5.5 åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆã®ä¸¦åˆ—å‡¦ç†å®Ÿè£…

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`backend/app/services/faq\_service.py\`

\#\#\#\# 5.5.1 ä¸¦åˆ—å‡¦ç†å®Ÿè£…

\`\`\`python  
import asyncio  
from typing import List

async def create\_faq\_with\_embeddings(  
    self,  
    facility\_id: int,  
    request: FAQRequest  
) \-\> FAQ:  
    """FAQä½œæˆï¼ˆåŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ä¸¦åˆ—ç”Ÿæˆï¼‰"""  
      
    \# FAQä½œæˆ  
    faq \= FAQ(  
        facility\_id=facility\_id,  
        category=request.category,  
        intent\_key=request.intent\_key,  
        priority=request.priority,  
        is\_active=request.is\_active  
    )  
    self.db.add(faq)  
    await self.db.flush()  \# IDã‚’å–å¾—  
      
    \# åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆã‚¿ã‚¹ã‚¯ã‚’ä½œæˆ  
    embedding\_tasks \= \[\]  
    for trans\_request in request.translations:  
        combined\_text \= f"{trans\_request.question} {trans\_request.answer}"  
        task \= generate\_embedding(combined\_text)  
        embedding\_tasks.append((trans\_request, task))  
      
    \# ä¸¦åˆ—å®Ÿè¡Œï¼ˆæœ€å¤§5ä¸¦åˆ—ï¼‰  
    semaphore \= asyncio.Semaphore(5)  
      
    async def generate\_with\_limit(trans\_req, task):  
        async with semaphore:  
            embedding \= await task  
            return trans\_req, embedding  
      
    results \= await asyncio.gather(\*\[  
        generate\_with\_limit(trans\_req, task)  
        for trans\_req, task in embedding\_tasks  
    \])  
      
    \# FAQç¿»è¨³ä½œæˆ  
    for trans\_request, embedding in results:  
        faq\_translation \= FAQTranslation(  
            faq\_id=faq.id,  
            language=trans\_request.language,  
            question=trans\_request.question,  
            answer=trans\_request.answer,  
            embedding=embedding  
        )  
        self.db.add(faq\_translation)  
      
    await self.db.commit()  
    return faq  
\`\`\`

\#\#\#\# 5.5.2 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™

\- \*\*Premiumãƒ—ãƒ©ãƒ³æ–°è¦ç™»éŒ²\*\*: 150ç¿»è¨³ã®åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆ  
\- \*\*ä¸¦åˆ—å‡¦ç†æ•°\*\*: 5ï¼ˆOpenAI API ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆè€ƒæ…®ï¼‰  
\- \*\*ç›®æ¨™æ™‚é–“\*\*: 30ç§’ä»¥å†…  
\- \*\*1ç¿»è¨³ã‚ãŸã‚Š\*\*: 0.2ç§’ä»¥å†…

\---

\#\# 6\. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

\#\#\# 6.1 è¨€èªé¸æŠUIï¼ˆä¿®æ­£ä¸è¦ã®è¦‹è¾¼ã¿ï¼‰

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`frontend/src/views/guest/LanguageSelect.vue\`

\*\*ç¾çŠ¶\*\*: ãƒ—ãƒ©ãƒ³å¯¾å¿œè¨€èªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å®Ÿè£…æ¸ˆã¿

\`\`\`typescript  
// æ—¢å­˜ã‚³ãƒ¼ãƒ‰ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ä¿®æ­£å¾Œã€å‹•ä½œç¢ºèªã®ã¿ï¼‰  
const availableLanguages \= response.facility.available\_languages || \['en'\]  
const filteredLanguages \= SUPPORTED\_LANGUAGES.filter(lang \=\>   
  availableLanguages.includes(lang.code)  
)  
\`\`\`

\*\*âœ… è©•ä¾¡\*\*: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®\`languages\`ã‚«ãƒ©ãƒ ãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚Œã°å‹•ä½œã™ã‚‹è¦‹è¾¼ã¿ã€‚

\*\*ç¢ºèªé …ç›®\*\*:  
\- \[ \] APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«\`available\_languages\`ãŒå«ã¾ã‚Œã‚‹ã‹  
\- \[ \] ãƒ—ãƒ©ãƒ³åˆ¥ã«æ­£ã—ã„è¨€èªã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹ã‹  
\- \[ \] è¨€èªé¸æŠå¾Œã«ãƒãƒ£ãƒƒãƒˆç”»é¢ã«é·ç§»ã™ã‚‹ã‹

\#\#\# 6.2 è¨€èªå®šæ•°ã®ç¢ºèª

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`frontend/src/utils/constants.ts\`

\*\*ç¢ºèªå†…å®¹\*\*: 5è¨€èªã™ã¹ã¦å®šç¾©æ¸ˆã¿ã‹ç¢ºèª

\`\`\`typescript  
// æ—¢å­˜ã‚³ãƒ¼ãƒ‰ï¼ˆä¿®æ­£ä¸è¦ï¼‰  
export const SUPPORTED\_LANGUAGES \= \[  
  { code: 'ja', name: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ' },  
  { code: 'en', name: 'English', flag: 'ğŸ‡¬ğŸ‡§' },  
  { code: 'zh-TW', name: 'ç¹é«”ä¸­æ–‡', flag: 'ğŸ‡¹ğŸ‡¼' },  // âœ…  
  { code: 'fr', name: 'FranÃ§ais', flag: 'ğŸ‡«ğŸ‡·' },  // âœ…  
  { code: 'ko', name: 'í•œêµ­ì–´', flag: 'ğŸ‡°ğŸ‡·' },  // âœ…  
  // ... ä»–è¨€èªï¼ˆä½¿ç”¨ã—ãªã„ï¼‰  
\] as const  
\`\`\`

\*\*âœ… è©•ä¾¡\*\*: å¿…è¦ãª5è¨€èªã™ã¹ã¦å®šç¾©æ¸ˆã¿ã€‚ä¿®æ­£ä¸è¦ã€‚

\#\#\# 6.3 data-testidå±æ€§ã®è¿½åŠ ï¼ˆE2Eãƒ†ã‚¹ãƒˆç”¨ï¼‰

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`frontend/src/views/guest/LanguageSelect.vue\`

\*\*è¿½åŠ å†…å®¹\*\*: ãƒ†ã‚¹ãƒˆç”¨ã®data-testidå±æ€§

\`\`\`vue  
\<template\>  
  \<div class="language-select" data-testid="language-select"\>  
    \<div   
      v-for="lang in filteredLanguages"   
      :key="lang.code"  
      class="language-option"  
      data-testid="language-option"  
      @click="selectLanguage(lang.code)"  
    \>  
      \<span\>{{ lang.flag }}\</span\>  
      \<span\>{{ lang.name }}\</span\>  
    \</div\>  
  \</div\>  
\</template\>  
\`\`\`

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`frontend/src/views/admin/Dashboard.vue\`

\`\`\`vue  
\<template\>  
  \<div class="dashboard"\>  
    \<div class="facility-info"\>  
      \<span data-testid="facility-slug"\>{{ facility.slug }}\</span\>  
    \</div\>  
  \</div\>  
\</template\>  
\`\`\`

\#\#\# 6.4 UIãƒ†ã‚­ã‚¹ãƒˆã®å¤šè¨€èªåŒ–ï¼ˆPhase 3ã§ã¯ã‚¹ã‚³ãƒ¼ãƒ—å¤–ï¼‰

\*\*å¯¾è±¡å¤–é …ç›®\*\*:  
\- ãƒœã‚¿ãƒ³ãƒ©ãƒ™ãƒ«ï¼ˆã€Œé€ä¿¡ã€ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€ç­‰ï¼‰  
\- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸  
\- ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

\*\*ç†ç”±\*\*:  
\- MVPæœŸé–“ä¸­ã¯è‹±èªãƒ»æ—¥æœ¬èªã®æ··åœ¨UIè¨±å®¹  
\- ã‚²ã‚¹ãƒˆã®è³ªå•ãƒ»å›ç­”ã®ã¿å¤šè¨€èªå¯¾å¿œã§ååˆ†  
\- UIãƒ†ã‚­ã‚¹ãƒˆå¤šè¨€èªåŒ–ã¯Expansion Phase Aã§å®Ÿè£…äºˆå®š

\---

\#\# 7\. FAQè‡ªå‹•è¨­å®šå®Ÿè£…

\#\#\# 7.1 æ–°è¦ç™»éŒ²ãƒ•ãƒ­ãƒ¼å…¨ä½“åƒ

\`\`\`  
æ–°è¦æ–½è¨­ç™»éŒ²APIå‘¼ã³å‡ºã—  
â†“  
1\. ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆï¼ˆusersï¼‰  
â†“  
2\. æ–½è¨­ä½œæˆï¼ˆfacilitiesï¼‰  
   \- languages: ãƒ—ãƒ©ãƒ³åˆ¥è¨€èªãƒªã‚¹ãƒˆè¨­å®š â˜…ä¿®æ­£  
   \- language\_limit: ãƒ—ãƒ©ãƒ³åˆ¥ã®è¨€èªæ•°ä¸Šé™è¨­å®š â˜…ä¿®æ­£  
â†“  
3\. ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã§FAQè‡ªå‹•æŠ•å…¥  
   \- FAQ\_PRESETSã‚’ãƒ—ãƒ©ãƒ³åˆ¥ã«ãƒ•ã‚£ãƒ«ã‚¿ â˜…ä¿®æ­£  
     \- ä»¶æ•°ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆæ—¢å­˜ï¼‰  
     \- è¨€èªãƒ•ã‚£ãƒ«ã‚¿ï¼ˆæ–°è¦è¿½åŠ ï¼‰  
   \- FAQã¨FAQTranslationã‚’ä¸€æ‹¬ä½œæˆ  
   \- åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ä¸¦åˆ—ç”Ÿæˆï¼ˆæœ€å¤§5ä¸¦åˆ—ï¼‰ â˜…å®Ÿè£…è©³ç´°è¿½åŠ   
â†“  
å®Œäº†ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å³åº§ã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼‰  
\`\`\`

\#\#\# 7.2 ãƒ—ãƒ©ãƒ³åˆ¥FAQæŠ•å…¥ä¾‹

\#\#\#\# 7.2.1 Freeãƒ—ãƒ©ãƒ³ï¼ˆ1è¨€èªã€20FAQï¼‰

\*\*æŠ•å…¥ãƒ‡ãƒ¼ã‚¿\*\*:  
\- FAQã‚¤ãƒ³ãƒ†ãƒ³ãƒˆ: 20å€‹  
\- FAQç¿»è¨³: 20å€‹ Ã— 1è¨€èªï¼ˆæ—¥æœ¬èªã®ã¿ï¼‰= \*\*20ç¿»è¨³\*\*

\*\*ä¾‹\*\*:  
\`\`\`python  
\# basic\_quiet\_hoursï¼ˆæ—¥æœ¬èªã®ã¿ï¼‰  
FAQ(  
    facility\_id=1,  
    category="basic",  
    intent\_key="basic\_quiet\_hours",  
    priority=5  
)  
FAQTranslation(  
    faq\_id=1,  
    language="ja",  
    question="å¤œé–“ã®é™éŸ³ãƒ«ãƒ¼ãƒ«ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",  
    answer="22æ™‚ä»¥é™ã¯ä»–ã®ã‚²ã‚¹ãƒˆã¸ã®é…æ…®ã‚’ãŠé¡˜ã„ã—ã¾ã™...",  
    embedding=\[0.123, \-0.456, ...\]  \# 1536æ¬¡å…ƒ  
)  
\`\`\`

\#\#\#\# 7.2.2 Miniãƒ—ãƒ©ãƒ³ï¼ˆ2è¨€èªã€30FAQï¼‰

\*\*æŠ•å…¥ãƒ‡ãƒ¼ã‚¿\*\*:  
\- FAQã‚¤ãƒ³ãƒ†ãƒ³ãƒˆ: 30å€‹  
\- FAQç¿»è¨³: 30å€‹ Ã— 2è¨€èªï¼ˆæ—¥æœ¬èª+è‹±èªï¼‰= \*\*60ç¿»è¨³\*\*

\#\#\#\# 7.2.3 Smallãƒ—ãƒ©ãƒ³ï¼ˆ3è¨€èªã€30FAQï¼‰

\*\*æŠ•å…¥ãƒ‡ãƒ¼ã‚¿\*\*:  
\- FAQã‚¤ãƒ³ãƒ†ãƒ³ãƒˆ: 30å€‹ï¼ˆPhase 3ã®FAQ\_PRESETSå…¨ä»¶ï¼‰  
\- FAQç¿»è¨³: 30å€‹ Ã— 3è¨€èªï¼ˆæ—¥æœ¬èª+è‹±èª+ç¹ä½“ä¸­å›½èªï¼‰= \*\*90ç¿»è¨³\*\*

\*\*æ³¨æ„\*\*: Phase 3æ™‚ç‚¹ã§FAQ\_PRESETSã¯30å€‹ã®ã¿ã€‚ãƒ—ãƒ©ãƒ³ä¸Šé™ã®50FAQã¸ã®æ‹¡å¼µã¯Phase 4ä»¥é™ã€‚

\#\#\#\# 7.2.4 Standardãƒ—ãƒ©ãƒ³ï¼ˆ4è¨€èªã€30FAQï¼‰

\*\*æŠ•å…¥ãƒ‡ãƒ¼ã‚¿\*\*:  
\- FAQã‚¤ãƒ³ãƒ†ãƒ³ãƒˆ: 30å€‹ï¼ˆPhase 3ã®FAQ\_PRESETSå…¨ä»¶ï¼‰  
\- FAQç¿»è¨³: 30å€‹ Ã— 4è¨€èªï¼ˆæ—¥æœ¬èª+è‹±èª+ç¹ä½“ä¸­å›½èª+ãƒ•ãƒ©ãƒ³ã‚¹èªï¼‰= \*\*120ç¿»è¨³\*\*

\*\*æ³¨æ„\*\*: Phase 3æ™‚ç‚¹ã§FAQ\_PRESETSã¯30å€‹ã®ã¿ã€‚ãƒ—ãƒ©ãƒ³ä¸Šé™ã®100FAQã¸ã®æ‹¡å¼µã¯Phase 4ä»¥é™ã€‚

\#\#\#\# 7.2.5 Premiumãƒ—ãƒ©ãƒ³ï¼ˆ5è¨€èªã€30FAQï¼‰

\*\*æŠ•å…¥ãƒ‡ãƒ¼ã‚¿\*\*:  
\- FAQã‚¤ãƒ³ãƒ†ãƒ³ãƒˆ: 30å€‹ï¼ˆPhase 3ã®FAQ\_PRESETSå…¨ä»¶ï¼‰  
\- FAQç¿»è¨³: 30å€‹ Ã— 5è¨€èªï¼ˆæ—¥æœ¬èª+è‹±èª+ç¹ä½“ä¸­å›½èª+ãƒ•ãƒ©ãƒ³ã‚¹èª+éŸ“å›½èªï¼‰= \*\*150ç¿»è¨³\*\*

\*\*æ³¨æ„\*\*: Phase 3æ™‚ç‚¹ã§FAQ\_PRESETSã¯30å€‹ã®ã¿ã€‚ç„¡åˆ¶é™ã¸ã®æ‹¡å¼µã¯Phase 4ä»¥é™ã€‚

\#\#\# 7.3 åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆ

\*\*å‡¦ç†ãƒ•ãƒ­ãƒ¼\*\*:  
\`\`\`python  
\# faq\_service.pyã®å®Ÿè£…ï¼ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³5.5.1å‚ç…§ï¼‰  
\# ä¸¦åˆ—å‡¦ç†ã§åŠ¹ç‡åŒ–  
async def create\_faq\_with\_embeddings(self, facility\_id, request):  
    \# 1\. FAQä½œæˆ  
    faq \= FAQ(...)  
      
    \# 2\. åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ä¸¦åˆ—ç”Ÿæˆï¼ˆæœ€å¤§5ä¸¦åˆ—ï¼‰  
    semaphore \= asyncio.Semaphore(5)  
    tasks \= \[generate\_embedding(text) for trans in request.translations\]  
    embeddings \= await asyncio.gather(\*tasks)  
      
    \# 3\. FAQç¿»è¨³ä½œæˆ  
    for trans, embedding in zip(request.translations, embeddings):  
        faq\_translation \= FAQTranslation(  
            faq\_id=faq.id,  
            language=trans.language,  
            question=trans.question,  
            answer=trans.answer,  
            embedding=embedding  
        )  
\`\`\`

\*\*ã‚³ã‚¹ãƒˆè©¦ç®—\*\*:  
\- OpenAI Embeddings API: $0.02/1M tokens  
\- 1ç¿»è¨³ã‚ãŸã‚Šå¹³å‡200ãƒˆãƒ¼ã‚¯ãƒ³  
\- Premiumãƒ—ãƒ©ãƒ³æ–°è¦ç™»éŒ²: 150ç¿»è¨³ Ã— 200ãƒˆãƒ¼ã‚¯ãƒ³ \= 30,000ãƒˆãƒ¼ã‚¯ãƒ³ â‰ˆ \*\*$0.0006\*\*ï¼ˆç´„Â¥0.09ï¼‰

\*\*âœ… è©•ä¾¡\*\*: ã‚³ã‚¹ãƒˆå½±éŸ¿ã¯ç„¡è¦–å¯èƒ½ã€‚

\---

\#\# 8\. ãƒ†ã‚¹ãƒˆè¨ˆç”»

\#\#\# 8.1 å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆBackendï¼‰

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`backend/tests/test\_multilingual\_faq\_presets.py\`ï¼ˆæ–°è¦ä½œæˆï¼‰

\#\#\#\# 8.1.1 ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

\`\`\`python  
import pytest  
from sqlalchemy import select  \# â† è¿½åŠ ï¼ˆCriticalä¿®æ­£1ï¼‰  
from app.data.faq\_presets import FAQ\_PRESETS  
from app.core.plan\_limits import (  
    filter\_faq\_presets\_by\_plan,   
    PLAN\_LANGUAGE\_PRIORITY  
)

class TestMultilingualFAQPresets:  
    """å¤šè¨€èªFAQ\_PRESETSã®ãƒ†ã‚¹ãƒˆ"""  
      
    def test\_faq\_presets\_structure(self):  
        """FAQ\_PRESETSã®æ§‹é€ ç¢ºèª"""  
        assert len(FAQ\_PRESETS) \== 30, "FAQ\_PRESETSã¯30å€‹ã§ã‚ã‚‹ã“ã¨"  
          
        for faq in FAQ\_PRESETS:  
            assert "category" in faq  
            assert "intent\_key" in faq  
            assert "priority" in faq  
            assert "translations" in faq  
              
            \# 5è¨€èªã™ã¹ã¦ã®ç¿»è¨³ãŒå­˜åœ¨ã™ã‚‹ã“ã¨  
            languages \= {t\["language"\] for t in faq\["translations"\]}  
            assert languages \== {"ja", "en", "zh-TW", "fr", "ko"}  
      
    def test\_translation\_content(self):  
        """ç¿»è¨³å†…å®¹ã®åŸºæœ¬ãƒã‚§ãƒƒã‚¯"""  
        for faq in FAQ\_PRESETS:  
            for trans in faq\["translations"\]:  
                \# å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å­˜åœ¨ç¢ºèª  
                assert "language" in trans  
                assert "question" in trans  
                assert "answer" in trans  
                  
                \# è³ªå•ãƒ»å›ç­”ãŒç©ºã§ãªã„ã“ã¨  
                assert len(trans\["question"\]) \> 0  
                assert len(trans\["answer"\]) \> 0  
                  
                \# æ–‡å­—æ•°åˆ¶é™ï¼ˆç›®å®‰ï¼‰  
                assert len(trans\["question"\]) \< 200  
                assert len(trans\["answer"\]) \< 1000

    def test\_filter\_by\_free\_plan(self):  
        """Freeãƒ—ãƒ©ãƒ³ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°"""  
        filtered \= filter\_faq\_presets\_by\_plan(FAQ\_PRESETS, "free")  
          
        \# FAQä»¶æ•°: 20ä»¶  
        assert len(filtered) \== 20  
          
        \# å„FAQã¯æ—¥æœ¬èªã®ã¿  
        for faq in filtered:  
            languages \= {t\["language"\] for t in faq\["translations"\]}  
            assert languages \== {"ja"}  
      
    def test\_filter\_by\_mini\_plan(self):  
        """Miniãƒ—ãƒ©ãƒ³ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°"""  
        filtered \= filter\_faq\_presets\_by\_plan(FAQ\_PRESETS, "mini")  
          
        \# FAQä»¶æ•°: 30ä»¶  
        assert len(filtered) \== 30  
          
        \# å„FAQã¯æ—¥æœ¬èª+è‹±èª  
        for faq in filtered:  
            languages \= {t\["language"\] for t in faq\["translations"\]}  
            assert languages \== {"ja", "en"}  
      
    def test\_filter\_by\_small\_plan(self):  
        """Smallãƒ—ãƒ©ãƒ³ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°"""  
        filtered \= filter\_faq\_presets\_by\_plan(FAQ\_PRESETS, "small")  
          
        \# FAQä»¶æ•°: 30ä»¶ï¼ˆPRESETSã®å…¨ä»¶ï¼‰  
        assert len(filtered) \== 30  
          
        \# å„FAQã¯æ—¥æœ¬èª+è‹±èª+ç¹ä½“ä¸­å›½èª  
        for faq in filtered:  
            languages \= {t\["language"\] for t in faq\["translations"\]}  
            assert languages \== {"ja", "en", "zh-TW"}  
      
    def test\_filter\_by\_standard\_plan(self):  
        """Standardãƒ—ãƒ©ãƒ³ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°"""  
        filtered \= filter\_faq\_presets\_by\_plan(FAQ\_PRESETS, "standard")  
          
        \# FAQä»¶æ•°: 30ä»¶  
        assert len(filtered) \== 30  
          
        \# å„FAQã¯æ—¥æœ¬èª+è‹±èª+ç¹ä½“ä¸­å›½èª+ãƒ•ãƒ©ãƒ³ã‚¹èª  
        for faq in filtered:  
            languages \= {t\["language"\] for t in faq\["translations"\]}  
            assert languages \== {"ja", "en", "zh-TW", "fr"}  
      
    def test\_filter\_by\_premium\_plan(self):  
        """Premiumãƒ—ãƒ©ãƒ³ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°"""  
        filtered \= filter\_faq\_presets\_by\_plan(FAQ\_PRESETS, "premium")  
          
        \# FAQä»¶æ•°: 30ä»¶  
        assert len(filtered) \== 30  
          
        \# å„FAQã¯ã™ã¹ã¦ã®è¨€èª  
        for faq in filtered:  
            languages \= {t\["language"\] for t in faq\["translations"\]}  
            assert languages \== {"ja", "en", "zh-TW", "fr", "ko"}

    def test\_language\_priority\_consistency(self):  
        """è¨€èªå„ªå…ˆé †ä½ã®ä¸€è²«æ€§ç¢ºèª"""  
        \# ã™ã¹ã¦ã®ãƒ—ãƒ©ãƒ³ã§æ—¥æœ¬èªãŒå«ã¾ã‚Œã‚‹ã“ã¨  
        for plan in \["Free", "Mini", "Small", "Standard"\]:  
            languages \= PLAN\_LANGUAGE\_PRIORITY\[plan\]  
            assert "ja" in languages  
          
        \# ç´¯ç©çš„ãªè¨€èªè¿½åŠ   
        assert set(PLAN\_LANGUAGE\_PRIORITY\["Free"\]).issubset(  
            set(PLAN\_LANGUAGE\_PRIORITY\["Mini"\])  
        )  
        assert set(PLAN\_LANGUAGE\_PRIORITY\["Mini"\]).issubset(  
            set(PLAN\_LANGUAGE\_PRIORITY\["Small"\])  
        )  
        assert set(PLAN\_LANGUAGE\_PRIORITY\["Small"\]).issubset(  
            set(PLAN\_LANGUAGE\_PRIORITY\["Standard"\])  
        )  
\`\`\`

\#\#\#\# 8.1.2 ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

\`\`\`bash  
\# Dockerç’°å¢ƒã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ  
docker-compose exec backend pytest backend/tests/test\_multilingual\_faq\_presets.py \-v

\# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ  
docker-compose exec backend pytest backend/tests/test\_multilingual\_faq\_presets.py \\  
  \--cov=app.data.faq\_presets \\  
  \--cov=app.core.plan\_limits  
\`\`\`

\#\#\# 8.2 çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆBackend \+ Databaseï¼‰

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`backend/tests/test\_multilingual\_registration.py\`ï¼ˆæ–°è¦ä½œæˆï¼‰

\#\#\#\# 8.2.1 ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

\`\`\`python  
import pytest  
from httpx import AsyncClient  
from sqlalchemy import select  \# â† è¿½åŠ ï¼ˆCriticalä¿®æ­£1ï¼‰  
from sqlalchemy.ext.asyncio import AsyncSession  
from app.models import Facility, FAQ, FAQTranslation

@pytest.mark.asyncio  
class TestMultilingualRegistration:  
    """å¤šè¨€èªå¯¾å¿œã®æ–°è¦ç™»éŒ²ãƒ†ã‚¹ãƒˆ"""  
      
    async def test\_free\_plan\_registration(  
        self,   
        async\_client: AsyncClient,   
        db\_session: AsyncSession  
    ):  
        """Freeãƒ—ãƒ©ãƒ³ã§æ–°è¦ç™»éŒ²"""  
        response \= await async\_client.post("/api/auth/register", json={  
            "email": "test-free@example.com",  
            "password": "SecurePass123\!",  
            "facility\_name": "ãƒ†ã‚¹ãƒˆãƒ›ã‚¹ãƒ†ãƒ«ï¼ˆFreeï¼‰",  
            "subscription\_plan": "free"  
        })  
          
        assert response.status\_code \== 200  
        data \= response.json()  
        facility\_id \= data\["facility"\]\["id"\]  
          
        \# æ–½è¨­ã®è¨€èªè¨­å®šç¢ºèª  
        facility \= await db\_session.get(Facility, facility\_id)  
        assert facility.languages \== \["ja"\]  
        assert facility.language\_limit \== 1  
          
        \# FAQç¿»è¨³ç¢ºèª  
        result \= await db\_session.execute(  
            select(FAQTranslation)  
            .join(FAQ)  
            .filter(FAQ.facility\_id \== facility\_id)  
        )  
        translations \= result.scalars().all()  
          
        \# 20FAQ Ã— 1è¨€èª \= 20ç¿»è¨³  
        assert len(translations) \== 20  
          
        \# ã™ã¹ã¦æ—¥æœ¬èª  
        languages \= {t.language for t in translations}  
        assert languages \== {"ja"}  
      
    async def test\_mini\_plan\_registration(  
        self,   
        async\_client: AsyncClient,   
        db\_session: AsyncSession  
    ):  
        """Miniãƒ—ãƒ©ãƒ³ã§æ–°è¦ç™»éŒ²"""  
        response \= await async\_client.post("/api/auth/register", json={  
            "email": "test-mini@example.com",  
            "password": "SecurePass123\!",  
            "facility\_name": "ãƒ†ã‚¹ãƒˆãƒ›ã‚¹ãƒ†ãƒ«ï¼ˆMiniï¼‰",  
            "subscription\_plan": "mini"  
        })  
          
        assert response.status\_code \== 200  
        data \= response.json()  
        facility\_id \= data\["facility"\]\["id"\]  
          
        \# æ–½è¨­ã®è¨€èªè¨­å®šç¢ºèª  
        facility \= await db\_session.get(Facility, facility\_id)  
        assert set(facility.languages) \== {"ja", "en"}  
        assert facility.language\_limit \== 2  
          
        \# FAQç¿»è¨³ç¢ºèª  
        result \= await db\_session.execute(  
            select(FAQTranslation)  
            .join(FAQ)  
            .filter(FAQ.facility\_id \== facility\_id)  
        )  
        translations \= result.scalars().all()  
          
        \# 30FAQ Ã— 2è¨€èª \= 60ç¿»è¨³  
        assert len(translations) \== 60  
          
        \# æ—¥æœ¬èª+è‹±èª  
        languages \= {t.language for t in translations}  
        assert languages \== {"ja", "en"}  
      
    async def test\_premium\_plan\_registration(  
        self,   
        async\_client: AsyncClient,   
        db\_session: AsyncSession  
    ):  
        """Premiumãƒ—ãƒ©ãƒ³ã§æ–°è¦ç™»éŒ²ï¼ˆå…¨è¨€èªï¼‰"""  
        response \= await async\_client.post("/api/auth/register", json={  
            "email": "test-premium@example.com",  
            "password": "SecurePass123\!",  
            "facility\_name": "ãƒ†ã‚¹ãƒˆãƒ›ã‚¹ãƒ†ãƒ«ï¼ˆPremiumï¼‰",  
            "subscription\_plan": "premium"  
        })  
          
        assert response.status\_code \== 200  
        data \= response.json()  
        facility\_id \= data\["facility"\]\["id"\]  
          
        \# æ–½è¨­ã®è¨€èªè¨­å®šç¢ºèª  
        facility \= await db\_session.get(Facility, facility\_id)  
        assert set(facility.languages) \== {"ja", "en", "zh-TW", "fr", "ko"}  
        assert facility.language\_limit is None  \# ç„¡åˆ¶é™  
          
        \# FAQç¿»è¨³ç¢ºèª  
        result \= await db\_session.execute(  
            select(FAQTranslation)  
            .join(FAQ)  
            .filter(FAQ.facility\_id \== facility\_id)  
        )  
        translations \= result.scalars().all()  
          
        \# 30FAQ Ã— 5è¨€èª \= 150ç¿»è¨³  
        assert len(translations) \== 150  
          
        \# å…¨è¨€èª  
        languages \= {t.language for t in translations}  
        assert languages \== {"ja", "en", "zh-TW", "fr", "ko"}  
          
        \# åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨  
        for trans in translations:  
            assert trans.embedding is not None  
            assert len(trans.embedding) \== 1536  
\`\`\`

\#\#\#\# 8.2.2 ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

\`\`\`bash  
\# Dockerç’°å¢ƒã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ  
docker-compose exec backend pytest backend/tests/test\_multilingual\_registration.py \-v

\# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—  
docker-compose exec backend pytest backend/tests/test\_multilingual\_registration.py \--clean-db  
\`\`\`

\#\#\# 8.3 E2Eãƒ†ã‚¹ãƒˆï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ï¼‰

\#\#\#\# 8.3.1 ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª

\*\*ã‚·ãƒŠãƒªã‚ª1: Freeãƒ—ãƒ©ãƒ³ç™»éŒ²ã¨è¨€èªé¸æŠ\*\*  
1\. æ–°è¦ç™»éŒ²ç”»é¢ã§ã€ŒFreeã€ãƒ—ãƒ©ãƒ³ã‚’é¸æŠ  
2\. æ–½è¨­æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ç™»éŒ²  
3\. ã‚²ã‚¹ãƒˆç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹  
4\. è¨€èªé¸æŠç”»é¢ã§ã€Œæ—¥æœ¬èªã€ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª  
5\. æ—¥æœ¬èªã§ãƒãƒ£ãƒƒãƒˆã€æ—¥æœ¬èªFAQãŒè¿”ã‚‹ã“ã¨ã‚’ç¢ºèª

\*\*ã‚·ãƒŠãƒªã‚ª2: Miniãƒ—ãƒ©ãƒ³ç™»éŒ²ã¨2è¨€èªå¯¾å¿œ\*\*  
1\. æ–°è¦ç™»éŒ²ç”»é¢ã§ã€ŒMiniã€ãƒ—ãƒ©ãƒ³ã‚’é¸æŠ  
2\. æ–½è¨­æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ç™»éŒ²  
3\. ã‚²ã‚¹ãƒˆç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹  
4\. è¨€èªé¸æŠç”»é¢ã§ã€Œæ—¥æœ¬èªã€ã€ŒEnglishã€ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª  
5\. è‹±èªã§ãƒãƒ£ãƒƒãƒˆã€è‹±èªFAQãŒè¿”ã‚‹ã“ã¨ã‚’ç¢ºèª

\*\*ã‚·ãƒŠãƒªã‚ª3: Premiumãƒ—ãƒ©ãƒ³ç™»éŒ²ã¨å…¨è¨€èªå¯¾å¿œ\*\*  
1\. æ–°è¦ç™»éŒ²ç”»é¢ã§ã€ŒPremiumã€ãƒ—ãƒ©ãƒ³ã‚’é¸æŠ  
2\. æ–½è¨­æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ç™»éŒ²  
3\. ã‚²ã‚¹ãƒˆç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹  
4\. è¨€èªé¸æŠç”»é¢ã§5è¨€èªã™ã¹ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª  
5\. ç¹ä½“ä¸­å›½èªã€ãƒ•ãƒ©ãƒ³ã‚¹èªã€éŸ“å›½èªã§ãƒãƒ£ãƒƒãƒˆ  
6\. ãã‚Œãã‚Œã®è¨€èªã§FAQãŒè¿”ã‚‹ã“ã¨ã‚’ç¢ºèª

\#\#\#\# 8.3.2 ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«

\*\*æ¨å¥¨ãƒ„ãƒ¼ãƒ«\*\*: Playwright

\`\`\`typescript  
// tests/e2e/multilingual-registration.spec.ts  
import { test, expect } from '@playwright/test'

test('Premiumãƒ—ãƒ©ãƒ³ç™»éŒ²ã§å…¨è¨€èªå¯¾å¿œ', async ({ page }) \=\> {  
  // æ–°è¦ç™»éŒ²  
  await page.goto('/register')  
  await page.fill('input\[name="email"\]', 'test-premium@example.com')  
  await page.fill('input\[name="password"\]', 'SecurePass123\!')  
  await page.fill('input\[name="facility\_name"\]', 'ãƒ†ã‚¹ãƒˆãƒ›ã‚¹ãƒ†ãƒ«')  
  await page.selectOption('select\[name="subscription\_plan"\]', 'premium')  
  await page.click('button\[type="submit"\]')  
    
  // æ–½è¨­ã‚¹ãƒ©ãƒƒã‚°ã‚’å–å¾—ï¼ˆdata-testidä½¿ç”¨ï¼‰  
  await page.waitForURL('/dashboard')  
  const facilitySlug \= await page  
    .locator('\[data-testid="facility-slug"\]')  
    .textContent()  
    
  // ã‚²ã‚¹ãƒˆç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹  
  await page.goto(\`/${facilitySlug}\`)  
    
  // è¨€èªé¸æŠç”»é¢ï¼ˆdata-testidä½¿ç”¨ï¼‰  
  await page.waitForSelector('\[data-testid="language-select"\]')  
    
  // 5è¨€èªã™ã¹ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª  
  const languages \= await page  
    .locator('\[data-testid="language-option"\]')  
    .count()  
  expect(languages).toBe(5)  
    
  // ç¹ä½“ä¸­å›½èªã‚’é¸æŠ  
  await page.click('text=ç¹é«”ä¸­æ–‡')  
    
  // ãƒãƒ£ãƒƒãƒˆç”»é¢ã§ç¹ä½“ä¸­å›½èªã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’ç¢ºèª  
  await page.waitForSelector('textarea\[placeholder\*="è«‹è¼¸å…¥"\]')  
    
  // FAQè³ªå•ï¼ˆç¹ä½“ä¸­å›½èªï¼‰  
  await page.fill('textarea', 'æ™šä¸Šæœ‰å®‰éœè¦å‰‡å—ï¼Ÿ')  
  await page.click('button\[type="submit"\]')  
    
  // ç¹ä½“ä¸­å›½èªã®å›ç­”ã‚’ç¢ºèª  
  await page.waitForSelector('text=æ™šä¸Š10é»å¾Œè«‹ç›¡é‡ä¿æŒå®‰éœ')  
})  
\`\`\`

\#\#\#\# 8.3.3 å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

\`\`\`bash  
\# Dockerç’°å¢ƒã§Playwrightãƒ†ã‚¹ãƒˆå®Ÿè¡Œ  
docker-compose exec frontend npm run test:e2e

\# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ  
docker-compose exec frontend npm run test:e2e \-- multilingual-registration.spec.ts

\# ãƒ˜ãƒƒãƒ‰ãƒ•ãƒ«ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰  
docker-compose exec frontend npm run test:e2e \-- \--headed  
\`\`\`

\#\#\# 8.4 ç¿»è¨³å“è³ªãƒã‚§ãƒƒã‚¯

\#\#\#\# 8.4.1 ãƒã‚§ãƒƒã‚¯é …ç›®

\*\*ç¹ä½“ä¸­å›½èªï¼ˆzh-TWï¼‰\*\*:  
\- \[ \] ç°¡ä½“å­—ãŒæ··åœ¨ã—ã¦ã„ãªã„ã‹  
\- \[ \] å°æ¹¾ãƒ»é¦™æ¸¯ã§ä¸€èˆ¬çš„ãªç”¨èªã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹  
\- \[ \] ã€Œæ‚¨ã€ï¼ˆã‚ãªãŸï¼‰ã®æ•¬èªãŒé©åˆ‡ã‹  
\- \[ \] æ•°å­—è¡¨è¨˜ãŒæ­£ã—ã„ï¼ˆä¾‹: 10é»ã€ä¸æ˜¯10ç‚¹ï¼‰

\*\*ãƒ•ãƒ©ãƒ³ã‚¹èªï¼ˆfrï¼‰\*\*:  
\- \[ \] æ­£å¼ãªã€Œvousã€ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹  
\- \[ \] ã‚¢ã‚¯ã‚»ãƒ³ãƒˆè¨˜å·ãŒæ­£ã—ã„ã‹ï¼ˆÃ©, Ã¨, Ãª, Ã , Ã¹, etc.ï¼‰  
\- \[ \] å®¿æ³Šæ¥­ç•Œç”¨èªãŒé©åˆ‡ã‹  
\- \[ \] ç”·æ€§åè©ãƒ»å¥³æ€§åè©ãŒæ­£ã—ã„ã‹

\*\*éŸ“å›½èªï¼ˆkoï¼‰\*\*:  
\- \[ \] æ•¬èªï¼ˆì¡´ëŒ“ë§ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹  
\- \[ \] ãƒãƒ³ã‚°ãƒ«è¡¨è¨˜ãŒæ­£ã—ã„ã‹  
\- \[ \] æ–‡æœ«ã®ã€Œ\~ìš”ã€ã€Œ\~ìŠµë‹ˆë‹¤ã€ãŒé©åˆ‡ã‹  
\- \[ \] ã‚¹ãƒšãƒ¼ã‚¹ãŒé©åˆ‡ã‹ï¼ˆä¾‹: ì²´í¬ ì¸ â†’ ì²´í¬ì¸ï¼‰

\*\*å“è³ªåŸºæº–\*\*: CEFR B2ãƒ¬ãƒ™ãƒ«ç›¸å½“ï¼ˆãƒ“ã‚¸ãƒã‚¹ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯èƒ½ï¼‰

\#\#\#\# 8.4.2 ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒã‚§ãƒƒã‚¯æ‰‹é †

1\. \*\*ç¿»è¨³ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ\*\*  
   \`\`\`bash  
   \# CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ  
   python scripts/export\_faq\_presets.py \--output translations.csv  
   \`\`\`

2\. \*\*ã‚¯ãƒ©ã‚¦ãƒ‰ã‚½ãƒ¼ã‚·ãƒ³ã‚°ã§ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒã‚§ãƒƒã‚¯\*\*  
   \- Gengoã€Conyacç­‰ã®ç¿»è¨³ã‚µãƒ¼ãƒ“ã‚¹åˆ©ç”¨  
\- å„è¨€èª2-3åã®ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ã«ä¾é ¼  
   \- å®¿æ³Šæ¥­ç•ŒçµŒé¨“è€…ã‚’å„ªå…ˆ  
   \- CEFR B2ãƒ¬ãƒ™ãƒ«ç›¸å½“ã®å“è³ªã‚’è¦æ±‚

3\. \*\*ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åæ˜ \*\*  
   \`\`\`bash  
   \# ä¿®æ­£å¾Œã®CSVã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ  
   python scripts/import\_faq\_presets.py \--input translations\_reviewed.csv  
   \`\`\`

\#\#\# 8.5 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

\#\#\#\# 8.5.1 åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆé€Ÿåº¦

\*\*ãƒ†ã‚¹ãƒˆæ¡ä»¶\*\*:  
\- Premiumãƒ—ãƒ©ãƒ³æ–°è¦ç™»éŒ²ï¼ˆ150ç¿»è¨³ï¼‰  
\- OpenAI Embeddings APIä¸¦åˆ—å‡¦ç†æ•°: 5

\*\*æœŸå¾…å€¤\*\*:  
\- ç·å‡¦ç†æ™‚é–“: 30ç§’ä»¥å†…  
\- 1ç¿»è¨³ã‚ãŸã‚Š: 0.2ç§’ä»¥å†…

\*\*è¨ˆæ¸¬ã‚³ãƒ¼ãƒ‰\*\*:  
\`\`\`python  
import time  
import asyncio

async def test\_embedding\_generation\_performance():  
    """åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ"""  
    start \= time.time()  
      
    \# 150ç¿»è¨³ã®åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆï¼ˆ5ä¸¦åˆ—ï¼‰  
    semaphore \= asyncio.Semaphore(5)  
      
    async def generate\_with\_limit(i):  
        async with semaphore:  
            return await generate\_embedding(f"Question {i} Answer {i}")  
      
    tasks \= \[generate\_with\_limit(i) for i in range(150)\]  
    embeddings \= await asyncio.gather(\*tasks)  
      
    elapsed \= time.time() \- start  
    avg\_time \= elapsed / 150  
      
    print(f"Total: {elapsed:.2f}s, Avg: {avg\_time:.4f}s/translation")  
      
    assert elapsed \< 30, f"å‡¦ç†æ™‚é–“ãŒé…ã™ãã¾ã™: {elapsed:.2f}s"  
    assert avg\_time \< 0.2, f"1ç¿»è¨³ã‚ãŸã‚Šã®å‡¦ç†æ™‚é–“ãŒé…ã™ãã¾ã™: {avg\_time:.4f}s"  
    assert len(embeddings) \== 150  
    assert all(len(e) \== 1536 for e in embeddings)  
\`\`\`

\*\*å®Ÿè¡Œæ–¹æ³•\*\*:  
\`\`\`bash  
docker-compose exec backend pytest backend/tests/test\_performance.py::test\_embedding\_generation\_performance \-v  
\`\`\`

\#\#\#\# 8.5.2 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªæ€§èƒ½

\*\*ãƒ†ã‚¹ãƒˆæ¡ä»¶\*\*:  
\- æ–½è¨­æ•°: 100ä»¶  
\- FAQ/æ–½è¨­: 30ä»¶  
\- ç¿»è¨³/FAQ: 5è¨€èª  
\- ç·ç¿»è¨³æ•°: 15,000ä»¶

\*\*ãƒ†ã‚¹ãƒˆã‚¯ã‚¨ãƒª\*\*:  
\`\`\`sql  
\-- ã‚²ã‚¹ãƒˆè³ªå•æ™‚ã®FAQæ¤œç´¢ï¼ˆãƒ™ã‚¯ãƒˆãƒ«é¡ä¼¼åº¦æ¤œç´¢ï¼‰  
EXPLAIN ANALYZE  
SELECT   
    f.intent\_key,  
    ft.question,  
    ft.answer,  
    1 \- (ft.embedding \<=\> '\[0.1, 0.2, ...\]'::vector) AS similarity  
FROM faq\_translations ft  
JOIN faqs f ON ft.faq\_id \= f.id  
WHERE f.facility\_id \= 1  
  AND ft.language \= 'ja'  
  AND f.is\_active \= TRUE  
ORDER BY similarity DESC  
LIMIT 5;  
\`\`\`

\*\*æœŸå¾…å€¤\*\*:  
\- ã‚¯ã‚¨ãƒªå®Ÿè¡Œæ™‚é–“: 50msä»¥å†…  
\- pgvectorã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹åˆ©ç”¨ç¢ºèª  
\- Seq Scanãªã—

\*\*ç¢ºèªæ–¹æ³•\*\*:  
\`\`\`bash  
\# Dockerç’°å¢ƒã§EXPLAIN ANALYZEå®Ÿè¡Œ  
docker-compose exec db psql \-U yadopera \-d yadopera\_db \-c "  
EXPLAIN ANALYZE  
SELECT   
    f.intent\_key,  
    ft.question,  
    ft.answer,  
    1 \- (ft.embedding \<=\> '\[0.1, 0.2, ...\]'::vector) AS similarity  
FROM faq\_translations ft  
JOIN faqs f ON ft.faq\_id \= f.id  
WHERE f.facility\_id \= 1  
  AND ft.language \= 'ja'  
  AND f.is\_active \= TRUE  
ORDER BY similarity DESC  
LIMIT 5;  
"  
\`\`\`

\---

\#\# 9\. ãƒ‡ãƒ—ãƒ­ã‚¤è¨ˆç”»

\#\#\# 9.1 ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒ

\*\*ç’°å¢ƒæ§‹æˆ\*\*:  
\- \*\*é–‹ç™ºç’°å¢ƒï¼ˆDevï¼‰\*\*: ãƒ­ãƒ¼ã‚«ãƒ«Docker  
\- \*\*ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒï¼ˆStagingï¼‰\*\*: AWS/GCPï¼ˆæœ¬ç•ªåŒç­‰æ§‹æˆï¼‰  
\- \*\*æœ¬ç•ªç’°å¢ƒï¼ˆProductionï¼‰\*\*: AWS/GCP

\#\#\# 9.2 ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ãƒ†ãƒƒãƒ—

\#\#\#\# 9.2.1 Phase 1: é–‹ç™ºç’°å¢ƒï¼ˆå®Œäº†æ¡ä»¶ï¼‰

\*\*ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ\*\*:  
\- \[ \] FAQ\_PRESETSã«3è¨€èªï¼ˆ90ç¿»è¨³ï¼‰è¿½åŠ å®Œäº†  
\- \[ \] ãƒ—ãƒ©ãƒ³åˆ¥è¨€èªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å®Ÿè£…å®Œäº†  
\- \[ \] facilitiesãƒ†ãƒ¼ãƒ–ãƒ«ã®languagesè¨­å®šå®Ÿè£…å®Œäº†  
\- \[ \] ä¸¦åˆ—å‡¦ç†å®Ÿè£…å®Œäº†  
\- \[ \] data-testidå±æ€§è¿½åŠ å®Œäº†  
\- \[ \] å˜ä½“ãƒ†ã‚¹ãƒˆã™ã¹ã¦ãƒ‘ã‚¹  
\- \[ \] çµ±åˆãƒ†ã‚¹ãƒˆã™ã¹ã¦ãƒ‘ã‚¹  
\- \[ \] E2Eãƒ†ã‚¹ãƒˆï¼ˆ5ãƒ—ãƒ©ãƒ³ï¼‰ã™ã¹ã¦ãƒ‘ã‚¹  
\- \[ \] ç¿»è¨³å“è³ªãƒã‚¤ãƒ†ã‚£ãƒ–ãƒã‚§ãƒƒã‚¯å®Œäº†

\*\*å®Œäº†å¾Œã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³\*\*:  
\`\`\`bash  
\# Gitã‚³ãƒŸãƒƒãƒˆ  
git add backend/app/data/faq\_presets.py  
git add backend/app/core/plan\_limits.py  
git add backend/app/services/auth\_service.py  
git add backend/app/services/faq\_service.py  
git add backend/tests/test\_multilingual\_faq\_presets.py  
git add backend/tests/test\_multilingual\_registration.py  
git add frontend/src/views/guest/LanguageSelect.vue  
git add frontend/src/views/admin/Dashboard.vue  
git add frontend/tests/e2e/multilingual-registration.spec.ts

git commit \-m "feat: å¤šè¨€èªFAQå¯¾å¿œï¼ˆç¹ä½“ä¸­å›½èªãƒ»ãƒ•ãƒ©ãƒ³ã‚¹èªãƒ»éŸ“å›½èªï¼‰

\- FAQ\_PRESETSã«3è¨€èª90ç¿»è¨³è¿½åŠ   
\- ãƒ—ãƒ©ãƒ³åˆ¥è¨€èªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å®Ÿè£…  
\- åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ä¸¦åˆ—ç”Ÿæˆï¼ˆæœ€å¤§5ä¸¦åˆ—ï¼‰  
\- E2Eãƒ†ã‚¹ãƒˆç”¨data-testidè¿½åŠ   
\- å…¨ãƒ†ã‚¹ãƒˆãƒ‘ã‚¹ç¢ºèªæ¸ˆã¿"

git push origin feature/multilingual-faq  
\`\`\`

\#\#\#\# 9.2.2 Phase 2: ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ

\*\*ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †\*\*:  
\`\`\`bash  
\# 1\. ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã«ãƒãƒ¼ã‚¸  
git checkout staging  
git merge feature/multilingual-faq

\# 2\. Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰  
docker-compose \-f docker-compose.staging.yml build

\# 3\. ãƒ‡ãƒ—ãƒ­ã‚¤  
docker-compose \-f docker-compose.staging.yml up \-d

\# 4\. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç¢ºèªï¼ˆå¤‰æ›´ãªã—ã®ç¢ºèªã®ã¿ï¼‰  
docker-compose \-f docker-compose.staging.yml exec backend alembic current  
docker-compose \-f docker-compose.staging.yml exec backend alembic upgrade head

\# 5\. å‹•ä½œç¢ºèª  
docker-compose \-f docker-compose.staging.yml logs \-f backend  
\`\`\`

\*\*å‹•ä½œç¢ºèªé …ç›®\*\*:  
\- \[ \] æ–°è¦ç™»éŒ²ï¼ˆå„ãƒ—ãƒ©ãƒ³1ä»¶ãšã¤ï¼‰  
\- \[ \] facilitiesãƒ†ãƒ¼ãƒ–ãƒ«ã®languagesã‚«ãƒ©ãƒ ç¢ºèª  
\- \[ \] ã‚²ã‚¹ãƒˆç”»é¢ã§è¨€èªé¸æŠ  
\- \[ \] å„è¨€èªã§ãƒãƒ£ãƒƒãƒˆå¿œç­”ç¢ºèª  
\- \[ \] FAQç®¡ç†ç”»é¢ã§5è¨€èªè¡¨ç¤ºç¢ºèª  
\- \[ \] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

\*\*ç¢ºèªã‚³ãƒãƒ³ãƒ‰\*\*:  
\`\`\`bash  
\# facilitiesãƒ†ãƒ¼ãƒ–ãƒ«ç¢ºèª  
docker-compose \-f docker-compose.staging.yml exec db psql \-U yadopera \-d yadopera\_db \-c "  
SELECT id, name, languages, language\_limit   
FROM facilities   
ORDER BY id DESC   
LIMIT 5;  
"

\# FAQç¿»è¨³æ•°ç¢ºèª  
docker-compose \-f docker-compose.staging.yml exec db psql \-U yadopera \-d yadopera\_db \-c "  
SELECT f.id, f.name, COUNT(ft.id) as translation\_count  
FROM facilities f  
LEFT JOIN faqs fq ON fq.facility\_id \= f.id  
LEFT JOIN faq\_translations ft ON ft.faq\_id \= fq.id  
GROUP BY f.id, f.name  
ORDER BY f.id DESC  
LIMIT 5;  
"  
\`\`\`

\#\#\#\# 9.2.3 Phase 3: æœ¬ç•ªç’°å¢ƒ

\*\*ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¿ã‚¤ãƒŸãƒ³ã‚°\*\*: ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã§48æ™‚é–“ä»¥ä¸Šå®‰å®šç¨¼åƒå¾Œ

\*\*ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †\*\*:  
\`\`\`bash  
\# 1\. æœ¬ç•ªç’°å¢ƒã«ãƒãƒ¼ã‚¸  
git checkout main  
git merge staging

\# 2\. ã‚¿ã‚°ä»˜ã‘  
git tag \-a v0.3.11 \-m "å¤šè¨€èªFAQå¯¾å¿œï¼ˆç¹ä½“ä¸­å›½èªãƒ»ãƒ•ãƒ©ãƒ³ã‚¹èªãƒ»éŸ“å›½èªï¼‰

ä¸»è¦æ©Ÿèƒ½:  
\- 5è¨€èªå¯¾å¿œï¼ˆæ—¥æœ¬èªãƒ»è‹±èªãƒ»ç¹ä½“ä¸­å›½èªãƒ»ãƒ•ãƒ©ãƒ³ã‚¹èªãƒ»éŸ“å›½èªï¼‰  
\- ãƒ—ãƒ©ãƒ³åˆ¥è¨€èªæ•°åˆ¶é™  
\- åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ä¸¦åˆ—ç”Ÿæˆ  
\- FAQ\_PRESETS 30å€‹Ã—5è¨€èª=150ç¿»è¨³

å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«:  
\- backend/app/data/faq\_presets.py  
\- backend/app/core/plan\_limits.py  
\- backend/app/services/auth\_service.py  
\- backend/app/services/faq\_service.py"

git push origin v0.3.11  
git push origin main

\# 3\. CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè¡Œï¼ˆè‡ªå‹•ï¼‰  
\# GitHub Actions / GitLab CI / Jenkinsç­‰ãŒè‡ªå‹•å®Ÿè¡Œ

\# 4\. ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ç¢ºèª  
curl https://api.yadopera.com/health

\# 5\. æœ¬ç•ªç’°å¢ƒå‹•ä½œç¢ºèª  
curl https://api.yadopera.com/api/facilities/{slug}  
\`\`\`

\*\*ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †\*\*:  
\`\`\`bash  
\# å•é¡Œç™ºç”Ÿæ™‚ã¯å³åº§ã«ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯  
git checkout main  
git revert HEAD  
git push origin main

\# ã¾ãŸã¯å‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ãƒªã‚»ãƒƒãƒˆ  
git reset \--hard v0.3.10  
git push origin main \--force

\# CI/CDãŒè‡ªå‹•çš„ã«å‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤  
\`\`\`

\#\#\# 9.3 CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­å®š

\*\*ãƒ•ã‚¡ã‚¤ãƒ«\*\*: \`.github/workflows/deploy.yml\`ï¼ˆGitHub Actionsä¾‹ï¼‰

\`\`\`yaml  
name: Deploy to Production

on:  
  push:  
    tags:  
      \- 'v\*'

jobs:  
  test:  
    runs-on: ubuntu-latest  
    steps:  
      \- uses: actions/checkout@v3  
        
      \- name: Run Backend Tests  
        run: |  
          docker-compose \-f docker-compose.ci.yml up \-d  
          docker-compose \-f docker-compose.ci.yml exec \-T backend pytest  
        
      \- name: Run Frontend Tests  
        run: |  
          docker-compose \-f docker-compose.ci.yml exec \-T frontend npm run test:e2e  
    
  deploy:  
    needs: test  
    runs-on: ubuntu-latest  
    steps:  
      \- uses: actions/checkout@v3  
        
      \- name: Deploy to Production  
        run: |  
          \# AWS/GCPã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒãƒ³ãƒ‰  
          \# ä¾‹: kubectl apply \-f k8s/  
          \# ä¾‹: eb deploy production  
\`\`\`

\#\#\# 9.4 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç§»è¡Œ

\*\*çµè«–\*\*: \*\*ç§»è¡Œä¸è¦\*\*

æ—¢å­˜ã®ã‚¹ã‚­ãƒ¼ãƒã§å¯¾å¿œå¯èƒ½ã€‚æ–°è¦ç™»éŒ²æ–½è¨­ã®ã¿å¤šè¨€èªFAQè‡ªå‹•è¨­å®šã€‚

\*\*æ—¢å­˜æ–½è¨­ã¸ã®å¯¾å¿œ\*\*:  
\- Phase 3ã§ã¯æ—¢å­˜æ–½è¨­ã¸ã®å¤šè¨€èªè¿½åŠ ã¯ã‚¹ã‚³ãƒ¼ãƒ—å¤–  
\- æ‰‹å‹•ã§FAQè¿½åŠ å¯èƒ½ï¼ˆç®¡ç†ç”»é¢çµŒç”±ï¼‰  
\- Expansion Phase Aã§æ—¢å­˜æ–½è¨­ã¸ã®ä¸€æ‹¬é©ç”¨ã‚’æ¤œè¨

\*\*æ—¢å­˜æ–½è¨­ã¸ã®å¤šè¨€èªè¿½åŠ æ‰‹é †ï¼ˆç®¡ç†ç”»é¢ï¼‰\*\*:  
1\. FAQç®¡ç†ç”»é¢ã§ã€ŒFAQè¿½åŠ ã€ã‚’ã‚¯ãƒªãƒƒã‚¯  
2\. è¨€èªã‚’é¸æŠï¼ˆãƒ—ãƒ©ãƒ³ã®ç¯„å›²å†…ï¼‰  
3\. è³ªå•ãƒ»å›ç­”ã‚’å…¥åŠ›  
4\. ä¿å­˜ï¼ˆåŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«è‡ªå‹•ç”Ÿæˆï¼‰

\#\#\# 9.5 ç›£è¦–ã¨ã‚¢ãƒ©ãƒ¼ãƒˆ

\#\#\#\# 9.5.1 ç›£è¦–é …ç›®

\*\*ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°\*\*:  
\`\`\`python  
\# æ–°è¦ç™»éŒ²æ™‚ã®ãƒ­ã‚°å‡ºåŠ›  
logger.info(  
    f"æ–°è¦æ–½è¨­ç™»éŒ²: {facility.name}, "  
    f"ãƒ—ãƒ©ãƒ³: {subscription\_plan}, "  
    f"è¨€èª: {facility.languages}, "  
    f"è¨€èªæ•°ä¸Šé™: {facility.language\_limit}"  
)  
logger.info(  
    f"FAQè‡ªå‹•è¨­å®šé–‹å§‹: æ–½è¨­ID={facility.id}, "  
    f"ãƒ—ãƒªã‚»ãƒƒãƒˆæ•°={len(filtered\_presets)}"  
)  
logger.info(  
    f"FAQè‡ªå‹•è¨­å®šå®Œäº†: æ–½è¨­ID={facility.id}, "  
    f"FAQæ•°={len(filtered\_presets)}, "  
    f"ç¿»è¨³æ•°={total\_translations}, "  
    f"å‡¦ç†æ™‚é–“={elapsed:.2f}ç§’"  
)  
\`\`\`

\*\*ãƒ¡ãƒˆãƒªã‚¯ã‚¹\*\*:  
\- æ–°è¦ç™»éŒ²æ•°ï¼ˆãƒ—ãƒ©ãƒ³åˆ¥ï¼‰  
\- FAQè‡ªå‹•è¨­å®šæˆåŠŸç‡  
\- åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆæ™‚é–“ï¼ˆå¹³å‡ãƒ»æœ€å¤§ï¼‰  
\- OpenAI APIå‘¼ã³å‡ºã—å›æ•°ãƒ»ã‚³ã‚¹ãƒˆ  
\- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªå®Ÿè¡Œæ™‚é–“

\#\#\#\# 9.5.2 ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

\*\*Prometheus \+ Grafanaè¨­å®šä¾‹\*\*:

\`\`\`yaml  
\# prometheus/alerts.yml  
groups:  
  \- name: yadopera\_multilingual  
    interval: 1m  
    rules:  
      \- alert: FAQSetupFailureRate  
        expr: rate(faq\_setup\_failures\_total\[5m\]) \> 0.05  
        for: 5m  
        labels:  
          severity: warning  
        annotations:  
          summary: "FAQè‡ªå‹•è¨­å®šã®å¤±æ•—ç‡ãŒé«˜ã„"  
          description: "{{ $value }}% ã®ç™»éŒ²ã§FAQè¨­å®šã«å¤±æ•—"  
        
      \- alert: EmbeddingGenerationSlow  
        expr: histogram\_quantile(0.95, embedding\_generation\_duration\_seconds) \> 1  
        for: 5m  
        labels:  
          severity: warning  
        annotations:  
          summary: "åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”ŸæˆãŒé…ã„"  
          description: "95%ileã§ {{ $value }}ç§’/ç¿»è¨³"  
        
      \- alert: OpenAIAPIError  
        expr: rate(openai\_api\_errors\_total\[5m\]) \> 0.01  
        for: 5m  
        labels:  
          severity: critical  
        annotations:  
          summary: "OpenAI APIã‚¨ãƒ©ãƒ¼ç‡ãŒé«˜ã„"  
          description: "{{ $value }}% ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã‚¨ãƒ©ãƒ¼"  
\`\`\`

\*\*é€šçŸ¥å…ˆ\*\*:  
\- Slack: \#yadopera-alerts  
\- Email: dev-team@yadopera.com  
\- PagerDutyï¼ˆCriticalï¼‰

\#\#\# 9.6 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

\*\*æ›´æ–°å¯¾è±¡\*\*:  
\- \[ \] README.md: å¯¾å¿œè¨€èªã‚’5è¨€èªã«æ›´æ–°  
\- \[ \] APIä»•æ§˜æ›¸: å¤šè¨€èªFAQç™»éŒ²ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¿½è¨˜  
\- \[ \] ç®¡ç†è€…ãƒãƒ‹ãƒ¥ã‚¢ãƒ«: ãƒ—ãƒ©ãƒ³åˆ¥è¨€èªå¯¾å¿œè¡¨è¿½åŠ   
\- \[ \] ã‚²ã‚¹ãƒˆå‘ã‘ãƒ˜ãƒ«ãƒ—: è¨€èªé¸æŠæ–¹æ³•èª¬æ˜  
\- \[ \] é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰: FAQ\_PRESETSç·¨é›†æ–¹æ³•

\*\*README.mdæ›´æ–°ä¾‹\*\*:  
\`\`\`markdown  
\#\# å¯¾å¿œè¨€èª

YadOPERAã¯5è¨€èªã«å¯¾å¿œã—ã¦ã„ã¾ã™ï¼š

\- ğŸ‡¯ğŸ‡µ æ—¥æœ¬èªï¼ˆJapaneseï¼‰  
\- ğŸ‡¬ğŸ‡§ è‹±èªï¼ˆEnglishï¼‰  
\- ğŸ‡¹ğŸ‡¼ ç¹ä½“ä¸­å›½èªï¼ˆTraditional Chineseï¼‰  
\- ğŸ‡«ğŸ‡· ãƒ•ãƒ©ãƒ³ã‚¹èªï¼ˆFrenchï¼‰  
\- ğŸ‡°ğŸ‡· éŸ“å›½èªï¼ˆKoreanï¼‰

ãƒ—ãƒ©ãƒ³ã«ã‚ˆã£ã¦åˆ©ç”¨å¯èƒ½ãªè¨€èªæ•°ãŒç•°ãªã‚Šã¾ã™ã€‚è©³ç´°ã¯\[æ–™é‡‘ãƒ—ãƒ©ãƒ³\](docs/pricing.md)ã‚’ã”è¦§ãã ã•ã„ã€‚  
\`\`\`

\---

\#\# 10\. ãƒªã‚¹ã‚¯ã¨å¯¾ç­–

\#\#\# 10.1 ç¿»è¨³å“è³ªãƒªã‚¹ã‚¯

\*\*ãƒªã‚¹ã‚¯\*\*: æ©Ÿæ¢°ç¿»è¨³ã®å“è³ªä¸è¶³ã€æ–‡åŒ–çš„ä¸é©åˆ‡è¡¨ç¾

\*\*å¯¾ç­–\*\*:  
\- DeepL Proã‚’ä½¿ç”¨ï¼ˆGoogleç¿»è¨³ã‚ˆã‚Šé«˜å“è³ªï¼‰  
\- ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ã«ã‚ˆã‚‹ãƒ¬ãƒ“ãƒ¥ãƒ¼å¿…é ˆï¼ˆCEFR B2ãƒ¬ãƒ™ãƒ«ï¼‰  
\- å®¿æ³Šæ¥­ç•Œç”¨èªè¾æ›¸ä½œæˆï¼ˆãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³/ã‚¢ã‚¦ãƒˆç­‰ï¼‰  
\- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ©Ÿèƒ½è¿½åŠ ï¼ˆExpansion Phase Aï¼‰

\*\*å½±éŸ¿åº¦\*\*: ä¸­    
\*\*ç™ºç”Ÿç¢ºç‡\*\*: ä¸­    
\*\*å¯¾ç­–å„ªå…ˆåº¦\*\*: é«˜

\#\#\# 10.2 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–ãƒªã‚¹ã‚¯

\*\*ãƒªã‚¹ã‚¯\*\*: 150ç¿»è¨³ã®åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆã§ç™»éŒ²æ™‚é–“ãŒé•·ããªã‚‹

\*\*å¯¾ç­–\*\*:  
\- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯åŒ–ï¼ˆæ—¢ã«å®Ÿè£…æ¸ˆã¿ï¼‰  
\- OpenAI APIä¸¦åˆ—å‡¦ç†ï¼ˆæœ€å¤§5ä¸¦åˆ—ï¼‰  
\- ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šï¼ˆ1ç¿»è¨³ã‚ãŸã‚Š5ç§’ï¼‰  
\- å¤±æ•—æ™‚ã®å†è©¦è¡Œãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæœ€å¤§3å›ï¼‰

\*\*å½±éŸ¿åº¦\*\*: ä½    
\*\*ç™ºç”Ÿç¢ºç‡\*\*: ä½    
\*\*å¯¾ç­–å„ªå…ˆåº¦\*\*: ä¸­

\#\#\# 10.3 è¨€èªæ•°åˆ¶é™ãƒã‚°ãƒªã‚¹ã‚¯

\*\*ãƒªã‚¹ã‚¯\*\*: ãƒ—ãƒ©ãƒ³åˆ¥ã®è¨€èªæ•°åˆ¶é™ãŒæ­£ã—ãå‹•ä½œã—ãªã„

\*\*å¯¾ç­–\*\*:  
\- å˜ä½“ãƒ†ã‚¹ãƒˆã§å…¨ãƒ—ãƒ©ãƒ³ç¶²ç¾…  
\- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã®äºŒé‡ãƒã‚§ãƒƒã‚¯  
\- ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã§å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆ  
\- ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †ã®äº‹å‰ç¢ºèª

\*\*å½±éŸ¿åº¦\*\*: é«˜    
\*\*ç™ºç”Ÿç¢ºç‡\*\*: ä½    
\*\*å¯¾ç­–å„ªå…ˆåº¦\*\*: é«˜

\#\#\# 10.4 ã‚³ã‚¹ãƒˆå¢—åŠ ãƒªã‚¹ã‚¯

\*\*ãƒªã‚¹ã‚¯\*\*: OpenAI Embeddings APIå‘¼ã³å‡ºã—å¢—åŠ ã§ã‚³ã‚¹ãƒˆå¢—

\*\*è©¦ç®—\*\*:  
\- ç¾çŠ¶: 2è¨€èª Ã— 30FAQ \= 60ç¿»è¨³/ç™»éŒ²  
\- å¤‰æ›´å¾Œï¼ˆPremiumï¼‰: 5è¨€èª Ã— 30FAQ \= 150ç¿»è¨³/ç™»éŒ²  
\- ã‚³ã‚¹ãƒˆå¢—: ç´„2.5å€

\*\*å¯¾ç­–\*\*:  
\- æœˆæ¬¡ã‚³ã‚¹ãƒˆãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°  
\- ãƒ—ãƒ©ãƒ³åˆ¥ã®APIåˆ©ç”¨åˆ¶é™  
\- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹ï¼ˆåŒä¸€è³ªå•ã®åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«å†åˆ©ç”¨ï¼‰  
\- äºˆç®—ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šï¼ˆæœˆé¡$100è¶…éæ™‚ï¼‰

\*\*å½±éŸ¿åº¦\*\*: ä½ï¼ˆ1ç™»éŒ²ã‚ãŸã‚ŠÂ¥0.1ä»¥ä¸‹ï¼‰    
\*\*ç™ºç”Ÿç¢ºç‡\*\*: é«˜ï¼ˆç¢ºå®Ÿã«å¢—åŠ ï¼‰    
\*\*å¯¾ç­–å„ªå…ˆåº¦\*\*: ä½

\#\#\# 10.5 æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã¸ã®å½±éŸ¿ãƒªã‚¹ã‚¯

\*\*ãƒªã‚¹ã‚¯\*\*: æ—¢å­˜æ–½è¨­ã®FAQãƒ‡ãƒ¼ã‚¿ã«å½±éŸ¿

\*\*å¯¾ç­–\*\*:  
\- æ–°è¦ç™»éŒ²ã®ã¿å¤šè¨€èªå¯¾å¿œ  
\- æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã¯ä¸€åˆ‡å¤‰æ›´ã—ãªã„  
\- ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¸è¦ã®ãŸã‚å½±éŸ¿ã‚¼ãƒ­  
\- ãƒ‡ãƒ—ãƒ­ã‚¤å‰å¾Œã§ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ç¢ºèª

\*\*å½±éŸ¿åº¦\*\*: ãªã—    
\*\*ç™ºç”Ÿç¢ºç‡\*\*: ãªã—    
\*\*å¯¾ç­–å„ªå…ˆåº¦\*\*: ãªã—

\#\#\# 10.6 ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒªã‚¹ã‚¯

\*\*ãƒªã‚¹ã‚¯\*\*: å¤šè¨€èªè¡¨ç¤ºã§æ–‡å­—åŒ–ã‘ã‚„ãƒ•ã‚©ãƒ³ãƒˆå•é¡Œ

\*\*å¯¾ç­–\*\*:  
\- Webãƒ•ã‚©ãƒ³ãƒˆä½¿ç”¨ï¼ˆNoto Sans CJKç­‰ï¼‰  
\- UTF-8ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç¢ºèª  
\- ä¸»è¦ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®è¡¨ç¤ºç¢ºèªï¼ˆChrome, Safari, Firefox, Edgeï¼‰  
\- CSSã®font-familyã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æŒ‡å®š

\*\*å½±éŸ¿åº¦\*\*: ä½    
\*\*ç™ºç”Ÿç¢ºç‡\*\*: ä½    
\*\*å¯¾ç­–å„ªå…ˆåº¦\*\*: ä½

\---

\#\# 11\. ä»Šå¾Œã®æ‹¡å¼µè¨ˆç”»

\#\#\# 11.1 Phase 4: FAQæ•°æ‹¡å¼µ

\*\*ç›®æ¨™\*\*: FAQ\_PRESETSã‚’30å€‹â†’100å€‹ã«æ‹¡å¼µ

\*\*å¯¾è±¡ã‚«ãƒ†ã‚´ãƒª\*\*:  
\- Paymentï¼ˆæ”¯æ‰•ã„ãƒ»æ–™é‡‘ï¼‰: 15FAQ  
\- Amenitiesï¼ˆã‚¢ãƒ¡ãƒ‹ãƒ†ã‚£ï¼‰: 10FAQ  
\- Policyï¼ˆãƒãƒªã‚·ãƒ¼ãƒ»è¦ç´„ï¼‰: 15FAQ  
\- Localï¼ˆå‘¨è¾ºæƒ…å ±ï¼‰: 20FAQ  
\- Emergencyï¼ˆç·Šæ€¥æ™‚å¯¾å¿œï¼‰: 10FAQ

\*\*å®Ÿè£…æ™‚æœŸ\*\*: Expansion Phase Aï¼ˆv0.4.0ï¼‰

\#\#\# 11.2 Phase 5: UIãƒ†ã‚­ã‚¹ãƒˆå¤šè¨€èªåŒ–

\*\*ç›®æ¨™\*\*: ç®¡ç†ç”»é¢ãƒ»ã‚²ã‚¹ãƒˆç”»é¢ã®UIãƒ†ã‚­ã‚¹ãƒˆã‚’5è¨€èªå¯¾å¿œ

\*\*å¯¾è±¡\*\*:  
\- ãƒœã‚¿ãƒ³ãƒ©ãƒ™ãƒ«  
\- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸  
\- ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸  
\- ãƒ˜ãƒ«ãƒ—ãƒ†ã‚­ã‚¹ãƒˆ

\*\*æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯\*\*:  
\- i18nï¼ˆVue I18nï¼‰  
\- ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ï¼ˆJSON/YAMLï¼‰

\*\*å®Ÿè£…æ™‚æœŸ\*\*: Expansion Phase Aï¼ˆv0.4.0ï¼‰

\#\#\# 11.3 Phase 6: è¨€èªè‡ªå‹•æ¤œå‡º

\*\*ç›®æ¨™\*\*: ã‚²ã‚¹ãƒˆã®åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«è¨€èªã‚’è‡ªå‹•æ¤œå‡º

\*\*æ¤œå‡ºæ–¹æ³•\*\*:  
\- ãƒ–ãƒ©ã‚¦ã‚¶è¨€èªè¨­å®šï¼ˆnavigator.languageï¼‰  
\- IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ã‚‰å›½åˆ¤å®š  
\- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè§£æ

\*\*å®Ÿè£…æ™‚æœŸ\*\*: Expansion Phase Bï¼ˆv0.5.0ï¼‰

\#\#\# 11.4 Phase 7: è¿½åŠ è¨€èªå¯¾å¿œ

\*\*å€™è£œè¨€èª\*\*:  
\- ã‚¹ãƒšã‚¤ãƒ³èªï¼ˆesï¼‰: ã‚¹ãƒšã‚¤ãƒ³ãƒ»ä¸­å—ç±³  
\- ãƒ‰ã‚¤ãƒ„èªï¼ˆdeï¼‰: ãƒ‰ã‚¤ãƒ„ãƒ»ã‚ªãƒ¼ã‚¹ãƒˆãƒªã‚¢ãƒ»ã‚¹ã‚¤ã‚¹  
\- ã‚¿ã‚¤èªï¼ˆthï¼‰: ã‚¿ã‚¤  
\- ãƒ™ãƒˆãƒŠãƒ èªï¼ˆviï¼‰: ãƒ™ãƒˆãƒŠãƒ 

\*\*å®Ÿè£…æ™‚æœŸ\*\*: Expansion Phase Cï¼ˆv0.6.0ï¼‰

\---

\#\# 12\. ã¾ã¨ã‚

\#\#\# 12.1 å®Ÿè£…ã‚µãƒãƒªãƒ¼

\*\*è¿½åŠ è¨€èª\*\*: ç¹ä½“ä¸­å›½èªï¼ˆzh-TWï¼‰ã€ãƒ•ãƒ©ãƒ³ã‚¹èªï¼ˆfrï¼‰ã€éŸ“å›½èªï¼ˆkoï¼‰    
\*\*è¿½åŠ ç¿»è¨³æ•°\*\*: 30FAQ Ã— 3è¨€èª \= \*\*90ç¿»è¨³\*\*    
\*\*ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«æ•°\*\*: 4ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆbackendï¼‰    
\*\*æ–°è¦ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«æ•°\*\*: 3ãƒ•ã‚¡ã‚¤ãƒ«    
\*\*ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä¿®æ­£\*\*: 2ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆdata-testidè¿½åŠ ï¼‰    
\*\*ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´\*\*: ãªã—    
\*\*ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³\*\*: ä¸è¦

\#\#\# 12.2 å®Ÿè£…åŠ¹æœ

\*\*å¯¾å¿œè¨€èª\*\*: 2è¨€èª â†’ \*\*5è¨€èª\*\*ï¼ˆ2.5å€ï¼‰    
\*\*å¯¾å¿œå¸‚å ´\*\*: è‹±èªåœã®ã¿ â†’ \*\*ã‚¢ã‚¸ã‚¢ãƒ»æ¬§å·åœã«ã‚‚æ‹¡å¤§\*\*    
\*\*Premiumãƒ—ãƒ©ãƒ³ä¾¡å€¤å‘ä¸Š\*\*: å…¨è¨€èªå¯¾å¿œã§å·®åˆ¥åŒ–    
\*\*å›½éš›å±•é–‹æº–å‚™\*\*: å¤šè¨€èªåŸºç›¤ç¢ºç«‹

\#\#\# 12.3 æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ 

\*\*å³åº§ã«å®Ÿæ–½ï¼ˆCritical: 2ä»¶ï¼‰\*\*:  
1\. \[ \] ã‚»ã‚¯ã‚·ãƒ§ãƒ³8.1.1ã€8.2.1ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡è¿½åŠ ï¼ˆ\`from sqlalchemy import select\`ï¼‰  
2\. \[ \] ã‚»ã‚¯ã‚·ãƒ§ãƒ³1.3ã®FAQä»¶æ•°ã®æ³¨é‡ˆè¿½åŠ ï¼ˆPhase 3å®Ÿè£…æ¬„è¿½åŠ æ¸ˆã¿ï¼‰

\*\*å®Ÿè£…å‰ã«ç¢ºèªï¼ˆHigh: 3ä»¶ï¼‰\*\*:  
3\. \[ \] facilitiesãƒ†ãƒ¼ãƒ–ãƒ«ã®languagesã‚«ãƒ©ãƒ å‹ç¢ºèªï¼ˆTEXT\[\]ï¼‰  
4\. \[ \] æ—¢å­˜ã®filter\_faq\_presets\_by\_plan()ã®å®Ÿè£…ç¢ºèª  
5\. \[ \] ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã®å®Ÿè£…æ–¹æ³•ç¢ºèªï¼ˆFastAPI BackgroundTasksï¼‰

\*\*å®Ÿè£…ä¸­ã«è£œå®Œï¼ˆMedium: 3ä»¶ï¼‰\*\*:  
6\. \[ \] ä¸¦åˆ—å‡¦ç†ã®å…·ä½“çš„å®Ÿè£…ï¼ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³5.5.1ã«è¿½åŠ æ¸ˆã¿ï¼‰  
7\. \[ \] data-testidå±æ€§ã®å®Ÿè£…ï¼ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³6.3ã«è¿½åŠ æ¸ˆã¿ï¼‰  
8\. \[ \] CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­å®šï¼ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³9.3ã«è¿½åŠ æ¸ˆã¿ï¼‰

\*\*çŸ­æœŸï¼ˆ1é€±é–“ä»¥å†…ï¼‰\*\*:  
9\. \[ \] FAQ\_PRESETSã«90ç¿»è¨³è¿½åŠ ï¼ˆ1-2æ—¥ï¼‰  
10\. \[ \] ãƒ—ãƒ©ãƒ³åˆ¥è¨€èªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å®Ÿè£…ï¼ˆ0.5æ—¥ï¼‰  
11\. \[ \] å˜ä½“ãƒ†ã‚¹ãƒˆä½œæˆãƒ»å®Ÿè¡Œï¼ˆ0.5æ—¥ï¼‰  
12\. \[ \] ç¿»è¨³å“è³ªãƒã‚¤ãƒ†ã‚£ãƒ–ãƒã‚§ãƒƒã‚¯ï¼ˆ3-5æ—¥ï¼‰  
13\. \[ \] çµ±åˆãƒ†ã‚¹ãƒˆãƒ»E2Eãƒ†ã‚¹ãƒˆï¼ˆ1æ—¥ï¼‰  
14\. \[ \] ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆ0.5æ—¥ï¼‰

\*\*ä¸­æœŸï¼ˆ2é€±é–“ä»¥å†…ï¼‰\*\*:  
15\. \[ \] æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆ0.5æ—¥ï¼‰  
16\. \[ \] ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ»èª¿æ•´ï¼ˆç¶™ç¶šï¼‰  
17\. \[ \] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ï¼ˆ1æ—¥ï¼‰

\#\#\# 12.4 æˆåŠŸæŒ‡æ¨™ï¼ˆKPIï¼‰

\*\*æŠ€è¡“æŒ‡æ¨™\*\*:  
\- \[ \] å…¨ãƒ†ã‚¹ãƒˆãƒ‘ã‚¹ç‡: 100%  
\- \[ \] åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆæ™‚é–“: \<30ç§’/Premiumç™»éŒ²  
\- \[ \] FAQè‡ªå‹•è¨­å®šæˆåŠŸç‡: \>99%  
\- \[ \] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªæ™‚é–“: \<50ms

\*\*ãƒ“ã‚¸ãƒã‚¹æŒ‡æ¨™\*\*:  
\- \[ \] å¤šè¨€èªå¯¾å¿œæ–½è¨­ã®å‰²åˆ: Phase 3çµ‚äº†æ™‚ç‚¹ã§æ–°è¦ç™»éŒ²ã®100%  
\- \[ \] ç¹ä½“ä¸­å›½èªãƒ»ãƒ•ãƒ©ãƒ³ã‚¹èªãƒ»éŸ“å›½èªã‚²ã‚¹ãƒˆã®å‰²åˆå¢—åŠ   
\- \[ \] Premiumãƒ—ãƒ©ãƒ³ã¸ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ç‡å‘ä¸Š

\---

\#\# ä»˜éŒ²

\#\#\# ä»˜éŒ²A: FAQ\_PRESETSç¿»è¨³ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

\`\`\`python  
\# ç¿»è¨³ä½œæ¥­ç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ  
FAQ\_TRANSLATION\_TEMPLATE \= {  
    "category": "basic",  
    "intent\_key": "basic\_example",  
    "priority": 5,  
    "translations": \[  
        {  
            "language": "ja",  
            "question": "ã€æ—¥æœ¬èªã®è³ªå•ã€‘",  
            "answer": "ã€æ—¥æœ¬èªã®å›ç­”ã€‘"  
        },  
        {  
            "language": "en",  
            "question": "ã€English questionã€‘",  
            "answer": "ã€English answerã€‘"  
        },  
        {  
            "language": "zh-TW",  
            "question": "ã€ç¹é«”ä¸­æ–‡å•é¡Œã€‘",  
            "answer": "ã€ç¹é«”ä¸­æ–‡å›ç­”ã€‘"  
        },  
        {  
            "language": "fr",  
            "question": "ã€Question en franÃ§aisã€‘",  
            "answer": "ã€RÃ©ponse en franÃ§aisã€‘"  
        },  
        {  
            "language": "ko",  
            "question": "ã€í•œêµ­ì–´ ì§ˆë¬¸ã€‘",  
            "answer": "ã€í•œêµ­ì–´ ë‹µë³€ã€‘"  
        }  
    \]  
}  
\`\`\`

\#\#\# ä»˜éŒ²B: å®¿æ³Šæ¥­ç•Œç”¨èªå¯¾è¨³è¡¨

| æ—¥æœ¬èª | English | ç¹é«”ä¸­æ–‡ | FranÃ§ais | í•œêµ­ì–´ |  
|--------|---------|----------|----------|--------|  
| ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ | Check-in | å…¥ä½ç™»è¨˜ | Enregistrement | ì²´í¬ì¸ |  
| ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ | Check-out | é€€æˆ¿ | DÃ©part | ì²´í¬ì•„ì›ƒ |  
| é–€é™ | Curfew | é–€ç¦æ™‚é–“ | Couvre-feu | í†µê¸ˆ ì‹œê°„ |  
| å…±ç”¨ã‚¹ãƒšãƒ¼ã‚¹ | Common area | å…¬å…±å€åŸŸ | Espace commun | ê³µìš© ê³µê°„ |  
| ã‚¢ãƒ¡ãƒ‹ãƒ†ã‚£ | Amenities | è¨­æ–½ | Ã‰quipements | í¸ì˜ ì‹œì„¤ |  
| ãƒ‡ãƒã‚¸ãƒƒãƒˆ | Deposit | æŠ¼é‡‘ | DÃ©pÃ´t | ë³´ì¦ê¸ˆ |  
| ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒãƒªã‚·ãƒ¼ | Cancellation policy | å–æ¶ˆæ”¿ç­– | Politique d'annulation | ì·¨ì†Œ ì •ì±… |  
| Wi-Fi | Wi-Fi | Wi-Fi | Wi-Fi | Wi-Fi |  
| éµ | Key | é‘°åŒ™ | ClÃ© | ì—´ì‡  |  
| ã‚¿ã‚ªãƒ« | Towel | æ¯›å·¾ | Serviette | ìˆ˜ê±´ |  
| ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼ | Shampoo | æ´—é«®ç²¾ | Shampooing | ìƒ´í‘¸ |  
| ãƒ‰ãƒ©ã‚¤ãƒ¤ãƒ¼ | Hair dryer | å¹é¢¨æ©Ÿ | SÃ¨che-cheveux | ë“œë¼ì´ì–´ |  
| æœé£Ÿ | Breakfast | æ—©é¤ | Petit-dÃ©jeuner | ì¡°ì‹ |  
| é§è»Šå ´ | Parking | åœè»Šå ´ | Parking | ì£¼ì°¨ì¥ |  
| å–«ç…™ | Smoking | å¸ç…™ | Fumeur | í¡ì—° |  
| ç¦ç…™ | Non-smoking | ç¦ç…™ | Non-fumeur | ê¸ˆì—° |

\#\#\# ä»˜éŒ²C: ç¿»è¨³å“è³ªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

\*\*ç¹ä½“ä¸­å›½èªï¼ˆzh-TWï¼‰\*\*:  
\- \[ \] ç°¡ä½“å­—ãŒæ··åœ¨ã—ã¦ã„ãªã„  
\- \[ \] å°æ¹¾ã®æ…£ç”¨è¡¨ç¾ã‚’ä½¿ç”¨  
\- \[ \] ã€Œæ‚¨ã€ï¼ˆæ•¬èªï¼‰ã‚’é©åˆ‡ã«ä½¿ç”¨  
\- \[ \] æ•°å­—è¡¨è¨˜ãŒæ­£ã—ã„ï¼ˆä¾‹: 10é»ã€ä¸æ˜¯10ç‚¹ï¼‰  
\- \[ \] ã€Œçš„ã€ã®ä½¿ã„éãã«æ³¨æ„

\*\*ãƒ•ãƒ©ãƒ³ã‚¹èªï¼ˆfrï¼‰\*\*:  
\- \[ \] ã€Œvousã€ï¼ˆæ•¬èªï¼‰ã‚’ä½¿ç”¨  
\- \[ \] ã‚¢ã‚¯ã‚»ãƒ³ãƒˆè¨˜å·ãŒæ­£ã—ã„  
\- \[ \] ç”·æ€§åè©ãƒ»å¥³æ€§åè©ãŒæ­£ã—ã„  
\- \[ \] å† è©ï¼ˆle, la, les, un, uneï¼‰ãŒé©åˆ‡  
\- \[ \] æ™‚åˆ¶ãŒä¸€è²«ã—ã¦ã„ã‚‹

\*\*éŸ“å›½èªï¼ˆkoï¼‰\*\*:  
\- \[ \] ì¡´ëŒ“ë§ï¼ˆæ•¬èªï¼‰ã‚’ä½¿ç”¨  
\- \[ \] æ–‡æœ«ãŒã€Œ\~ìš”ã€ã€Œ\~ìŠµë‹ˆë‹¤ã€ã§çµ‚ã‚ã‚‹  
\- \[ \] æ¼¢å­—èªã¨å›ºæœ‰èªã®ãƒãƒ©ãƒ³ã‚¹  
\- \[ \] ã‚¹ãƒšãƒ¼ã‚¹ãŒé©åˆ‡ï¼ˆä¾‹: ì²´í¬ ì¸ â†’ ì²´í¬ì¸ï¼‰  
\- \[ \] åŠ©è©ã®ä½¿ã„æ–¹ãŒæ­£ã—ã„

\#\#\# ä»˜éŒ²D: ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

\*\*å•é¡Œ1\*\*: FAQè‡ªå‹•è¨­å®šãŒå¤±æ•—ã™ã‚‹

\*\*åŸå› \*\*:  
\- OpenAI APIã‚­ãƒ¼æœªè¨­å®š  
\- åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ  
\- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼  
\- ãƒ—ãƒ©ãƒ³åã®æ­£è¦åŒ–ã‚¨ãƒ©ãƒ¼

\*\*å¯¾å‡¦\*\*:  
\`\`\`bash  
\# ãƒ­ã‚°ç¢ºèª  
docker-compose logs backend | grep "FAQè‡ªå‹•è¨­å®š"

\# ç’°å¢ƒå¤‰æ•°ç¢ºèª  
docker-compose exec backend env | grep OPENAI

\# æ‰‹å‹•ã§FAQç™»éŒ²ãƒ†ã‚¹ãƒˆ  
docker-compose exec backend python scripts/test\_faq\_creation.py

\# ãƒ—ãƒ©ãƒ³åæ­£è¦åŒ–ã®ç¢ºèª  
docker-compose exec backend python \-c "  
from app.core.plan\_limits import convert\_subscription\_plan\_to\_plan\_type  
print(convert\_subscription\_plan\_to\_plan\_type('free'))  \# \=\> 'Free'  
print(convert\_subscription\_plan\_to\_plan\_type('PREMIUM'))  \# \=\> 'Premium'  
"  
\`\`\`

\*\*å•é¡Œ2\*\*: è¨€èªé¸æŠç”»é¢ã§5è¨€èªè¡¨ç¤ºã•ã‚Œãªã„

\*\*åŸå› \*\*:  
\- \`facility.languages\`ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ãªã„  
\- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥  
\- API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¨ãƒ©ãƒ¼  
\- PLAN\_LANGUAGE\_PRIORITYã®è¨­å®šãƒŸã‚¹

\*\*å¯¾å‡¦\*\*:  
\`\`\`bash  
\# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèª  
docker-compose exec db psql \-U yadopera \-d yadopera\_db \-c "  
SELECT id, name, languages, language\_limit   
FROM facilities   
WHERE id \= 1;  
"

\# ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢  
\# ã¾ãŸã¯ã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ã§ç¢ºèª

\# API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç¢ºèª  
curl http://localhost:8000/api/facilities/test-facility | jq '.languages'

\# PLAN\_LANGUAGE\_PRIORITYã®ç¢ºèª  
docker-compose exec backend python \-c "  
from app.core.plan\_limits import PLAN\_LANGUAGE\_PRIORITY  
import json  
print(json.dumps(PLAN\_LANGUAGE\_PRIORITY, indent=2))  
"  
\`\`\`

\*\*å•é¡Œ3\*\*: åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”ŸæˆãŒé…ã„

\*\*åŸå› \*\*:  
\- OpenAI API ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆ  
\- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é…å»¶  
\- ä¸¦åˆ—å‡¦ç†æ•°ä¸è¶³  
\- ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šãŒçŸ­ã™ãã‚‹

\*\*å¯¾å‡¦\*\*:  
\`\`\`python  
\# plan\_limits.pyã§ä¸¦åˆ—å‡¦ç†æ•°ã‚’èª¿æ•´  
EMBEDDING\_CONCURRENCY \= 10  \# 5 â†’ 10ã«å¢—ã‚„ã™

\# ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯è¿½åŠ ï¼ˆtenacityä½¿ç”¨ï¼‰  
from tenacity import retry, stop\_after\_attempt, wait\_exponential

@retry(  
    stop=stop\_after\_attempt(3),  
    wait=wait\_exponential(multiplier=1, min=2, max=10)  
)  
async def generate\_embedding(text: str):  
    """åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆï¼ˆãƒªãƒˆãƒ©ã‚¤ä»˜ãï¼‰"""  
    try:  
        response \= await openai\_client.embeddings.create(  
            model="text-embedding-3-small",  
            input=text,  
            timeout=30.0  \# ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ30ç§’  
        )  
        return response.data\[0\].embedding  
    except Exception as e:  
        logger.error(f"åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆã‚¨ãƒ©ãƒ¼: {e}")  
        raise  
\`\`\`

\*\*å•é¡Œ4\*\*: ãƒ†ã‚¹ãƒˆã§\`select\`ãŒã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ã‚¨ãƒ©ãƒ¼

\*\*åŸå› \*\*:  
\- SQLAlchemyã®\`select\`ãŒã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„

\*\*å¯¾å‡¦\*\*:  
\`\`\`python  
\# ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å…ˆé ­ã«è¿½åŠ   
from sqlalchemy import select

\# ä½¿ç”¨ä¾‹  
result \= await db\_session.execute(  
    select(FAQTranslation)  
    .join(FAQ)  
    .filter(FAQ.facility\_id \== facility\_id)  
)  
translations \= result.scalars().all()  
\`\`\`

\*\*å•é¡Œ5\*\*: E2Eãƒ†ã‚¹ãƒˆã§è¦ç´ ãŒè¦‹ã¤ã‹ã‚‰ãªã„

\*\*åŸå› \*\*:  
\- data-testidå±æ€§ãŒå®Ÿè£…ã•ã‚Œã¦ã„ãªã„  
\- è¦ç´ ã®èª­ã¿è¾¼ã¿ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®å•é¡Œ

\*\*å¯¾å‡¦\*\*:  
\`\`\`typescript  
// data-testidå±æ€§ã‚’è¿½åŠ   
\<div data-testid="language-select"\>...\</div\>

// å¾…æ©Ÿæ™‚é–“ã‚’å¢—ã‚„ã™  
await page.waitForSelector('\[data-testid="language-select"\]', {  
  timeout: 10000  // 10ç§’  
})

// ã¾ãŸã¯ã€ã‚ˆã‚Šå…·ä½“çš„ãªã‚»ãƒ¬ã‚¯ã‚¿ã‚’ä½¿ç”¨  
await page.waitForSelector('.language-select \>\> text=ç¹é«”ä¸­æ–‡')  
\`\`\`

\#\#\# ä»˜éŒ²E: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰

\#\#\#\# E.1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–

\*\*pgvectorã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°\*\*:  
\`\`\`sql  
\-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å†æ§‹ç¯‰ï¼ˆãƒ‡ãƒ¼ã‚¿é‡å¢—åŠ æ™‚ï¼‰  
REINDEX INDEX idx\_faq\_translations\_embedding;

\-- çµ±è¨ˆæƒ…å ±æ›´æ–°  
ANALYZE faq\_translations;

\-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¹ã‚­ãƒ£ãƒ³ã®ç¢ºèª  
EXPLAIN (ANALYZE, BUFFERS)  
SELECT \* FROM faq\_translations  
WHERE embedding \<=\> '\[0.1, 0.2, ...\]'::vector \< 0.5  
LIMIT 5;  
\`\`\`

\*\*æ¥ç¶šãƒ—ãƒ¼ãƒ«æœ€é©åŒ–\*\*:  
\`\`\`python  
\# database.py  
engine \= create\_async\_engine(  
    DATABASE\_URL,  
    pool\_size=20,  \# æ¥ç¶šãƒ—ãƒ¼ãƒ«ã‚µã‚¤ã‚º  
    max\_overflow=10,  \# æœ€å¤§ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼  
    pool\_pre\_ping=True,  \# æ¥ç¶šãƒã‚§ãƒƒã‚¯  
    pool\_recycle=3600,  \# 1æ™‚é–“ã§ãƒªã‚µã‚¤ã‚¯ãƒ«  
)  
\`\`\`

\#\#\#\# E.2 OpenAI APIæœ€é©åŒ–

\*\*ãƒãƒƒãƒå‡¦ç†ã®æœ€é©åŒ–\*\*:  
\`\`\`python  
\# ä¸¦åˆ—å‡¦ç†æ•°ã®èª¿æ•´  
EMBEDDING\_CONCURRENCY \= {  
    "development": 3,  
    "staging": 5,  
    "production": 10  
}

\# ãƒãƒƒãƒã‚µã‚¤ã‚ºã®èª¿æ•´  
BATCH\_SIZE \= 10  \# 10ç¿»è¨³ã”ã¨ã«ã‚³ãƒŸãƒƒãƒˆ  
\`\`\`

\*\*ã‚­ãƒ£ãƒƒã‚·ãƒ¥å®Ÿè£…\*\*:  
\`\`\`python  
from functools import lru\_cache  
import hashlib

@lru\_cache(maxsize=1000)  
async def generate\_embedding\_cached(text: str):  
    """åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ä»˜ãï¼‰"""  
    \# ãƒ†ã‚­ã‚¹ãƒˆã®ãƒãƒƒã‚·ãƒ¥ã‚’ã‚­ãƒ¼ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥  
    text\_hash \= hashlib.md5(text.encode()).hexdigest()  
      
    \# Redisã‹ã‚‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥å–å¾—  
    cached \= await redis\_client.get(f"embedding:{text\_hash}")  
    if cached:  
        return json.loads(cached)  
      
    \# ç”Ÿæˆ  
    embedding \= await generate\_embedding(text)  
      
    \# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿å­˜ï¼ˆ24æ™‚é–“ï¼‰  
    await redis\_client.setex(  
        f"embedding:{text\_hash}",  
        86400,  
        json.dumps(embedding)  
    )  
      
    return embedding  
\`\`\`

\#\#\#\# E.3 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æœ€é©åŒ–

\*\*ã‚³ãƒ¼ãƒ‰åˆ†å‰²\*\*:  
\`\`\`typescript  
// router.ts  
const routes \= \[  
  {  
    path: '/:slug',  
    component: () \=\> import('@/views/guest/LanguageSelect.vue'),  // é…å»¶èª­ã¿è¾¼ã¿  
  },  
  {  
    path: '/:slug/chat',  
    component: () \=\> import('@/views/guest/Chat.vue'),  
  }  
\]  
\`\`\`

\*\*ç”»åƒãƒ»ãƒ•ã‚©ãƒ³ãƒˆæœ€é©åŒ–\*\*:  
\`\`\`css  
/\* å¤šè¨€èªãƒ•ã‚©ãƒ³ãƒˆã®æœ€é©åŒ– \*/  
@font-face {  
  font-family: 'Noto Sans CJK JP';  
  src: url('/fonts/NotoSansCJKjp-Regular.woff2') format('woff2');  
  font-display: swap;  
  unicode-range: U+3000-9FFF;  /\* æ—¥æœ¬èªã®ã¿ \*/  
}

@font-face {  
  font-family: 'Noto Sans CJK TC';  
  src: url('/fonts/NotoSansCJKtc-Regular.woff2') format('woff2');  
  font-display: swap;  
  unicode-range: U+3000-9FFF, U+F900-FAFF;  /\* ç¹ä½“ä¸­å›½èª \*/  
}  
\`\`\`

\#\#\# ä»˜éŒ²F: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

\*\*ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰\*\*:  
\- \[ \] OpenAI APIã‚­ãƒ¼ã®ç’°å¢ƒå¤‰æ•°ç®¡ç†  
\- \[ \] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èªè¨¼æƒ…å ±ã®æš—å·åŒ–  
\- \[ \] SQL ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ï¼ˆORMä½¿ç”¨ï¼‰  
\- \[ \] XSSå¯¾ç­–ï¼ˆå…¥åŠ›ã‚µãƒ‹ã‚¿ã‚¤ã‚ºï¼‰  
\- \[ \] CSRFå¯¾ç­–ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ï¼‰  
\- \[ \] ãƒ¬ãƒ¼ãƒˆãƒªãƒŸãƒƒãƒˆè¨­å®š

\*\*ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰\*\*:  
\- \[ \] CSPï¼ˆContent Security Policyï¼‰è¨­å®š  
\- \[ \] HTTPSå¼·åˆ¶  
\- \[ \] æ©Ÿå¯†æƒ…å ±ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¿å­˜ç¦æ­¢  
\- \[ \] XSSå¯¾ç­–ï¼ˆVue.jsã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ©Ÿèƒ½ï¼‰

\*\*ã‚¤ãƒ³ãƒ•ãƒ©\*\*:  
\- \[ \] ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®š  
\- \[ \] ä¸è¦ãƒãƒ¼ãƒˆã®é–‰é–  
\- \[ \] SSL/TLSè¨¼æ˜æ›¸ã®æœ‰åŠ¹æœŸé™ç¢ºèª  
\- \[ \] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®æš—å·åŒ–

\#\#\# ä»˜éŒ²G: FAQ\_PRESETSæ‹¡å¼µãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆPhase 4ç”¨ï¼‰

\`\`\`python  
\# Phase 4ã§è¿½åŠ äºˆå®šã®FAQï¼ˆå‚è€ƒï¼‰  
PAYMENT\_FAQ\_PRESETS \= \[  
    {  
        "category": "payment",  
        "intent\_key": "payment\_methods",  
        "priority": 8,  
        "translations": \[  
            {  
                "language": "ja",  
                "question": "ã©ã®ã‚ˆã†ãªæ”¯æ‰•ã„æ–¹æ³•ãŒåˆ©ç”¨ã§ãã¾ã™ã‹ï¼Ÿ",  
                "answer": "ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ï¼ˆVisaã€MasterCardã€JCBï¼‰ã€ãƒ‡ãƒ“ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã€ç¾é‡‘ã§ã®ãŠæ”¯æ‰•ã„ãŒå¯èƒ½ã§ã™ã€‚"  
            },  
            {  
                "language": "en",  
                "question": "What payment methods do you accept?",  
                "answer": "We accept credit cards (Visa, MasterCard, JCB), debit cards, and cash."  
            },  
            {  
                "language": "zh-TW",  
                "question": "å¯ä»¥ä½¿ç”¨å“ªäº›ä»˜æ¬¾æ–¹å¼ï¼Ÿ",  
                "answer": "æˆ‘å€‘æ¥å—ä¿¡ç”¨å¡ï¼ˆVisaã€MasterCardã€JCBï¼‰ã€ç°½å¸³å¡å’Œç¾é‡‘ä»˜æ¬¾ã€‚"  
            },  
            {  
                "language": "fr",  
                "question": "Quels modes de paiement acceptez-vous ?",  
                "answer": "Nous acceptons les cartes de crÃ©dit (Visa, MasterCard, JCB), les cartes de dÃ©bit et les espÃ¨ces."  
            },  
            {  
                "language": "ko",  
                "question": "ì–´ë–¤ ê²°ì œ ë°©ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‚˜ìš”?",  
                "answer": "ì‹ ìš©ì¹´ë“œ(Visa, MasterCard, JCB), ì²´í¬ì¹´ë“œ, í˜„ê¸ˆ ê²°ì œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤."  
            }  
        \]  
    },  
    \# ... æ®‹ã‚Š14FAQ  
\]

AMENITIES\_FAQ\_PRESETS \= \[  
    \# ... 10FAQ  
\]

\# ä½¿ç”¨æ–¹æ³•ï¼ˆPhase 4ï¼‰  
FAQ\_PRESETS\_EXTENDED \= (  
    FAQ\_PRESETS \+  \# æ—¢å­˜30FAQ  
    PAYMENT\_FAQ\_PRESETS \+  \# 15FAQ  
    AMENITIES\_FAQ\_PRESETS \+  \# 10FAQ  
    \# ... åˆè¨ˆ100FAQ  
)  
\`\`\`

\#\#\# ä»˜éŒ²H: ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¨­å®š

\*\*Grafana ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¨­å®šï¼ˆJSONï¼‰\*\*:  
\`\`\`json  
{  
  "dashboard": {  
    "title": "YadOPERA Multilingual Metrics",  
    "panels": \[  
      {  
        "title": "æ–°è¦ç™»éŒ²æ•°ï¼ˆãƒ—ãƒ©ãƒ³åˆ¥ï¼‰",  
        "type": "graph",  
        "targets": \[  
          {  
            "expr": "sum(rate(facility\_registrations\_total\[5m\])) by (plan)"  
          }  
        \]  
      },  
      {  
        "title": "FAQè‡ªå‹•è¨­å®šæˆåŠŸç‡",  
        "type": "stat",  
        "targets": \[  
          {  
            "expr": "100 \- (rate(faq\_setup\_failures\_total\[5m\]) / rate(faq\_setup\_total\[5m\]) \* 100)"  
          }  
        \],  
        "thresholds": \[  
          {"value": 95, "color": "red"},  
          {"value": 99, "color": "yellow"},  
          {"value": 100, "color": "green"}  
        \]  
      },  
      {  
        "title": "åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆæ™‚é–“",  
        "type": "heatmap",  
        "targets": \[  
          {  
            "expr": "histogram\_quantile(0.95, embedding\_generation\_duration\_seconds)"  
          }  
        \]  
      },  
      {  
        "title": "OpenAI APIã‚³ã‚¹ãƒˆï¼ˆæ—¥æ¬¡ï¼‰",  
        "type": "graph",  
        "targets": \[  
          {  
            "expr": "sum(increase(openai\_api\_cost\_usd\[1d\]))"  
          }  
        \]  
      }  
    \]  
  }  
}  
\`\`\`

\#\#\# ä»˜éŒ²I: ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæ—¢å­˜æ–½è¨­ç”¨ï¼‰

\*\*Phase 4ä»¥é™ã§ä½¿ç”¨äºˆå®š\*\*:  
\`\`\`python  
\# scripts/migrate\_existing\_facilities\_to\_multilingual.py  
"""  
æ—¢å­˜æ–½è¨­ã¸ã®å¤šè¨€èªFAQè¿½åŠ ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

ä½¿ç”¨æ–¹æ³•:  
    python scripts/migrate\_existing\_facilities\_to\_multilingual.py \\  
        \--plan premium \\  
        \--dry-run  
"""

import asyncio  
from sqlalchemy import select  
from app.database import async\_session  
from app.models import Facility, FAQ  
from app.core.plan\_limits import PLAN\_LANGUAGE\_PRIORITY  
from app.data.faq\_presets import FAQ\_PRESETS

async def migrate\_facility\_to\_multilingual(  
    facility\_id: int,  
    target\_languages: list\[str\],  
    dry\_run: bool \= True  
):  
    """æ–½è¨­ã‚’å¤šè¨€èªå¯¾å¿œã«ç§»è¡Œ"""  
    async with async\_session() as session:  
        \# æ–½è¨­æƒ…å ±å–å¾—  
        facility \= await session.get(Facility, facility\_id)  
          
        \# æ—¢å­˜ã®FAQå–å¾—  
        result \= await session.execute(  
            select(FAQ).filter(FAQ.facility\_id \== facility\_id)  
        )  
        existing\_faqs \= result.scalars().all()  
          
        print(f"æ–½è¨­: {facility.name}")  
        print(f"æ—¢å­˜FAQæ•°: {len(existing\_faqs)}")  
        print(f"å¯¾è±¡è¨€èª: {target\_languages}")  
          
        \# å„FAQã«æ–°ã—ã„è¨€èªã®ç¿»è¨³ã‚’è¿½åŠ   
        for faq in existing\_faqs:  
            \# ãƒ—ãƒªã‚»ãƒƒãƒˆã‹ã‚‰è©²å½“ã™ã‚‹FAQã‚’æ¤œç´¢  
            preset \= next(  
                (p for p in FAQ\_PRESETS if p\["intent\_key"\] \== faq.intent\_key),  
                None  
            )  
              
            if not preset:  
                continue  
              
            \# æ—¢å­˜ã®ç¿»è¨³è¨€èªã‚’å–å¾—  
            existing\_languages \= {t.language for t in faq.translations}  
              
            \# è¿½åŠ ã™ã‚‹è¨€èª  
            new\_languages \= set(target\_languages) \- existing\_languages  
              
            if new\_languages:  
                print(f"  FAQ: {faq.intent\_key}")  
                print(f"    è¿½åŠ è¨€èª: {new\_languages}")  
                  
                if not dry\_run:  
                    \# ç¿»è¨³è¿½åŠ å‡¦ç†ï¼ˆå®Ÿè£…ï¼‰  
                    pass  
          
        if not dry\_run:  
            \# æ–½è¨­ã®languagesæ›´æ–°  
            facility.languages \= target\_languages  
            facility.language\_limit \= len(target\_languages) if len(target\_languages) \< 5 else None  
            await session.commit()  
            print(f"âœ… ç§»è¡Œå®Œäº†")  
        else:  
            print(f"â„¹ï¸  DRY RUNãƒ¢ãƒ¼ãƒ‰ï¼ˆå®Ÿéš›ã®å¤‰æ›´ãªã—ï¼‰")

\# å®Ÿè¡Œä¾‹  
if \_\_name\_\_ \== "\_\_main\_\_":  
    import argparse  
      
    parser \= argparse.ArgumentParser()  
    parser.add\_argument("--facility-id", type=int)  
    parser.add\_argument("--plan", choices=\["free", "mini", "small", "standard", "premium"\])  
    parser.add\_argument("--dry-run", action="store\_true", default=True)  
    args \= parser.parse\_args()  
      
    \# ãƒ—ãƒ©ãƒ³åˆ¥ã®è¨€èªãƒªã‚¹ãƒˆå–å¾—  
    from app.core.plan\_limits import convert\_subscription\_plan\_to\_plan\_type  
    plan\_type \= convert\_subscription\_plan\_to\_plan\_type(args.plan)  
    target\_languages \= PLAN\_LANGUAGE\_PRIORITY.get(plan\_type)  
    if target\_languages is None:  
        target\_languages \= \["ja", "en", "zh-TW", "fr", "ko"\]  
      
    asyncio.run(  
        migrate\_facility\_to\_multilingual(  
            args.facility\_id,  
            target\_languages,  
            args.dry\_run  
        )  
    )  
\`\`\`

\---

\#\# å¤‰æ›´å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜ | å¤‰æ›´å†…å®¹ | æ‹…å½“è€… |  
|-----------|------|---------|--------|  
| v1.0 | 2026-01-24 | åˆç‰ˆä½œæˆ | Development Team |  
| v1.1 | 2026-01-25 | ãƒ†ã‚¹ãƒˆè¨ˆç”»è©³ç´°åŒ– | QA Team |  
| v1.2 | 2026-01-25 | ãƒªã‚¹ã‚¯åˆ†æè¿½åŠ  | Product Team |  
| v1.3 | 2026-01-25 | Critical/Highä¿®æ­£åæ˜  | Development Team |

\*\*v1.3ã®ä¸»ãªå¤‰æ›´ç‚¹\*\*:  
1\. ã‚»ã‚¯ã‚·ãƒ§ãƒ³1.3: ãƒ—ãƒ©ãƒ³åˆ¥FAQä»¶æ•°ã«Phase 3å®Ÿè£…æ¬„ã‚’è¿½åŠ   
2\. ã‚»ã‚¯ã‚·ãƒ§ãƒ³2.1: facilitiesãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚¹ã‚­ãƒ¼ãƒè©³ç´°ã‚’è¿½åŠ   
3\. ã‚»ã‚¯ã‚·ãƒ§ãƒ³2.5: æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¨ä¿®æ­£å¾Œã‚³ãƒ¼ãƒ‰ã‚’æ˜è¨˜  
4\. ã‚»ã‚¯ã‚·ãƒ§ãƒ³2.7: ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã®å®Ÿè£…æ–¹æ³•ã‚’æ˜è¨˜  
5\. ã‚»ã‚¯ã‚·ãƒ§ãƒ³5.2.2: ä¿®æ­£å‰å¾Œã®ã‚³ãƒ¼ãƒ‰ã‚’ä¸¦è¨˜  
6\. ã‚»ã‚¯ã‚·ãƒ§ãƒ³5.5: åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ä¸¦åˆ—å‡¦ç†ã®å®Ÿè£…ã‚’è¿½åŠ   
7\. ã‚»ã‚¯ã‚·ãƒ§ãƒ³6.3: data-testidå±æ€§ã®å®Ÿè£…ä¾‹ã‚’è¿½åŠ   
8\. ã‚»ã‚¯ã‚·ãƒ§ãƒ³8.1.1, 8.2.1: SQLAlchemyã®selectã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’è¿½åŠ   
9\. ã‚»ã‚¯ã‚·ãƒ§ãƒ³9.3: CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­å®šä¾‹ã‚’è¿½åŠ   
10\. ä»˜éŒ²D: ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’æ‹¡å……

\---

\#\# æ‰¿èª

\*\*ä½œæˆè€…\*\*: Development Team    
\*\*ãƒ¬ãƒ“ãƒ¥ãƒ¼\*\*: QA Team, Product Team    
\*\*æ‰¿èªè€…\*\*: Tech Lead    
\*\*æ‰¿èªæ—¥\*\*: 2026-01-25

\---

\*\*æ–‡æ›¸çµ‚äº†\*\*

\---

\#\# è£œè¶³: å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼ˆå°åˆ·ç”¨ï¼‰

\#\#\# Phase 1: é–‹ç™ºç’°å¢ƒï¼ˆ1é€±é–“ï¼‰

\*\*Day 1-2: FAQ\_PRESETSç¿»è¨³è¿½åŠ \*\*  
\- \[ \] ç¿»è¨³ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆä½œæˆ  
\- \[ \] DeepL Proã§æ©Ÿæ¢°ç¿»è¨³  
\- \[ \] ç¹ä½“ä¸­å›½èª30FAQç¿»è¨³  
\- \[ \] ãƒ•ãƒ©ãƒ³ã‚¹èª30FAQç¿»è¨³  
\- \[ \] éŸ“å›½èª30FAQç¿»è¨³  
\- \[ \] faq\_presets.pyæ›´æ–°

\*\*Day 3: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…\*\*  
\- \[ \] PLAN\_LANGUAGE\_PRIORITYå®šç¾©è¿½åŠ   
\- \[ \] filter\_faq\_presets\_by\_plan()ä¿®æ­£  
\- \[ \] auth\_service.pyä¿®æ­£ï¼ˆlanguagesè¨­å®šï¼‰  
\- \[ \] ä¸¦åˆ—å‡¦ç†å®Ÿè£…ï¼ˆåŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ï¼‰

\*\*Day 4: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…\*\*  
\- \[ \] data-testidå±æ€§è¿½åŠ ï¼ˆLanguageSelect.vueï¼‰  
\- \[ \] data-testidå±æ€§è¿½åŠ ï¼ˆDashboard.vueï¼‰  
\- \[ \] å‹•ä½œç¢ºèª

\*\*Day 5: ãƒ†ã‚¹ãƒˆå®Ÿè£…\*\*  
\- \[ \] test\_multilingual\_faq\_presets.pyä½œæˆ  
\- \[ \] test\_multilingual\_registration.pyä½œæˆ  
\- \[ \] E2Eãƒ†ã‚¹ãƒˆä½œæˆ  
\- \[ \] å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ»ãƒ‘ã‚¹ç¢ºèª

\*\*Day 6-7: ç¿»è¨³å“è³ªãƒã‚§ãƒƒã‚¯\*\*  
\- \[ \] CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ  
\- \[ \] ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒã‚§ãƒƒã‚¯ä¾é ¼  
\- \[ \] ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åæ˜   
\- \[ \] æœ€çµ‚ç¢ºèª

\#\#\# Phase 2: ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒï¼ˆ2-3æ—¥ï¼‰

\*\*Day 8: ãƒ‡ãƒ—ãƒ­ã‚¤\*\*  
\- \[ \] ãƒãƒ¼ã‚¸ï¼ˆstagingï¼‰  
\- \[ \] Dockerãƒ“ãƒ«ãƒ‰  
\- \[ \] ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ  
\- \[ \] ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

\*\*Day 9: å‹•ä½œç¢ºèª\*\*  
\- \[ \] Free/Mini/Small/Standard/Premiumå„1ä»¶ç™»éŒ²  
\- \[ \] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèª  
\- \[ \] è¨€èªé¸æŠç”»é¢ç¢ºèª  
\- \[ \] ãƒãƒ£ãƒƒãƒˆå‹•ä½œç¢ºèª

\*\*Day 10: ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°\*\*  
\- \[ \] ãƒ­ã‚°ç¢ºèªï¼ˆ48æ™‚é–“ï¼‰  
\- \[ \] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºèª  
\- \[ \] ã‚¨ãƒ©ãƒ¼ç‡ç¢ºèª  
\- \[ \] Go/No-Goåˆ¤æ–­

\#\#\# Phase 3: æœ¬ç•ªç’°å¢ƒï¼ˆ1æ—¥ï¼‰

\*\*Day 11: æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤\*\*  
\- \[ \] ãƒãƒ¼ã‚¸ï¼ˆmainï¼‰  
\- \[ \] ã‚¿ã‚°ä»˜ã‘ï¼ˆv0.3.11ï¼‰  
\- \[ \] CI/CDå®Ÿè¡Œç¢ºèª  
\- \[ \] ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ç¢ºèª  
\- \[ \] æœ€çµ‚å‹•ä½œç¢ºèª  
\- \[ \] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°  
\- \[ \] ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆä½œæˆ

\---

\*\*Total: 11æ—¥é–“ï¼ˆç´„2é€±é–“ï¼‰\*\*

ã“ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’å°åˆ·ã—ã€é€²æ—ç®¡ç†ã«ã”æ´»ç”¨ãã ã•ã„ã€‚