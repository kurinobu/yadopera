# ローカルブラウザテスト — 問題A・B 解決後 即座に実施用 2026-02-12

**目的**: 修正（ManualContent フォールバック強化・FaqManagement v-if・package.json build）の動作を、ローカルで即座に確認する。

---

## 0. 準備（実施前にここまで完了させる）

### 0.1 環境起動（どちらか一方）

**方法A: Docker Compose で一括起動（推奨）**

```bash
cd /Users/kurinobu/projects/yadopera
docker compose up -d
```

- バックエンド: http://localhost:8000  
- フロント: http://localhost:5173  
- 起動完了まで 1〜2 分かかることがある。`docker compose ps` で frontend / backend が Up であることを確認する。

**方法B: バックエンド・フロントを別々に起動**

```bash
# ターミナル1: バックエンド（DB・Redis は別途起動済み前提）
cd /Users/kurinobu/projects/yadopera/backend
# .env と DB を用意したうえで
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# ターミナル2: フロント
cd /Users/kurinobu/projects/yadopera/frontend
npm run dev
```

- フロント: http://localhost:5173  
- バックエンド: http://localhost:8000  

### 0.2 ログイン用アカウント（CSV一括登録は Standard / Premium のみ表示）

| プラン     | メールアドレス      | パスワード          |
|------------|---------------------|---------------------|
| **Standard** | test61@example.com | testpassword123     |
| **Premium**  | test71@example.com | testpassword123     |

- 上記のいずれかで **http://localhost:5173** にログインする。  
- 未ログインまたは Basic プランでは「CSV一括登録」ボタンは出ない。

### 0.3 確認する URL

| 用途           | URL |
|----------------|-----|
| フロント TOP   | http://localhost:5173 |
| マニュアル 4.8 | http://localhost:5173/admin/manual （4.8 までスクロール） |
| FAQ 管理      | http://localhost:5173/admin/faqs |
| CSV 直接取得  | http://localhost:5173/faq-csv-template/FAQ_CSV_template_4lang.csv |

---

## 1. チェックリスト（順番に実施）

### 1.1 問題C: CSV が配信される

- [ ] ブラウザで **http://localhost:5173/faq-csv-template/FAQ_CSV_template_4lang.csv** を開く
- [ ] **404 にならない**。CSV の中身（1行目が `category,intent_key,...` など）が表示される、またはファイルがダウンロードされる

---

### 1.2 問題A: マニュアルの「CSVテンプレートをダウンロード」がリンクになる

- [ ] **http://localhost:5173/admin/manual** を開く
- [ ] 左ナビまたはスクロールで **4.8 CSV一括登録（Standard・Premium）** を表示する
- [ ] 本文の「マニュアルのこの節からも **CSVテンプレートをダウンロード** できます」の **「CSVテンプレートをダウンロード」が青いリンク**になっている（`[CSVテンプレートをダウンロード](...)` のコードのまま表示されていない）
- [ ] そのリンクをクリックし、CSV が開くまたはダウンロードされる
- [ ] **いったん FAQ 管理（/admin/faqs）に移動してから、再度 マニュアル に戻る**
- [ ] 再度 4.8 を表示し、**「CSVテンプレートをダウンロード」が再表示後も青リンクのまま**で、コードがそのまま表示されていない

---

### 1.3 問題B: モーダル内でテンプレート説明・ダウンロードが表示される

- [ ] **http://localhost:5173/admin/faqs** を開く
- [ ] **「CSV一括登録」** ボタンをクリックしてモーダルを開く
- [ ] モーダル内に次が表示されている  
  - **説明文**: 「推奨テンプレート（日本語・英語・フランス語・繁体中国語）をダウンロードして編集し、アップロードにご利用ください。」  
  - **リンク**: 「CSVテンプレートをダウンロード」の青いリンク  
  - **ファイル選択**: 「CSVファイルをドラッグ＆ドロップするか、下のボタンで選択してください」と「ファイルを選択」ボタン
- [ ] モーダル内の「CSVテンプレートをダウンロード」をクリックし、CSV が取得・ダウンロードされる
- [ ] モーダルの **「閉じる」** をクリックして閉じる
- [ ] 再度 **「CSV一括登録」** をクリックしてモーダルを開く
- [ ] **2回目も** 上記のテンプレート説明と「CSVテンプレートをダウンロード」リンクが表示されている（前回の結果表示に依存せず初期表示になっている）

---

## 2. 結果の記録

- 1.1〜1.3 のうち、すべて ✅ なら **ローカルブラウザテスト合格**。
- いずれかで ❌ の場合は、該当番号と現象（例: 1.2 でリンクがコードのまま表示された）をメモし、修正の見直しまたは環境の確認を行う。

---

## 3. 起動コマンド（参照）

```bash
# プロジェクトルートで
cd /Users/kurinobu/projects/yadopera
docker compose up -d

# フロントのみ（バックエンドは別途起動している場合）
cd frontend && npm run dev
```

- フロント: http://localhost:5173  
- バックエンド: http://localhost:8000  
- API ドキュメント: http://localhost:8000/docs  
