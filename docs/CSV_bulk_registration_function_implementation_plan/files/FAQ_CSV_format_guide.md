# やどぺら FAQ CSV一括登録 フォーマット説明書

作成日: 2026年1月27日  
対象: StandardプランおよびPremiumプランのユーザー

---

## 📋 概要

このドキュメントでは、やどぺらのFAQ CSV一括登録機能で使用するCSVファイルのフォーマットについて説明します。

---

## 🎯 CSVファイルの基本構造

CSVファイルは以下のような表形式のデータです：

```
1行目: カラム名（ヘッダー行）
2行目以降: データ行（FAQ1件ごと）
```

### 例（最小構成）

| category | language_ja_question | language_ja_answer |
|----------|---------------------|-------------------|
| basic | チェックアウトは何時ですか？ | チェックアウトは11時までです。 |
| basic | WiFiパスワードは何ですか？ | WiFiパスワードはguest2024です。 |
| facilities | アイロンはありますか？ | アイロンは1階のランドリールームにあります。 |

**実際のCSVファイル（テキスト形式）：**
```csv
category,language_ja_question,language_ja_answer
basic,チェックアウトは何時ですか？,チェックアウトは11時までです。
basic,WiFiパスワードは何ですか？,WiFiパスワードはguest2024です。
facilities,アイロンはありますか？,アイロンは1階のランドリールームにあります。
```

---

## 📝 必須カラム

以下の3つのカラムは**必ず含める必要があります**：

| カラム名 | 説明 | 例 |
|---------|------|---|
| category | FAQのカテゴリ | basic, facilities, location, trouble |
| language_ja_question | 日本語の質問文 | チェックアウトは何時ですか？ |
| language_ja_answer | 日本語の回答文 | チェックアウトは11時までです。 |

### categoryの種類

| カテゴリ | 説明 | 例 |
|---------|------|---|
| basic | 基本情報 | チェックイン・チェックアウト、WiFi、朝食など |
| facilities | 施設・設備 | キッチン、洗濯機、アイロン、ドライヤーなど |
| location | 場所・アクセス | 最寄り駅、観光地、コンビニ、バス停など |
| trouble | トラブル対応 | 鍵紛失、騒音、故障、クレームなど |

---

## 🌍 多言語対応（オプション）

他の言語を追加する場合は、以下のカラムを追加します：

### 英語を追加する場合

| カラム名 | 説明 | 例 |
|---------|------|---|
| language_en_question | 英語の質問文 | What time is check-out? |
| language_en_answer | 英語の回答文 | Check-out is by 11:00 AM. |

### サポート言語一覧

| 言語 | カラム名プレフィックス | 例（質問文） | 例（回答文） |
|------|---------------------|------------|------------|
| 日本語 | language_ja_ | language_ja_question | language_ja_answer |
| 英語 | language_en_ | language_en_question | language_en_answer |
| 繁体中国語 | language_zh-TW_ | language_zh-TW_question | language_zh-TW_answer |
| フランス語 | language_fr_ | language_fr_question | language_fr_answer |
| 韓国語 | language_ko_ | language_ko_question | language_ko_answer |

### 多言語対応の例

| category | language_ja_question | language_ja_answer | language_en_question | language_en_answer |
|----------|---------------------|-------------------|---------------------|-------------------|
| basic | チェックアウトは何時ですか？ | チェックアウトは11時までです。 | What time is check-out? | Check-out is by 11:00 AM. |
| basic | WiFiパスワードは何ですか？ | WiFiパスワードはguest2024です。 | What is the WiFi password? | The WiFi password is guest2024. |

---

## ⚙️ その他のオプションカラム

より詳細な設定を行いたい場合は、以下のカラムを追加できます：

| カラム名 | 説明 | 設定値 | デフォルト値 |
|---------|------|--------|------------|
| intent_key | FAQ識別キー。**通常は入力不要。空欄にしておくと、カテゴリと質問文から自動生成されます。** | basic_checkout_time など | 自動生成 |
| priority | 優先度 | 1-5（数字が大きいほど重要） | 3 |
| is_active | 有効/無効 | true / false | true |

### 完全版の例

| category | intent_key | priority | is_active | language_ja_question | language_ja_answer | language_en_question | language_en_answer |
|----------|-----------|----------|-----------|---------------------|-------------------|---------------------|-------------------|
| basic | basic_checkout_time | 5 | true | チェックアウトは何時ですか？ | チェックアウトは11時までです。 | What time is check-out? | Check-out is by 11:00 AM. |
| basic | basic_wifi_password | 5 | true | WiFiパスワードは何ですか？ | WiFiパスワードはguest2024です。 | What is the WiFi password? | The WiFi password is guest2024. |

---

## 💾 CSVファイルの保存方法

### Excelで保存する場合

1. データを入力
2. 「ファイル」→「名前を付けて保存」を選択
3. ファイルの種類で「**CSV UTF-8（カンマ区切り）(.csv)**」を選択
4. 保存

### Googleスプレッドシートで保存する場合

1. データを入力
2. 「ファイル」→「ダウンロード」を選択
3. 「**カンマ区切り形式（.csv）**」を選択
4. ダウンロード

### Numbers（Mac）で保存する場合

1. データを入力
2. 「ファイル」→「書き出す」→「CSV」を選択
3. テキストエンコーディングで「**Unicode（UTF-8）**」を選択
4. 書き出す

---

## ⚠️ 注意事項

### 文字コード
- **必ずUTF-8で保存してください**
- BOM付きUTF-8推奨（Excel互換性のため）

### 区切り文字
- カンマ（,）を使用してください
- タブ区切りやセミコロン区切りは使用できません

### ファイルサイズ
- **最大10MBまで**
- 通常、数千件のFAQでも10MB以下に収まります

### カラム名
- **1行目のカラム名は変更しないでください**
- 大文字小文字も正確に一致させてください
- 例: `language_ja_question`（正）、`Language_JA_Question`（誤）

### データの入力
- カンマやダブルクォートを含む場合は、ダブルクォートで囲んでください
- **質問文・回答文にカンマ（,）を含む場合は、そのフィールド全体をダブルクォート（"）で囲んでください。** 囲まないと列がずれてエラーや意図しない登録の原因になります。
- 例: `"WiFiパスワードはguest2024です。ネットワーク名は""GuestHouse-WiFi""です。"`
- 改行を含む場合も、ダブルクォートで囲んでください

---

## 📊 プラン別の制限

| プラン | FAQ登録数上限 | 同時利用言語数上限 | CSV一括登録 |
|--------|-------------|-----------------|-----------|
| Free | 20件 | 1言語（日本語のみ） | ❌ 利用不可 |
| Mini | 30件 | 2言語 | ❌ 利用不可 |
| Small | 50件 | 3言語 | ❌ 利用不可 |
| **Standard** | **100件** | **4言語** | **✅ 利用可能** |
| **Premium** | **無制限** | **無制限** | **✅ 利用可能** |

### 制限の計算方法

#### FAQ登録数の制限
- **既存のFAQ数 + CSVの行数 ≤ プランの上限**
- 例: Standardプランで既に50件のFAQが登録されている場合、CSVは50件以内にする必要があります

#### 言語数の制限
- **既存の言語数 + CSVに含まれる新規言語数 ≤ プランの上限**
- 例: Miniプランで既にjaとenが登録されている場合、CSVにzh-TWを含めることはできません（2言語上限のため）

---

## ❓ よくある質問

### Q1: intent_keyは必須ですか？
**A:** いいえ、省略可能です。省略した場合は質問文から自動生成されます。

### Q2: 日本語だけでアップロードできますか？
**A:** はい、最小構成（必須カラムのみ）でアップロード可能です。

### Q3: 後から他の言語を追加できますか？
**A:** はい、Phase 2以降の機能で、同じintent_keyを指定して再度アップロードすれば追加できます。

### Q4: Excelで作成したCSVは使えますか？
**A:** はい、ただし「CSV UTF-8（カンマ区切り）(.csv)」で保存してください。

### Q5: 重複するFAQはどうなりますか？
**A:** Phase 1では、重複するintent_keyがある場合、エラーが返されます。CSV全体がアップロードされません。

### Q6: アップロードに失敗した場合はどうなりますか？
**A:** エラーメッセージが表示されます。CSVを修正して再度アップロードしてください。

### Q7: 何件までアップロードできますか？
**A:** Standardプランは100件まで、Premiumプランは無制限です。

### Q8: アップロードにかかる時間はどのくらいですか？
**A:** 100件のFAQで約30秒以内が目標です。

---

## 📚 サンプルファイル

**推奨テンプレート**: **FAQ_CSV_template_4lang.csv**（4言語: 日本語・英語・フランス語・繁体中国語）。管理画面の「CSV一括登録」モーダル内およびご利用マニュアル第4章4.8からダウンロードできます。

以下のサンプルファイルをダウンロードしてご利用ください：

1. **FAQ_CSV_template_4lang.csv** - 推奨テンプレート（4言語: 日・英・仏・繁体中国語、10件）
2. **sample_faq_minimal.csv** - 最小構成（日本語のみ、15件）
3. **sample_faq_bilingual.csv** - 多言語対応（日英、10件）
4. **sample_faq_full.csv** - 完全版（日英繁体中国語、全オプション含む、10件）
5. **FAQ_CSV_samples.xlsx** - Excelファイル（3つのサンプルシートと使い方説明）

---

## 🔧 トラブルシューティング

### エラー: 「ファイルサイズは10MB以内にしてください」
- ファイルサイズを確認してください
- 不要な列や行を削除してください

### エラー: 「必須カラムが不足しています」
- 1行目のカラム名を確認してください
- `category`, `language_ja_question`, `language_ja_answer`が含まれているか確認

### エラー: 「CSVファイルの文字コードを検出できませんでした」
- UTF-8で保存し直してください
- BOM付きUTF-8推奨

### エラー: 「Standardプランでは100件までしか登録できません」
- 既存のFAQ数を確認してください
- CSVの行数を減らしてください
- Premiumプランへのアップグレードをご検討ください

### エラー: 「プランの言語数制限に達しています」
- 既存の言語数を確認してください
- CSVに含まれる新規言語を減らしてください
- 上位プランへのアップグレードをご検討ください

---

## 📞 サポート

ご不明な点がございましたら、お気軽にお問い合わせください。

- 問い合わせフォーム: 管理画面の「お問い合わせ」メニュー
- メール: support@yadopera.com（仮）

---

**作成日**: 2026年1月27日  
**バージョン**: v1.0  
**対象**: StandardプランおよびPremiumプランのユーザー
