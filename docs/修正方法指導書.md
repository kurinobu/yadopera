  
\*\*Cursor にそのまま渡せる・判断を挟まなくていい「修正方法指導書.md」\*\*としてまとめます。  
余計な推測・分岐は入れません。  
\*\*やること／やらないこと／理由\*\*を明確にします。

\---

\`\`\`\`md  
\# 修正方法指導書.md  
\#\# スマートフォン実機で画面が真っ白になる問題（根本修正）

\---

\#\# 1\. 目的

Render.com の Static Site にデプロイされた Vue3 \+ Vite SPA が    
\*\*スマートフォン／タブレット実機のみで真っ白画面になる問題\*\*を    
\*\*根本原因から修正する\*\*。

本指導書は Cursor AI に修正作業を委譲するためのものであり、    
\*\*判断・設計変更・代替案の検討は行わない\*\*。

\---

\#\# 2\. 結論（必ず守ること）

\#\#\# ✅ 原因  
\- ES Module（type="module"）の JavaScript が    
  \*\*モバイルブラウザ（特に iOS Safari / iPad Chrome）で実行されていない\*\*  
\- Render.com Static Site 環境において    
  \*\*MIME Type / 配信形式の解釈差\*\*により発生

\#\#\# ❌ 原因ではない（調査済・再検討不要）  
\- localStorage  
\- Pinia  
\- Vue Router  
\- PWA  
\- matchMedia  
\- app.mount タイミング  
\- API / Backend  
\- Docker / Node  
\- ビルド失敗

\---

\#\# 3\. 修正方針（唯一の正解）

\#\#\# 👉 \*\*Vite に index.html の変換を完全に任せる\*\*  
\- dist/index.html を手動で制御しない  
\- JS ファイル名（ハッシュ付き）を直接指定しない  
\- Render 独自の Header 上書きを使わない

\---

\#\# 4\. 実施する修正（必須）

\#\#\# 4.1 frontend/index.html を以下の形に統一する

\`\`\`html  
\<\!DOCTYPE html\>  
\<html lang="ja"\>  
  \<head\>  
    \<meta charset="UTF-8" /\>  
    \<meta name="viewport" content="width=device-width, initial-scale=1.0" /\>  
    \<title\>やどぺら\</title\>  
  \</head\>  
  \<body\>  
    \<div id="app"\>\</div\>

    \<\!-- Vite によるビルド前エントリ \--\>  
    \<script type="module" src="/src/main.ts"\>\</script\>  
  \</body\>  
\</html\>  
\`\`\`\`

\#\#\#\# 注意

\* \`/assets/index-XXXX.js\` を \*\*絶対に直接書かない\*\*  
\* dist/index.html を \*\*手動編集しない\*\*

\---

\#\#\# 4.2 \`\_headers\` ファイルを削除する

\#\#\#\# 対象

\`\`\`  
frontend/public/\_headers  
\`\`\`

\#\#\#\# 理由

\* Render.com Static Site は Netlify と完全互換ではない  
\* JS / HTML の Content-Type を手動指定すると  
  \*\*モバイル Safari で ES Module が拒否される\*\*  
\* 副作用の温床になるため削除する

\---

\#\#\# 4.3 Render.com Dashboard の Header 設定を削除する

\#\#\#\# 対象

\* Static Site → Settings → Headers

\#\#\#\# 作業

\* \`/\*\` に設定した \`Content-Type\` をすべて削除

\---

\#\# 5\. 実施してはいけないこと（厳守）

\* ❌ dist/ 配下を直接編集する  
\* ❌ Content-Type を手動で上書きする  
\* ❌ JS ファイル名を index.html に直書きする  
\* ❌ localStorage / PWA / Pinia を疑って修正する  
\* ❌ try-catch を追加して「様子を見る」

\---

\#\# 6\. ビルド・デプロイ手順

1\. ローカルで以下を実行

   \`\`\`bash  
   npm run build  
   \`\`\`

2\. dist/index.html を確認

   \* \`\<script type="module" src="/assets/index-XXXX.js"\>\` に \*\*自動変換されていること\*\*

3\. Render.com にデプロイ

   \* Publish Directory: \`dist\`  
   \* Static Site として配信

\---

\#\# 7\. 検証方法（必須）

\#\#\# 対象端末

\* iPhone Safari  
\* iPad Chrome

\#\#\# 確認項目

\* 画面が真っ白にならない  
\* \`.txt\` ダウンロードが出ない  
\* Vue UI が即座に描画される

\---

\#\# 8\. 修正完了の判断基準

\* モバイル実機で UI が表示されること  
\* デスクトップ挙動が変わらないこと  
\* API ログが従来どおり 200 であること

\---

\#\# 9\. 備考

本問題は以下の条件が重なったことで発生した：

\* Render.com Static Site  
\* Vite SPA  
\* ES Module  
\* iOS Safari の厳格な MIME / module 解釈

\*\*回避策ではなく、正しい構成に戻すことが唯一の解決策である。\*\*

以上。

\`\`\`

\---

これを \*\*そのまま Cursor に投げてください\*\*。    
Cursor が余計なことをしない構成になっています。

修正後、    
\- 直った → \*\*成功\*\*  
\- 直らない → \*\*私の分析ミス\*\*  

その場合は、あなたの判断でこの会話を終えて構いません。  
\`\`\`  
