# Phase 0 ステップ10: 正しい実施順序

**作成日**: 2025年11月25日  
**目的**: ステップ10（ランディングページ）の正しい実施順序を明確化  
**重要**: Google Analytics設定には実際のURLが必要なため、デプロイを先に実施する必要がある

---

## 問題の指摘

### ユーザーからの指摘（完全に正しい）

**「Google Analytics 4プロパティ作成（実際のURL: https://tabipera.com）」ですが、renderのサービスを新規作成しないと、Google Analytics 4プロパティ作成が進みません。これを先に実行しなければならないのでないですか？」**

### 重要な補足

**Render.comのサービス作成は不要です。** 理由：
- ランディングページは**Vercel**にデプロイする（Render.comではない）
- Render.comは本番アプリ（FastAPI + Vue.js）用で、Phase 1 Week 4以降に構築予定
- ランディングページと本番アプリは別物

**ただし、ユーザーの指摘の核心は正しい**：
- Google Analytics 4プロパティ作成には**実際のURL**が必要
- そのURLを取得するには、**まずVercelにデプロイする必要がある**

---

## 正しい実施順序

### 誤った順序（以前の提案）

```
1. PoC説明追加
2. Vercelデプロイ
3. Google Analytics設定 ← これが問題
```

**問題点**: Google Analytics設定を「デプロイ後」としていたが、実際にはデプロイが完了し、カスタムドメインが設定され、実際のURLが利用可能になってからでないと、Google Analytics 4プロパティ作成時にURLを入力できない。

### 正しい順序（修正版）

```
1. ステップ10-1: PoC説明追加（30分）
   ↓
2. ステップ10-2: Vercelにランディングページをデプロイ（30分）
   ↓
3. ステップ10-3: カスタムドメイン設定（tabipera.com）（10分）
   ↓
   【重要】この時点で https://tabipera.com が利用可能になる
   ↓
4. ステップ10-4: Google Analytics 4プロパティ作成（30分）
   - ウェブサイトURL: https://tabipera.com（実際のURL）
   - 測定ID取得（G-XXXXXXXXXX）
   ↓
5. ステップ10-5: HTMLに測定ID設定（10分）
   - landing/index.htmlのG-XXXXXXXXXXを実際の測定IDに置き換え
   - コミット・プッシュ
   - Vercelが自動で再デプロイ
   ↓
6. ステップ10-6: 動作確認（10分）
   - https://tabipera.com にアクセス
   - Google Analyticsのリアルタイムレポートで確認
```

**合計時間**: 約2時間

---

## 各ステップの詳細

### ステップ10-1: PoC説明追加

**優先度**: 高  
**所要時間**: 30分  
**内容**:
- PoCセクションに「PoCとは」サブセクションを追加
- 契約内容（完全無料、3ヶ月間、契約の縛りなし）
- やどぺらとの関係性（テストユーザー、フィードバック提供）
- 参加条件と期待される協力内容

**理由**: デプロイ前に内容を完成させる

---

### ステップ10-2: Vercelにランディングページをデプロイ

**優先度**: 高（最優先）  
**所要時間**: 30分  
**手順**:
1. Vercelアカウント作成（未作成の場合）
2. GitHubリポジトリ連携
3. プロジェクト作成
   - Root Directory: `landing`
   - Framework Preset: Other（またはStatic Site）
   - Build Command: なし
   - Output Directory: `.`
4. デプロイ実行

**理由**: これが先に必要。デプロイしないと実際のURLが確定しない

**注意**: この時点ではまだカスタムドメイン（tabipera.com）は設定していない。VercelのデフォルトURL（例: `yadopera.vercel.app`）が利用可能になる。

---

### ステップ10-3: カスタムドメイン設定

**優先度**: 高  
**所要時間**: 10分（DNS設定含む）  
**手順**:
1. Vercelプロジェクト設定を開く
2. 「Domains」タブを選択
3. `tabipera.com` を追加
4. DNS設定を指示に従って実施
5. SSL証明書は自動で設定される

**理由**: これで実際のURL（https://tabipera.com）が利用可能になる

**重要**: この時点で https://tabipera.com にアクセス可能になる。これがGoogle Analytics 4プロパティ作成時に必要なURL。

---

### ステップ10-4: Google Analytics 4プロパティ作成

**優先度**: 高  
**所要時間**: 30分  
**前提条件**: 
- ✅ Vercelデプロイ完了
- ✅ カスタムドメイン設定完了
- ✅ https://tabipera.com が利用可能

**手順**:
1. [Google Analytics](https://analytics.google.com/)にアクセス
2. 「管理」→「プロパティを作成」
3. プロパティ名: 「やどぺら LP」
4. **ウェブサイトURL**: `https://tabipera.com`（実際のURL）
5. レポートのタイムゾーン: 「日本標準時」
6. 通貨: 「日本円 (¥)」
7. 「作成」をクリック
8. 「管理」→「データストリーム」→「ウェブ」を選択
9. 測定ID（`G-XXXXXXXXXX`形式）をコピー

**理由**: デプロイ・カスタムドメイン設定完了後、実際のURLで作成する必要がある

**注意**: Render.comのサービス作成は不要（ランディングページはVercelにデプロイするため）

---

### ステップ10-5: HTMLに測定ID設定

**優先度**: 高  
**所要時間**: 10分  
**手順**:
1. `landing/index.html`を編集
2. 23行目と28行目の`G-XXXXXXXXXX`を実際の測定IDに置き換え
3. コミット・プッシュ
4. Vercelが自動で再デプロイ

**理由**: 測定IDを設定しないとGoogle Analyticsが動作しない

---

### ステップ10-6: 動作確認

**優先度**: 高  
**所要時間**: 10分  
**確認項目**:
1. `https://tabipera.com` にアクセス
2. ページが正常に表示されることを確認
3. 開発者ツール（F12）でGoogle Analyticsのリクエストが送信されているか確認
4. Google Analyticsのリアルタイムレポートでアクセスが記録されているか確認

**理由**: すべての設定が正しく動作していることを確認

---

## Render.comとの関係（重要）

### 混同しやすいポイント

❌ **誤解**: Render.comのサービス立ち上げを待たないとランディングページがデプロイできない

✅ **正解**: ランディングページはVercelにデプロイするため、Render.comとは無関係

### 実際の関係

```
【ランディングページ（Vercel）】
Phase 0完了 → すぐにデプロイ可能 → Google Analytics設定可能
→ Render.comのサービス作成は不要

【本番アプリ（Render.com）】
Phase 1 Week 4 → ステージング環境構築
Phase 4 → 本番環境構築
→ ランディングページとは別物
```

---

## タイムライン

| ステップ | 時期 | 所要時間 | 前提条件 |
|---------|------|---------|---------|
| PoC説明追加 | Phase 0完了後 | 30分 | なし |
| Vercelデプロイ | 上記完了後 | 30分 | PoC説明追加完了 |
| カスタムドメイン設定 | デプロイ後 | 10分 | Vercelデプロイ完了 |
| Google Analytics設定 | カスタムドメイン設定後 | 30分 | https://tabipera.com が利用可能 |
| HTMLに測定ID設定 | Google Analytics設定後 | 10分 | 測定ID取得済み |
| 動作確認 | 上記完了後 | 10分 | すべて完了 |
| **合計** | **Phase 0完了後、すぐに実施可能** | **約2時間** | - |

---

## 次のアクション（修正版）

### 最優先（即時実施）

1. **ステップ10-1: PoC説明追加**（30分）
2. **ステップ10-2: Vercelにランディングページをデプロイ**（30分）
   - **重要**: これが先に必要
3. **ステップ10-3: カスタムドメイン設定**（10分）
   - **重要**: これで実際のURLが利用可能になる
4. **ステップ10-4: Google Analytics 4プロパティ作成**（30分）
   - **重要**: デプロイ・カスタムドメイン設定完了後、実際のURLで作成
5. **ステップ10-5: HTMLに測定ID設定**（10分）
6. **ステップ10-6: 動作確認**（10分）

**合計**: 約2時間

### 次優先（並行実施可能）

7. **ステップ11: やどびと多言語優先度アンケート実施**（2時間、並行実施可能）

---

## 結論

### ユーザーの指摘は完全に正しい

1. **Google Analytics 4プロパティ作成には実際のURLが必要**
2. **そのURLを取得するには、まずVercelにデプロイする必要がある**
3. **カスタムドメイン設定も先に完了させる必要がある**

### 修正された順序

```
デプロイ → カスタムドメイン設定 → 実際のURL利用可能 → Google Analytics設定
```

### Render.comについて

- **Render.comのサービス作成は不要**（ランディングページはVercelにデプロイするため）
- Render.comは本番アプリ（FastAPI + Vue.js）用で、Phase 1 Week 4以降に構築予定

---

**Document Version**: v1.0  
**Author**: Air  
**Last Updated**: 2025-11-25  
**Status**: 順序修正完了

