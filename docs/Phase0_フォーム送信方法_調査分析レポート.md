# Phase 0 フォーム送信方法 調査分析レポート

**作成日**: 2025年11月26日  
**目的**: PoC応募フォームの送信方法・送信先の調査分析と推奨案の提示

---

## 現状

### 現在の実装状況

- **フォーム**: HTMLフォーム実装済み（`landing/index.html`内）
- **送信処理**: JavaScriptでプレースホルダー実装（`e.preventDefault()`で送信を阻止）
- **送信先**: 未設定（`console.log`でデータを出力するのみ）
- **送信方法**: 未決定

### フォーム項目

1. 施設名（必須）
2. ご担当者名（必須）
3. メールアドレス（必須）
4. 電話番号（必須）
5. 所在地（都道府県・市区町村）（必須）
6. 外国人ゲスト比率（必須）
7. スタッフ数（必須）
8. 現在の課題・期待する効果（必須）
9. 同意チェックボックス（必須）

---

## 候補サービスの調査分析

### 1. Google Forms

#### 概要
- Googleが提供する無料のフォームサービス
- スプレッドシートに自動保存
- メール通知機能あり

#### メリット
- ✅ **完全無料**
- ✅ **設定が簡単**（5分程度）
- ✅ **スプレッドシートに自動保存**（データ管理が容易）
- ✅ **メール通知**（新規応募時に自動通知）
- ✅ **既存のGoogleアカウントで利用可能**
- ✅ **セキュリティ**（Googleのインフラを使用）

#### デメリット
- ❌ **カスタマイズ性が低い**（Google Formsのデザインに依存）
- ❌ **ブランド統一感が損なわれる**（外部ページへのリダイレクト）
- ❌ **高度な機能が使えない**（条件分岐、バリデーション等）

#### 実装方法
1. Google Formsでフォームを作成
2. 「送信」ボタンの右側の「...」をクリック
3. 「HTMLを取得」を選択
4. `action`属性のURLをコピーして`<form>`タグに設定

#### コスト
- **無料**

#### 推奨度
- **★★☆☆☆（2/5）**
- 理由: カスタマイズ性が低く、ブランド統一感が損なわれる

---

### 2. Formspree

#### 概要
- 無料のフォーム送信サービス
- カスタムHTMLフォームから送信可能
- メール通知機能あり

#### メリット
- ✅ **完全無料**（月50件まで）
- ✅ **カスタムHTMLフォームに対応**（現在のデザインを維持）
- ✅ **メール通知**（新規応募時に自動通知）
- ✅ **スパム対策**（reCAPTCHA統合可能）
- ✅ **設定が簡単**（10分程度）
- ✅ **API連携可能**（将来的にバックエンドAPIに移行しやすい）

#### デメリット
- ❌ **無料プランは月50件まで**（PoC募集では十分）
- ❌ **データ保存はメールのみ**（スプレッドシート連携は有料プラン）
- ❌ **外部サービス依存**

#### 実装方法
1. Formspreeアカウント作成
2. 新しいフォームを作成
3. フォームIDを取得（例: `https://formspree.io/f/YOUR_FORM_ID`）
4. `<form>`タグの`action`属性に設定
5. `method="POST"`を設定

#### コスト
- **無料**（月50件まで）
- **有料プラン**: $10/月（月1,000件、スプレッドシート連携等）

#### 推奨度
- **★★★★☆（4/5）**
- 理由: カスタムHTMLフォームに対応し、現在のデザインを維持できる。無料プランで十分。

---

### 3. バックエンドAPI（やどぺらのFastAPI）

#### 概要
- やどぺらのバックエンドAPIに直接送信
- データベースに保存
- カスタマイズ性が高い

#### メリット
- ✅ **完全なカスタマイズ性**
- ✅ **データベースに直接保存**（管理が容易）
- ✅ **ブランド統一感**（外部サービスに依存しない）
- ✅ **将来的な拡張性**（自動選考、通知機能等）
- ✅ **セキュリティ**（自社管理）

#### デメリット
- ❌ **開発工数が必要**（Phase 1で実装予定）
- ❌ **Phase 0では未実装**（バックエンドAPIが未完成）
- ❌ **デプロイが必要**（ステージング環境または本番環境）

#### 実装方法
1. FastAPIでエンドポイント作成（例: `POST /api/v1/poc/apply`）
2. データベーステーブル作成（`poc_applications`）
3. フロントエンドからAPI呼び出し
4. メール通知機能実装（SendGrid等）

#### コスト
- **開発工数**: 約4-6時間
- **インフラ**: 既存のRender.com環境を使用

#### 推奨度
- **★★★★★（5/5）**（将来的に）
- 理由: 最も理想的だが、Phase 0では未実装のため、現時点では不可。

---

### 4. Netlify Forms

#### 概要
- Netlifyが提供するフォームサービス
- 静的サイトホスティングサービス（Netlify）にデプロイする場合に利用可能

#### メリット
- ✅ **完全無料**（月100件まで）
- ✅ **カスタムHTMLフォームに対応**
- ✅ **スパム対策**（自動）
- ✅ **メール通知**

#### デメリット
- ❌ **Netlifyにデプロイする必要がある**（現在はVercelにデプロイ予定）
- ❌ **Vercelでは利用不可**

#### 実装方法
1. Netlifyにデプロイ
2. `<form>`タグに`netlify`属性を追加
3. 自動でフォーム送信が処理される

#### コスト
- **無料**（月100件まで）

#### 推奨度
- **★☆☆☆☆（1/5）**
- 理由: Vercelにデプロイ予定のため、利用不可。

---

### 5. SendGrid / Mailgun（メール送信のみ）

#### 概要
- メール送信サービス
- バックエンドAPIと組み合わせて使用

#### メリット
- ✅ **高信頼性**
- ✅ **詳細な送信ログ**

#### デメリット
- ❌ **バックエンドAPIが必要**（Phase 0では未実装）
- ❌ **単体ではフォーム送信機能を提供しない**

#### 推奨度
- **★★☆☆☆（2/5）**
- 理由: バックエンドAPIと組み合わせて使用するため、Phase 0では不可。

---

## 推奨案

### 短期（Phase 0完了時点）

**推奨: Formspree**

#### 理由
1. **カスタムHTMLフォームに対応**: 現在のデザインを維持できる
2. **設定が簡単**: 10分程度で設定完了
3. **無料プランで十分**: 月50件まで無料（PoC募集では十分）
4. **メール通知**: 新規応募時に自動通知
5. **将来的な移行が容易**: API連携可能で、バックエンドAPIに移行しやすい

#### 実装手順
1. Formspreeアカウント作成（https://formspree.io/）
2. 新しいフォームを作成
3. フォームIDを取得（例: `https://formspree.io/f/YOUR_FORM_ID`）
4. `landing/index.html`の`<form>`タグを修正:
   ```html
   <form id="poc-form" action="https://formspree.io/f/YOUR_FORM_ID" method="POST" class="space-y-4">
   ```
5. JavaScriptの`e.preventDefault()`を削除（または条件分岐でFormspree送信時は実行しない）
6. 送信成功時の処理を実装（FormspreeはリダイレクトまたはJSONレスポンスを返す）

#### コスト
- **無料**（月50件まで）

#### 注意事項
- フォーム送信後、Formspreeの確認ページにリダイレクトされる可能性がある
- カスタム成功ページを設定する場合は、`_next`パラメータを使用
- スパム対策として、reCAPTCHAを統合することを推奨

---

### 中期（Phase 1完了後）

**推奨: バックエンドAPI（やどぺらのFastAPI）**

#### 理由
1. **完全なカスタマイズ性**: ブランド統一感を維持
2. **データ管理**: データベースに直接保存、管理が容易
3. **将来的な拡張性**: 自動選考、通知機能等を実装可能
4. **セキュリティ**: 自社管理

#### 実装手順
1. FastAPIでエンドポイント作成（`POST /api/v1/poc/apply`）
2. データベーステーブル作成（`poc_applications`）
3. バリデーション実装
4. メール通知機能実装（SendGrid等）
5. フロントエンドからAPI呼び出し

#### コスト
- **開発工数**: 約4-6時間
- **インフラ**: 既存のRender.com環境を使用

---

## 比較表

| 項目 | Google Forms | Formspree | バックエンドAPI | Netlify Forms |
|------|-------------|-----------|----------------|---------------|
| **コスト** | 無料 | 無料（月50件） | 開発工数必要 | 無料（月100件） |
| **カスタマイズ性** | 低 | 高 | 最高 | 高 |
| **設定の簡単さ** | 簡単 | 簡単 | 複雑 | 簡単 |
| **ブランド統一感** | 低 | 高 | 最高 | 高 |
| **データ管理** | スプレッドシート | メール | データベース | ダッシュボード |
| **Phase 0で利用可能** | ✅ | ✅ | ❌ | ❌ |
| **将来的な拡張性** | 低 | 中 | 高 | 中 |

---

## 最終推奨

### Phase 0完了時点（即座に実装可能）

**Formspreeを推奨**

1. **理由**: カスタムHTMLフォームに対応し、現在のデザインを維持できる
2. **設定時間**: 約10分
3. **コスト**: 無料（月50件まで）
4. **移行の容易さ**: 将来的にバックエンドAPIに移行しやすい

### Phase 1完了後（将来的な移行）

**バックエンドAPI（やどぺらのFastAPI）に移行**

1. **理由**: 完全なカスタマイズ性とデータ管理
2. **実装時期**: Phase 1 Week 4（統合・テスト）またはPhase 2開始時
3. **コスト**: 開発工数約4-6時間

---

## 実装時の注意事項

### Formspree実装時

1. **スパム対策**: reCAPTCHAを統合することを推奨
2. **カスタム成功ページ**: `_next`パラメータを使用してカスタム成功ページを設定
3. **エラーハンドリング**: 送信失敗時の処理を実装
4. **Google Analytics連携**: フォーム送信イベントのトラッキングは既に実装済み

### バックエンドAPI実装時

1. **バリデーション**: サーバー側でのバリデーション実装
2. **セキュリティ**: CSRF対策、レート制限等
3. **メール通知**: SendGrid等を使用してメール通知機能実装
4. **データ管理**: 管理画面での応募一覧表示機能

---

## 次のアクション

### 即座に実施可能（Phase 0完了時点）

1. **Formspreeアカウント作成**
2. **フォームID取得**
3. **HTMLフォームの修正**（`action`属性の設定）
4. **動作確認**

### Phase 1完了後

1. **バックエンドAPI実装**（`POST /api/v1/poc/apply`）
2. **データベーステーブル作成**（`poc_applications`）
3. **メール通知機能実装**
4. **FormspreeからバックエンドAPIへの移行**

---

**Document Version**: v1.0  
**Author**: Air  
**Last Updated**: 2025-11-26  
**Status**: 調査分析完了、推奨案提示


