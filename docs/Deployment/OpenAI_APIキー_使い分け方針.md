# OpenAI APIキー 使い分け方針

---

## 基本的な考え方

### 推奨: アプリ・環境ごとにキーを分ける

**理由**:
1. **セキュリティ**: キーが漏洩した場合の影響範囲を限定できる
2. **使用量追跡**: アプリごと・環境ごとの使用量を追跡しやすい
3. **管理の容易さ**: 問題が発生した場合、該当するキーだけ無効化できる
4. **コスト管理**: アプリごとのコストを把握しやすい

---

## やどぺらの場合

### 推奨されるキー構成

1. **ステージング環境用キー**（今回作成）
   - 名前: `yadopera-staging`
   - 用途: ステージング環境でのテスト・開発

2. **本番環境用キー**（Phase 4で作成予定）
   - 名前: `yadopera-production`
   - 用途: 本番環境での実際の運用

### 理由

- 環境ごとに使用量を追跡できる
- ステージング環境で問題が発生しても、本番環境に影響しない
- コスト管理がしやすい

---

## 他のアプリの場合

### 推奨: 新しいキーを作成

**理由**:
- やどぺらとは独立して管理できる
- 使用量を個別に追跡できる
- セキュリティリスクを分散できる

### 例外: 開発・テスト用途

開発・テスト用途で同じキーを使うことも可能です（コスト削減のため）。ただし、本番環境では別のキーを使用することを推奨します。

---

## まとめ

| 用途 | キーの使い分け | 理由 |
|------|--------------|------|
| やどぺら ステージング | 専用キー | 使用量追跡、セキュリティ |
| やどぺら 本番 | 専用キー | 使用量追跡、セキュリティ |
| 他のアプリ | 新しいキー | 独立した管理、セキュリティ |

---

## 次のステップ

1. ステージング環境用キー（`yadopera-staging`）を作成
2. Render.comの`OPENAI_API_KEY`環境変数に設定
3. 本番環境用キーはPhase 4で作成

