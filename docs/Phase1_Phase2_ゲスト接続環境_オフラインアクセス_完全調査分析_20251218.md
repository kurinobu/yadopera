# Phase 1ãƒ»Phase 2: ã‚²ã‚¹ãƒˆæ¥ç¶šç’°å¢ƒãƒ»ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã‚¢ã‚¯ã‚»ã‚¹å®Œå…¨èª¿æŸ»åˆ†æ

**ä½œæˆæ—¥æ™‚**: 2025å¹´12æœˆ18æ—¥  
**å®Ÿæ–½è€…**: AI Assistant  
**ç›®çš„**: ã‚²ã‚¹ãƒˆã®å®Ÿéš›ã®æ¥ç¶šç’°å¢ƒã‚’è€ƒæ…®ã—ã€QRã‚³ãƒ¼ãƒ‰èª­ã¿å–ã‚Šã¨ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã‚’å®Œå…¨ã«èª¿æŸ»åˆ†æã—ã€è§£æ±ºç­–ã‚’ææ¡ˆ  
**çŠ¶æ…‹**: ğŸ“‹ **å®Œå…¨èª¿æŸ»åˆ†æå®Œäº†ãƒ»è§£æ±ºç­–ææ¡ˆå®Œäº†**

**é‡è¦**: æŒ‡ç¤ºãŒã‚ã‚‹ã¾ã§ä¿®æ­£ã‚’å®Ÿæ–½ã—ã¾ã›ã‚“ã€‚èª¿æŸ»åˆ†æã¨ææ¡ˆã®ã¿ã§ã™ã€‚

---

## 1. èª¿æŸ»ç›®çš„

### 1.1 å•é¡Œã®èƒŒæ™¯

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•**:
> å®Ÿéš›ã®ã‚²ã‚¹ãƒˆã®æ¥ç¶šç’°å¢ƒã‚’è€ƒãˆã¦ã¿ã¾ã™ã€‚
> 
> ã‚²ã‚¹ãƒˆã®ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ãŒã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šã•ã‚Œã¦ã„ãªã„çŠ¶æ…‹ã§å®¿æ³Šæ–½è¨­ãŒè¨­ç½®ã—ãŸQRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿è¾¼ã‚“ã§ã€ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ
> 
> ã‚²ã‚¹ãƒˆãŒã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹æ–¹æ³•ã‚’è‰²ã€…æƒ³å®šã—ã¦æ¤œè¨ãŒå¿…è¦ã§ã™ã€‚
> 
> æ—¢ã«ä¸€åº¦QRã‚³ãƒ¼ãƒ‰ã§èª­ã¿å–ã£ãŸã‚¢ã‚¯ã‚»ã‚¹å…ˆã‚’ä¿å­˜ã—ã¦ãŠã„ã¦ã€ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

**èª¿æŸ»ã™ã¹ãé …ç›®**:
1. QRã‚³ãƒ¼ãƒ‰èª­ã¿å–ã‚Šæ™‚ã®å‹•ä½œï¼ˆåˆå›ã‚¢ã‚¯ã‚»ã‚¹ï¼‰
2. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒªãƒ­ãƒ¼ãƒ‰å‹•ä½œï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ï¼‰
3. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®APIå‘¼ã³å‡ºã—ï¼ˆå¤±æ•—ã™ã‚‹ï¼‰
4. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“è¨­è¨ˆ
5. Service Workerã®å†æœ‰åŠ¹åŒ–ã¨é©åˆ‡ãªè¨­å®š

---

## 2. QRã‚³ãƒ¼ãƒ‰èª­ã¿å–ã‚Šæ™‚ã®å‹•ä½œ

### 2.1 QRã‚³ãƒ¼ãƒ‰ã®ä»•çµ„ã¿

**QRã‚³ãƒ¼ãƒ‰ã®å†…å®¹**:
- QRã‚³ãƒ¼ãƒ‰ã¯URLã‚’æŒ‡ã—ã¦ã„ã‚‹ï¼ˆä¾‹: `https://yadopera-frontend-staging.onrender.com/f/test-facility?location=entrance`ï¼‰
- QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã‚‹ã¨ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒãã®URLã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹

**åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã®å‹•ä½œ**:
1. **QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã‚‹** â†’ ãƒ–ãƒ©ã‚¦ã‚¶ãŒURLã«ã‚¢ã‚¯ã‚»ã‚¹
2. **Vue RouterãŒãƒ«ãƒ¼ãƒˆã‚’è§£æ±º** â†’ `/f/:facilityId` â†’ `Welcome.vue`ã¾ãŸã¯`Chat.vue`ãŒè¡¨ç¤ºã•ã‚Œã‚‹
3. **`onMounted`ã§æ–½è¨­æƒ…å ±ã‚’å–å¾—** â†’ `facilityApi.getFacility(slug, location.value)`ã‚’å‘¼ã³å‡ºã—
4. **APIå‘¼ã³å‡ºã—** â†’ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‹ã‚‰æ–½è¨­æƒ…å ±ã‚’å–å¾—
5. **ç”»é¢è¡¨ç¤º** â†’ æ–½è¨­æƒ…å ±ã€ã‚ˆãã‚ã‚‹è³ªå•ã€ãƒãƒ£ãƒƒãƒˆç”»é¢ãªã©ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### 2.2 åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã®å¿…è¦æ¡ä»¶

**å¿…é ˆæ¡ä»¶**:
- âœ… **ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒå¿…è¦**ï¼ˆQRã‚³ãƒ¼ãƒ‰ã¯URLã‚’æŒ‡ã—ã¦ã„ã‚‹ãŸã‚ï¼‰
- âœ… **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã¸ã®æ¥ç¶šãŒå¿…è¦**ï¼ˆæ–½è¨­æƒ…å ±ã®å–å¾—ã«å¿…è¦ï¼‰

**ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å‹•ä½œ**:
- âŒ **QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã£ã¦ã‚‚ã€URLã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„**
- âŒ **ãƒ–ãƒ©ã‚¦ã‚¶ãŒã€Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€ã¨è¡¨ç¤º**
- âŒ **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯èµ·å‹•ã—ãªã„**

### 2.3 çµè«–: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®QRã‚³ãƒ¼ãƒ‰èª­ã¿å–ã‚Š

**çµè«–**: **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã«QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã£ã¦ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã¯ä¸å¯èƒ½**

**ç†ç”±**:
1. QRã‚³ãƒ¼ãƒ‰ã¯URLã‚’æŒ‡ã—ã¦ãŠã‚Šã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒå¿…è¦
2. ãƒ–ãƒ©ã‚¦ã‚¶ãŒURLã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„å ´åˆã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯èµ·å‹•ã—ãªã„
3. åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã¯ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã¸ã®æ¥ç¶šãŒå¿…è¦

---

## 3. ã‚²ã‚¹ãƒˆã®ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã®æƒ³å®š

### 3.1 ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã®ã‚·ãƒŠãƒªã‚ª

#### ã‚·ãƒŠãƒªã‚ª1: QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã£ã¦åˆå›ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¿…é ˆï¼‰

**ãƒ•ãƒ­ãƒ¼**:
```
1. ã‚²ã‚¹ãƒˆãŒQRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã‚‹
   â†“
2. ãƒ–ãƒ©ã‚¦ã‚¶ãŒURLã«ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¿…é ˆï¼‰
   â†“
3. Vue RouterãŒãƒ«ãƒ¼ãƒˆã‚’è§£æ±º
   â†“
4. Welcome.vueã¾ãŸã¯Chat.vueãŒè¡¨ç¤ºã•ã‚Œã‚‹
   â†“
5. onMountedã§æ–½è¨­æƒ…å ±ã‚’å–å¾—ï¼ˆAPIå‘¼ã³å‡ºã—ï¼‰
   â†“
6. ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
```

**å¿…è¦æ¡ä»¶**:
- âœ… ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒå¿…è¦
- âœ… ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã¸ã®æ¥ç¶šãŒå¿…è¦

**ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å‹•ä½œ**:
- âŒ ãƒ–ãƒ©ã‚¦ã‚¶ãŒã€Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€ã¨è¡¨ç¤º
- âŒ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯èµ·å‹•ã—ãªã„

#### ã‚·ãƒŠãƒªã‚ª2: ä¸€åº¦ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸå¾Œã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆPWAã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ç”¨ï¼‰

**ãƒ•ãƒ­ãƒ¼**:
```
1. ã‚²ã‚¹ãƒˆãŒQRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã£ã¦åˆå›ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆã‚ªãƒ³ãƒ©ã‚¤ãƒ³ï¼‰
   â†“
2. Service WorkerãŒé™çš„ãƒªã‚½ãƒ¼ã‚¹ï¼ˆHTMLã€CSSã€JSï¼‰ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥
   â†“
3. ã‚²ã‚¹ãƒˆãŒã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã«ãªã‚‹ï¼ˆWiFiæ¥ç¶šãŒåˆ‡ã‚Œã‚‹ãªã©ï¼‰
   â†“
4. ã‚²ã‚¹ãƒˆãŒãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãƒªãƒ­ãƒ¼ãƒ‰
   â†“
5. Service WorkerãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰é™çš„ãƒªã‚½ãƒ¼ã‚¹ã‚’è¿”ã™
   â†“
6. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã™ã‚‹ï¼ˆãŸã ã—ã€APIå‘¼ã³å‡ºã—ã¯å¤±æ•—ï¼‰
```

**å¿…è¦æ¡ä»¶**:
- âœ… åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã¯ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹
- âœ… Service WorkerãŒæœ‰åŠ¹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ˆç¾åœ¨ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ï¼‰

**ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³**:
- âŒ Service WorkerãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ï¼ˆ`vite.config.ts`ã§`disable: true`ï¼‰
- âŒ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®é™çš„ãƒªã‚½ãƒ¼ã‚¹è¡¨ç¤ºãŒã§ããªã„

**ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å‹•ä½œï¼ˆç¾åœ¨ï¼‰**:
- âŒ Service WorkerãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã¯ä½•ã‚‚è¡¨ç¤ºã§ããªã„
- âŒ ãƒ–ãƒ©ã‚¦ã‚¶ãŒã€Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€ã¨è¡¨ç¤º

**ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å‹•ä½œï¼ˆService Workeræœ‰åŠ¹åŒ–å¾Œï¼‰**:
- âœ… é™çš„ãƒªã‚½ãƒ¼ã‚¹ï¼ˆHTMLã€CSSã€JSï¼‰ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰è¡¨ç¤ºã§ãã‚‹
- âŒ APIå‘¼ã³å‡ºã—ï¼ˆæ–½è¨­æƒ…å ±å–å¾—ã€AIå›ç­”ç”Ÿæˆãªã©ï¼‰ã¯å¤±æ•—ã™ã‚‹
- âŒ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ¤œå‡ºæ©Ÿèƒ½ãŒãªã„ãŸã‚ã€é©åˆ‡ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œãªã„

#### ã‚·ãƒŠãƒªã‚ª3: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã«QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã‚‹ï¼ˆä¸å¯èƒ½ï¼‰

**çµè«–**: **ä¸å¯èƒ½**

**ç†ç”±**:
- QRã‚³ãƒ¼ãƒ‰ã¯URLã‚’æŒ‡ã—ã¦ãŠã‚Šã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒå¿…è¦
- ãƒ–ãƒ©ã‚¦ã‚¶ãŒURLã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„å ´åˆã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯èµ·å‹•ã—ãªã„

### 3.2 ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ã®ã¾ã¨ã‚

| ã‚·ãƒŠãƒªã‚ª | åˆå›ã‚¢ã‚¯ã‚»ã‚¹ | ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ãƒªãƒ­ãƒ¼ãƒ‰ | ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³ |
|---------|------------|------------------|--------------|
| **ã‚·ãƒŠãƒªã‚ª1**: QRã‚³ãƒ¼ãƒ‰èª­ã¿å–ã‚Šï¼ˆåˆå›ï¼‰ | âœ… å¯èƒ½ï¼ˆã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¿…é ˆï¼‰ | N/A | âœ… å®Ÿè£…æ¸ˆã¿ |
| **ã‚·ãƒŠãƒªã‚ª2**: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ãƒªãƒ­ãƒ¼ãƒ‰ | âœ… å¯èƒ½ï¼ˆåˆå›ã¯ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ï¼‰ | âš ï¸ éƒ¨åˆ†çš„ã«å¯èƒ½ï¼ˆService Workerç„¡åŠ¹åŒ–ä¸­ï¼‰ | âš ï¸ Service Workerç„¡åŠ¹åŒ–ä¸­ |
| **ã‚·ãƒŠãƒªã‚ª3**: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚QRã‚³ãƒ¼ãƒ‰èª­ã¿å–ã‚Š | âŒ ä¸å¯èƒ½ | N/A | N/A |

---

## 4. ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³

### 4.1 PWAã®å®Ÿè£…çŠ¶æ³

**`frontend/vite.config.ts`**:
```typescript
VitePWA({
  disable: true  // â† ç¾åœ¨ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹
})
```

**ä»¥å‰ã®å®Ÿè£…**ï¼ˆ`vite.config.ts.bak_20251217_171538`ï¼‰:
```typescript
VitePWA({
  registerType: 'autoUpdate',
  workbox: {
    globPatterns: ['**/*.{js,css,html,ico,png,svg}'],
    runtimeCaching: [
      {
        urlPattern: /\/api\/v1\/admin\/.*$/,
        handler: 'NetworkOnly',
        method: 'GET'
      }
    ]
  },
  manifest: {
    name: 'ã‚„ã©ãºã‚‰',
    short_name: 'ã‚„ã©ãºã‚‰',
    description: 'å°è¦æ¨¡å®¿æ³Šæ–½è¨­å‘ã‘AIå¤šè¨€èªè‡ªå‹•æ¡ˆå†…ã‚·ã‚¹ãƒ†ãƒ ',
    theme_color: '#ffffff',
    icons: [
      {
        src: 'pwa-192x192.png',
        sizes: '192x192',
        type: 'image/png'
      },
      {
        src: 'pwa-512x512.png',
        sizes: '512x512',
        type: 'image/png'
      }
    ]
  }
})
```

**ç„¡åŠ¹åŒ–ã®ç†ç”±**:
- ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³çœŸã£ç™½ç”»é¢å•é¡Œã®è¨ºæ–­ã®ãŸã‚ï¼ˆ2025å¹´12æœˆ18æ—¥ï¼‰
- Service Workerã®å£Šã‚ŒãŸã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒåŸå› ã§ã‚ã‚‹å¯èƒ½æ€§ã‚’è¨ºæ–­

### 4.2 ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ¤œå‡ºã®å®Ÿè£…çŠ¶æ³

**ç¢ºèªçµæœ**: âŒ **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ¤œå‡ºæ©Ÿèƒ½ã¯å®Ÿè£…ã•ã‚Œã¦ã„ãªã„**

**ç¢ºèªå†…å®¹**:
- `navigator.onLine`ã®ä½¿ç”¨: âŒ ä½¿ç”¨ã•ã‚Œã¦ã„ãªã„
- `useOffline.ts`ã‚³ãƒ³ãƒãƒ¼ã‚¶ãƒ–ãƒ«: âŒ å­˜åœ¨ã—ãªã„
- `online`/`offline`ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒªãƒƒã‚¹ãƒ³: âŒ å®Ÿè£…ã•ã‚Œã¦ã„ãªã„
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å°‚ç”¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: âŒ å®Ÿè£…ã•ã‚Œã¦ã„ãªã„

### 4.3 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å®Ÿè£…çŠ¶æ³

**ç¾åœ¨ã®å®Ÿè£…**:
- âœ… ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã®æ¤œå‡ºï¼ˆ`axios`ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼‰
- âœ… ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤ºï¼ˆã€Œãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ã€ï¼‰
- âŒ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³çŠ¶æ…‹ã®æ¤œå‡ºï¼ˆ`navigator.onLine`ï¼‰
- âŒ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å°‚ç”¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
- âŒ ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã«ã™ã‚‹æ–¹æ³•ã®æ¡ˆå†…
- âŒ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ä½¿ç”¨ã®è¨˜éŒ²ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ï¼‰

---

## 5. å•é¡Œç‚¹ã®æ•´ç†

### 5.1 å•é¡Œç‚¹1: Service WorkerãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹

**å•é¡Œ**:
- Service WorkerãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®é™çš„ãƒªã‚½ãƒ¼ã‚¹è¡¨ç¤ºãŒã§ããªã„
- ä¸€åº¦ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸå¾Œã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚‚ã€ä½•ã‚‚è¡¨ç¤ºã§ããªã„

**å½±éŸ¿**:
- ã‚²ã‚¹ãƒˆãŒä¸€åº¦ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸå¾Œã€WiFiæ¥ç¶šãŒåˆ‡ã‚ŒãŸå ´åˆã€ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚‚ä½•ã‚‚è¡¨ç¤ºã§ããªã„
- PWAã®ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œæ©Ÿèƒ½ãŒæ©Ÿèƒ½ã—ã¦ã„ãªã„

### 5.2 å•é¡Œç‚¹2: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ¤œå‡ºæ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¦ã„ãªã„

**å•é¡Œ**:
- `navigator.onLine`ã‚’ä½¿ç”¨ã—ãŸã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ¤œå‡ºãŒå®Ÿè£…ã•ã‚Œã¦ã„ãªã„
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å°‚ç”¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒãªã„

**å½±éŸ¿**:
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã«ã€Œæ–½è¨­æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€ã¨è¡¨ç¤ºã•ã‚Œã€ã‚²ã‚¹ãƒˆã¯ã€Œã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼ã€ã¨èª¤èªã™ã‚‹
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³çŠ¶æ…‹ã§ã‚ã‚‹ã“ã¨ã‚’ä¼ãˆã‚‹ã“ã¨ãŒã§ããªã„

### 5.3 å•é¡Œç‚¹3: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ãŒè¨­è¨ˆã•ã‚Œã¦ã„ãªã„

**å•é¡Œ**:
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å°‚ç”¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒãªã„
- ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã«ã™ã‚‹æ–¹æ³•ã®æ¡ˆå†…ãŒãªã„
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã¯AIå›ç­”ãŒç”Ÿæˆã§ããªã„ã“ã¨ã‚’ä¼ãˆã¦ã„ãªã„
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ä½¿ç”¨ã®è¨˜éŒ²ãŒãªã„

**å½±éŸ¿**:
- ã‚²ã‚¹ãƒˆãŒã‚ªãƒ•ãƒ©ã‚¤ãƒ³çŠ¶æ…‹ã§ã‚ã‚‹ã“ã¨ã‚’ç†è§£ã§ããªã„
- ã‚²ã‚¹ãƒˆãŒé©åˆ‡ãªå¯¾å¿œï¼ˆWiFiæ¥ç¶šã®ç¢ºèªãªã©ï¼‰ã‚’å–ã‚Œãªã„

---

## 6. è§£æ±ºç­–ã®ææ¡ˆ

### 6.1 è§£æ±ºç­–ã®å…¨ä½“åƒ

**3ã¤ã®æ®µéšçš„ãªè§£æ±ºç­–**:

1. **æ®µéš1: Service Workerã®å†æœ‰åŠ¹åŒ–ã¨é©åˆ‡ãªè¨­å®š**
   - Service Workerã‚’å†æœ‰åŠ¹åŒ–
   - é™çš„ãƒªã‚½ãƒ¼ã‚¹ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®š
   - APIå‘¼ã³å‡ºã—ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

2. **æ®µéš2: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ¤œå‡ºæ©Ÿèƒ½ã®å®Ÿè£…**
   - `useOffline.ts`ã‚³ãƒ³ãƒãƒ¼ã‚¶ãƒ–ãƒ«ã®ä½œæˆ
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³çŠ¶æ…‹ã®æ¤œå‡º
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å°‚ç”¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

3. **æ®µéš3: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®æ”¹å–„**
   - ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã«ã™ã‚‹æ–¹æ³•ã®æ¡ˆå†…
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã¯AIå›ç­”ãŒç”Ÿæˆã§ããªã„ã“ã¨ã‚’ä¼ãˆã‚‹
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ä½¿ç”¨ã®è¨˜éŒ²ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ï¼‰

### 6.2 æ®µéš1: Service Workerã®å†æœ‰åŠ¹åŒ–ã¨é©åˆ‡ãªè¨­å®š

#### 6.2.1 Service Workerã®å†æœ‰åŠ¹åŒ–

**å®Ÿè£…å†…å®¹**:
```typescript
// frontend/vite.config.ts
VitePWA({
  registerType: 'autoUpdate',
  workbox: {
    globPatterns: ['**/*.{js,css,html,ico,png,svg}'],
    // ã‚²ã‚¹ãƒˆAPIã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ãªã„ï¼ˆå¸¸ã«æœ€æ–°ã‚’å–å¾—ï¼‰
    runtimeCaching: [
      {
        urlPattern: /\/api\/v1\/admin\/.*$/,
        handler: 'NetworkOnly',
        method: 'GET'
      },
      {
        urlPattern: /\/api\/v1\/facility\/.*$/,
        handler: 'NetworkFirst',  // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å„ªå…ˆã€å¤±æ•—æ™‚ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥
        options: {
          cacheName: 'facility-cache',
          expiration: {
            maxEntries: 10,
            maxAgeSeconds: 60 * 60 * 24  // 24æ™‚é–“
          }
        }
      }
    ]
  },
  manifest: {
    name: 'ã‚„ã©ãºã‚‰',
    short_name: 'ã‚„ã©ãºã‚‰',
    description: 'å°è¦æ¨¡å®¿æ³Šæ–½è¨­å‘ã‘AIå¤šè¨€èªè‡ªå‹•æ¡ˆå†…ã‚·ã‚¹ãƒ†ãƒ ',
    theme_color: '#ffffff',
    icons: [
      {
        src: 'pwa-192x192.png',
        sizes: '192x192',
        type: 'image/png'
      },
      {
        src: 'pwa-512x512.png',
        sizes: '512x512',
        type: 'image/png'
      }
    ]
  }
})
```

**åŠ¹æœ**:
- âœ… ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®é™çš„ãƒªã‚½ãƒ¼ã‚¹ï¼ˆHTMLã€CSSã€JSï¼‰ãŒè¡¨ç¤ºã§ãã‚‹
- âœ… ä¸€åº¦ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸå¾Œã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚‚ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã™ã‚‹

#### 6.2.2 ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã®è¨­è¨ˆ

**é™çš„ãƒªã‚½ãƒ¼ã‚¹**:
- **æˆ¦ç•¥**: `CacheFirst`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- **ç†ç”±**: é™çš„ãƒªã‚½ãƒ¼ã‚¹ã¯å¤‰æ›´é »åº¦ãŒä½ãã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰é«˜é€Ÿã«è¡¨ç¤ºã§ãã‚‹

**æ–½è¨­æƒ…å ±API**:
- **æˆ¦ç•¥**: `NetworkFirst`
- **ç†ç”±**: æ–½è¨­æƒ…å ±ã¯æ›´æ–°ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å„ªå…ˆ
- **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å¤±æ•—æ™‚ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰å–å¾—

**AIå›ç­”ç”ŸæˆAPI**:
- **æˆ¦ç•¥**: `NetworkOnly`
- **ç†ç”±**: AIå›ç­”ã¯å¸¸ã«æœ€æ–°ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚**: ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ¤œå‡ºæ©Ÿèƒ½ã§å‡¦ç†ï¼‰

### 6.3 æ®µéš2: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ¤œå‡ºæ©Ÿèƒ½ã®å®Ÿè£…

#### 6.3.1 `useOffline.ts`ã‚³ãƒ³ãƒãƒ¼ã‚¶ãƒ–ãƒ«ã®ä½œæˆ

**å®Ÿè£…å†…å®¹**:
```typescript
// frontend/src/composables/useOffline.ts
import { ref, onMounted, onUnmounted } from 'vue'

export function useOffline() {
  const isOffline = ref(!navigator.onLine)
  
  const handleOnline = () => {
    isOffline.value = false
  }
  
  const handleOffline = () => {
    isOffline.value = true
  }
  
  onMounted(() => {
    window.addEventListener('online', handleOnline)
    window.addEventListener('offline', handleOffline)
  })
  
  onUnmounted(() => {
    window.removeEventListener('online', handleOnline)
    window.removeEventListener('offline', handleOffline)
  })
  
  return { isOffline }
}
```

**åŠ¹æœ**:
- âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã‚ªãƒ•ãƒ©ã‚¤ãƒ³çŠ¶æ…‹ã‚’æ¤œå‡º
- âœ… `online`/`offline`ã‚¤ãƒ™ãƒ³ãƒˆã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çŠ¶æ…‹ã®å¤‰åŒ–ã‚’æ¤œå‡º

#### 6.3.2 ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å°‚ç”¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

**å®Ÿè£…å†…å®¹**:
```vue
<!-- frontend/src/views/guest/Chat.vue -->
<template>
  <div class="flex flex-col h-screen bg-gray-50 dark:bg-gray-900">
    <!-- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å°‚ç”¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
    <div
      v-if="isOffline"
      class="flex-shrink-0 bg-yellow-50 dark:bg-yellow-900/20 border-b border-yellow-200 dark:border-yellow-800 px-4 py-3"
    >
      <div class="flex items-start space-x-3">
        <svg class="w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
        <div class="flex-1">
          <p class="text-sm font-medium text-yellow-900 dark:text-yellow-300">
            ç¾åœ¨ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã™ / Currently Offline
          </p>
          <p class="text-xs text-yellow-800 dark:text-yellow-400 mt-1">
            ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ / Please check your internet connection
          </p>
          <p class="text-xs text-yellow-700 dark:text-yellow-500 mt-1">
            ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã¯ã€AIå›ç­”ãŒç”Ÿæˆã§ãã¾ã›ã‚“ / AI responses cannot be generated while offline
          </p>
        </div>
      </div>
    </div>
    
    <!-- æ—¢å­˜ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    ...
  </div>
</template>

<script setup lang="ts">
import { useOffline } from '@/composables/useOffline'

const { isOffline } = useOffline()
// ...
</script>
```

**åŠ¹æœ**:
- âœ… ã‚ªãƒ•ãƒ©ã‚¤ãƒ³çŠ¶æ…‹ã§ã‚ã‚‹ã“ã¨ã‚’æ˜ç¢ºã«ä¼ãˆã‚‹
- âœ… ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã«ã™ã‚‹æ–¹æ³•ã‚’æ¡ˆå†…
- âœ… ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã¯AIå›ç­”ãŒç”Ÿæˆã§ããªã„ã“ã¨ã‚’ä¼ãˆã‚‹

### 6.4 æ®µéš3: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®æ”¹å–„

#### 6.4.1 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ”¹å–„

**å®Ÿè£…å†…å®¹**:
```typescript
// frontend/src/views/guest/Chat.vue
import { useOffline } from '@/composables/useOffline'

const { isOffline } = useOffline()

onMounted(async () => {
  try {
    if (!facilityStore.currentFacility) {
      const slug = route.params.facilityId as string
      try {
        const response = await facilityApi.getFacility(slug, location.value)
        facilityStore.setFacility(response.facility)
        facilityStore.setTopQuestions(response.top_questions)
      } catch (err: any) {
        console.error('[Chat.vue] onMounted: æ–½è¨­æƒ…å ±å–å¾—ã‚¨ãƒ©ãƒ¼', err)
        
        // ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å°‚ç”¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        if (isOffline.value || err.code === 'NETWORK_ERROR') {
          error.value = 'ç¾åœ¨ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã™ã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚'
        } else {
          error.value = 'æ–½è¨­æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ'
        }
        return
      }
    }
  } catch (err) {
    console.error('[Chat.vue] onMounted: ã‚¨ãƒ©ãƒ¼', err)
    error.value = 'ãƒãƒ£ãƒƒãƒˆã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ'
  }
})
```

**åŠ¹æœ**:
- âœ… ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã¯å°‚ç”¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
- âœ… ãã®ä»–ã®ã‚¨ãƒ©ãƒ¼ã¨ã¯åŒºåˆ¥ã—ã¦è¡¨ç¤º

#### 6.4.2 ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ä½¿ç”¨ã®è¨˜éŒ²ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ï¼‰

**å®Ÿè£…å†…å®¹**:
```typescript
// frontend/src/views/guest/Chat.vue
const handleMessageSubmit = async (message: string) => {
  // ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã‚’ãƒ–ãƒ­ãƒƒã‚¯
  if (isOffline.value) {
    error.value = 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã§ãã¾ã›ã‚“ã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚'
    return
  }
  
  try {
    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡å‡¦ç†
    const response = await sendMessage({
      facility_id: facilityId.value,
      message: message.trim(),
      language: language.value,
      location: location.value,
      session_id: currentSessionId || undefined
    })
  } catch (err: any) {
    // ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
    if (isOffline.value || err.code === 'NETWORK_ERROR') {
      error.value = 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã§ãã¾ã›ã‚“ã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚'
      
      // ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ä½¿ç”¨ã®è¨˜éŒ²ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã«é€ä¿¡ï¼‰
      // TODO: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ä½¿ç”¨ã®è¨˜éŒ²APIã‚’å®Ÿè£…
      // await recordOfflineUsage({
      //   facility_id: facilityId.value,
      //   session_id: currentSessionId,
      //   timestamp: new Date().toISOString()
      // })
    } else {
      error.value = err.message || 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ'
    }
  }
}
```

**åŠ¹æœ**:
- âœ… ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã‚’ãƒ–ãƒ­ãƒƒã‚¯
- âœ… ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ä½¿ç”¨ã®è¨˜éŒ²ï¼ˆå°†æ¥ã®å®Ÿè£…ï¼‰

---

## 7. å®Ÿè£…ã®å„ªå…ˆé †ä½

### 7.1 æœ€å„ªå…ˆ: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ¤œå‡ºæ©Ÿèƒ½ã®å®Ÿè£…

**ç†ç”±**:
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã«é©åˆ‡ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ãŒå¤§å¹…ã«æ”¹å–„ã•ã‚Œã‚‹
- å®Ÿè£…ãŒæ¯”è¼ƒçš„ç°¡å˜ã§ã€åŠ¹æœãŒå¤§ãã„

**å®Ÿè£…å†…å®¹**:
1. `useOffline.ts`ã‚³ãƒ³ãƒãƒ¼ã‚¶ãƒ–ãƒ«ã®ä½œæˆ
2. `Chat.vue`ã¨`Welcome.vue`ã§ã®ä½¿ç”¨
3. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å°‚ç”¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

### 7.2 é«˜å„ªå…ˆåº¦: Service Workerã®å†æœ‰åŠ¹åŒ–

**ç†ç”±**:
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®é™çš„ãƒªã‚½ãƒ¼ã‚¹è¡¨ç¤ºã‚’å¯èƒ½ã«ã™ã‚‹
- ãŸã ã—ã€ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³çœŸã£ç™½ç”»é¢å•é¡ŒãŒè§£æ±ºã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚‹

**å®Ÿè£…å†…å®¹**:
1. Service Workerã®å†æœ‰åŠ¹åŒ–
2. é©åˆ‡ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã®è¨­å®š
3. å‹•ä½œç¢ºèª

### 7.3 ä¸­å„ªå…ˆåº¦: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®æ”¹å–„

**ç†ç”±**:
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ”¹å–„
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ä½¿ç”¨ã®è¨˜éŒ²ï¼ˆå°†æ¥ã®å®Ÿè£…ï¼‰

**å®Ÿè£…å†…å®¹**:
1. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ”¹å–„
2. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒ–ãƒ­ãƒƒã‚¯
3. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ä½¿ç”¨ã®è¨˜éŒ²ï¼ˆå°†æ¥ã®å®Ÿè£…ï¼‰

---

## 8. å®Ÿè£…ã®æ³¨æ„äº‹é …

### 8.1 å¤§åŸå‰‡ã®éµå®ˆ

1. **æ ¹æœ¬è§£æ±º > æš«å®šè§£æ±º**:
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ¤œå‡ºæ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€æ ¹æœ¬çš„ã«è§£æ±ºã™ã‚‹
   - æš«å®šå¯¾å¿œï¼ˆã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¤‰æ›´ã®ã¿ï¼‰ã¯é¿ã‘ã‚‹

2. **ã‚·ãƒ³ãƒ—ãƒ«æ§‹é€  > è¤‡é›‘æ§‹é€ **:
   - `useOffline.ts`ã‚³ãƒ³ãƒãƒ¼ã‚¶ãƒ–ãƒ«ã‚’1ã¤ä½œæˆã™ã‚‹ã ã‘
   - è¤‡é›‘ãªå®Ÿè£…ã¯é¿ã‘ã‚‹

3. **å…·ä½“çš„ > ä¸€èˆ¬**:
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å°‚ç”¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…·ä½“çš„ã«è¡¨ç¤ºã™ã‚‹
   - æŠ½è±¡çš„ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯é¿ã‘ã‚‹

4. **æ‹™é€Ÿ < å®‰å…¨ç¢ºå®Ÿ**:
   - ååˆ†ãªãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã™ã‚‹
   - Dockerç’°å¢ƒã§å‹•ä½œç¢ºèªã™ã‚‹

### 8.2 å®Ÿè£…å‰ã®ç¢ºèªäº‹é …

1. **ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³çœŸã£ç™½ç”»é¢å•é¡Œã®è§£æ±ºç¢ºèª**:
   - Service Workerã‚’å†æœ‰åŠ¹åŒ–ã™ã‚‹å‰ã«ã€ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³çœŸã£ç™½ç”»é¢å•é¡ŒãŒè§£æ±ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹

2. **Dockerç’°å¢ƒã§ã®ãƒ†ã‚¹ãƒˆ**:
   - ã™ã¹ã¦ã®ä¿®æ­£ãƒ»ãƒ†ã‚¹ãƒˆã¯Dockerç’°å¢ƒã§å®Ÿè¡Œã™ã‚‹
   - ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ç›´æ¥å®Ÿè¡Œã—ãªã„

3. **æŒ‡ç¤ºãŒã‚ã‚‹ã¾ã§ä¿®æ­£ã—ãªã„**:
   - èª¿æŸ»åˆ†æã¨ææ¡ˆã®ã¿
   - ä¿®æ­£ã¯æŒ‡ç¤ºãŒã‚ã‚‹ã¾ã§å®Ÿæ–½ã—ãªã„

---

## 9. ã¾ã¨ã‚

### 9.1 èª¿æŸ»çµæœã®ã¾ã¨ã‚

**QRã‚³ãƒ¼ãƒ‰èª­ã¿å–ã‚Šæ™‚ã®å‹•ä½œ**:
- âœ… åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã¯ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¿…é ˆ
- âŒ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã«QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã£ã¦ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã¯ä¸å¯èƒ½

**ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒªãƒ­ãƒ¼ãƒ‰**:
- âš ï¸ ç¾åœ¨ã¯Service WorkerãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã¯ä½•ã‚‚è¡¨ç¤ºã§ããªã„
- âœ… Service Workerã‚’å†æœ‰åŠ¹åŒ–ã™ã‚Œã°ã€é™çš„ãƒªã‚½ãƒ¼ã‚¹ã¯è¡¨ç¤ºã§ãã‚‹ï¼ˆãŸã ã—ã€APIå‘¼ã³å‡ºã—ã¯å¤±æ•—ï¼‰

**ç¾åœ¨ã®å•é¡Œç‚¹**:
1. Service WorkerãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹
2. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ¤œå‡ºæ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¦ã„ãªã„
3. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ãŒè¨­è¨ˆã•ã‚Œã¦ã„ãªã„

### 9.2 è§£æ±ºç­–ã®ææ¡ˆ

**3ã¤ã®æ®µéšçš„ãªè§£æ±ºç­–**:

1. **æ®µéš1: Service Workerã®å†æœ‰åŠ¹åŒ–ã¨é©åˆ‡ãªè¨­å®š**ï¼ˆé«˜å„ªå…ˆåº¦ï¼‰
   - Service Workerã‚’å†æœ‰åŠ¹åŒ–
   - é™çš„ãƒªã‚½ãƒ¼ã‚¹ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®š
   - APIå‘¼ã³å‡ºã—ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

2. **æ®µéš2: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ¤œå‡ºæ©Ÿèƒ½ã®å®Ÿè£…**ï¼ˆæœ€å„ªå…ˆï¼‰
   - `useOffline.ts`ã‚³ãƒ³ãƒãƒ¼ã‚¶ãƒ–ãƒ«ã®ä½œæˆ
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³çŠ¶æ…‹ã®æ¤œå‡º
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®å°‚ç”¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

3. **æ®µéš3: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®æ”¹å–„**ï¼ˆä¸­å„ªå…ˆåº¦ï¼‰
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ”¹å–„
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒ–ãƒ­ãƒƒã‚¯
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ä½¿ç”¨ã®è¨˜éŒ²ï¼ˆå°†æ¥ã®å®Ÿè£…ï¼‰

### 9.3 æ¨å¥¨å®Ÿè£…é †åº

1. **æœ€å„ªå…ˆ**: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ¤œå‡ºæ©Ÿèƒ½ã®å®Ÿè£…
2. **é«˜å„ªå…ˆåº¦**: Service Workerã®å†æœ‰åŠ¹åŒ–ï¼ˆã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³çœŸã£ç™½ç”»é¢å•é¡Œè§£æ±ºå¾Œï¼‰
3. **ä¸­å„ªå…ˆåº¦**: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®æ”¹å–„

---

**å®Œå…¨èª¿æŸ»åˆ†æãƒ»è§£æ±ºç­–ææ¡ˆå®Œäº†æ—¥æ™‚**: 2025å¹´12æœˆ18æ—¥  
**çŠ¶æ…‹**: ğŸ“‹ **å®Œå…¨èª¿æŸ»åˆ†æå®Œäº†ãƒ»è§£æ±ºç­–ææ¡ˆå®Œäº†**

**é‡è¦**: æŒ‡ç¤ºãŒã‚ã‚‹ã¾ã§ä¿®æ­£ã‚’å®Ÿæ–½ã—ã¾ã›ã‚“ã€‚èª¿æŸ»åˆ†æã¨ææ¡ˆã®ã¿ã§ã™ã€‚
