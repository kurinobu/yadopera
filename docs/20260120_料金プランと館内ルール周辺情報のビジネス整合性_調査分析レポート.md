# 料金プランと館内ルール・周辺情報のビジネス整合性 調査分析レポート

**作成日時**: 2026年1月20日  
**調査者**: AI Assistant  
**目的**: 料金プランごとのFAQ登録数制限と「館内ルール・周辺情報」の文字数制限のビジネス整合性を調査分析し、改善案を検討する

---

## 1. 調査概要

### 1.1 調査背景

ユーザーからの指摘：
- Miniプランは30件のFAQ登録が可能だが、「館内ルール・周辺情報」をフル活用することで上位プランに近づく可能性がある
- 全プランで「館内ルール・周辺情報」が1000文字と同一であることのビジネス整合性

### 1.2 調査対象

- **料金プラン**: Free, Mini, Small, Standard, Premium
- **FAQ登録数制限**: プランごとの上限
- **館内ルール・周辺情報**: 文字数制限（全プランで1000文字×2 = 2000文字）
- **ビジネス整合性**: 料金と機能制限の関係

---

## 2. 現状の料金プランと制限

### 2.1 料金プラン一覧

| プラン | 月額料金 | FAQ登録数 | 同時利用言語数 | 規模目安 |
|--------|----------|-----------|---------------|----------|
| **Free** | 無料 | 20件 | 1言語（日本語固定） | 〜25床 |
| **Mini** | ¥1,980/月 | 30件 | 2言語 | 〜25床 |
| **Small** | ¥3,980/月 | 50件 | 3言語 | 〜25床 |
| **Standard** | ¥5,980/月 | 100件 | 4言語 | 26-50床 |
| **Premium** | ¥7,980/月 | 無制限 | 無制限 | 51床以上 |

**参照**: `docs/Summary/yadopera-v03-summary.md` (946-953行目)

### 2.2 館内ルール・周辺情報の文字数制限

**現状**:
- **館内ルール（house_rules）**: 全プランで1000文字
- **周辺情報（local_info）**: 全プランで1000文字
- **合計**: 全プランで2000文字

**コード参照**:
```100:101:backend/app/schemas/facility.py
    house_rules: Optional[str] = Field(None, max_length=1000, description="館内ルール（1000文字以内）")
    local_info: Optional[str] = Field(None, max_length=1000, description="周辺情報（1000文字以内）")
```

```165:176:frontend/src/views/admin/FacilitySettings.vue
            :maxlength="1000"
            hint="1000文字以内（AI応答のコンテキストに使用されます）"
            :error="errors.house_rules"
          />
          <Input
            v-model="formData.local_info"
            type="textarea"
            label="周辺情報"
            placeholder="例: 最寄り駅: 京都駅（徒歩10分）、コンビニ: セブンイレブン（徒歩3分）、レストラン: 多数あり"
            :rows="4"
            :maxlength="1000"
            hint="1000文字以内（AI応答のコンテキストに使用されます）"
```

---

## 3. ビジネス整合性の分析

### 3.1 情報量の比較

#### FAQと館内ルール・周辺情報の関係

**プロンプト構造**（先ほどの調査結果より）:
1. システムプロンプト（約100トークン）
2. 施設基本情報（約150トークン）
   - 館内ルール: 最大500文字（プロンプト内では500文字に制限）
   - 周辺情報: 最大500文字（プロンプト内では500文字に制限）
3. 関連FAQ Top 3（約300トークン）
4. ゲストの質問（約50トークン）

**コード参照**:
```234:241:backend/app/ai/engine.py
        # 施設基本情報（約150トークン）
        facility_info = f"""
Facility: {facility.name}
Check-in: {facility.check_in_time}
Check-out: {facility.check_out_time}
WiFi SSID: {facility.wifi_ssid or "Not available"}
House Rules: {(facility.house_rules or "")[:500]}
Local Info: {(facility.local_info or "")[:500]}
"""
```

**重要な点（現状の不整合）**:
- **プロンプト内では、館内ルール・周辺情報はそれぞれ最大500文字に制限されている**
- **ただし、データベースには最大1000文字まで保存可能**
- **UIには「1000文字以内（AI応答のコンテキストに使用されます）」と表示されている**
- **プロンプト生成時に最初の500文字のみが使用されるため、ユーザーが1000文字入力しても実際には500文字しか使われない**
- **これは不整合であり、ユーザーに誤解を与える可能性がある**

#### 実質的な情報量

**Miniプラン（30件）の場合**:
- FAQ登録数: 30件
- 館内ルール・周辺情報: 2000文字（プロンプト内では1000文字）
- **実質的な情報量**: 30件のFAQ + 1000文字の補足情報

**Smallプラン（50件）の場合**:
- FAQ登録数: 50件
- 館内ルール・周辺情報: 2000文字（プロンプト内では1000文字）
- **実質的な情報量**: 50件のFAQ + 1000文字の補足情報

**問題点**:
- MiniプランとSmallプランの差は20件のFAQのみ
- 館内ルール・周辺情報は全プランで同じ（1000文字）
- Miniプランが館内ルール・周辺情報をフル活用することで、Smallプランに近づく可能性がある

---

### 3.2 料金と機能の関係

#### 料金差と機能差の比較

| プラン | 月額料金 | FAQ登録数 | 料金差 | FAQ差 |
|--------|----------|-----------|--------|-------|
| Free | 無料 | 20件 | - | - |
| Mini | ¥1,980 | 30件 | +¥1,980 | +10件 |
| Small | ¥3,980 | 50件 | +¥2,000 | +20件 |
| Standard | ¥5,980 | 100件 | +¥2,000 | +50件 |
| Premium | ¥7,980 | 無制限 | +¥2,000 | 無制限 |

**分析**:
- Mini → Small: 料金差¥2,000、FAQ差20件
- Small → Standard: 料金差¥2,000、FAQ差50件
- Standard → Premium: 料金差¥2,000、FAQ差無制限

**問題点**:
- Mini → Smallの料金差は¥2,000だが、FAQ差は20件のみ
- 館内ルール・周辺情報が全プランで同じ（1000文字）ため、Miniプランが館内ルール・周辺情報をフル活用することで、Smallプランに近づく可能性がある

---

### 3.3 ビジネスリスクの評価

#### リスク1: プラン差別化の弱化

**問題**:
- Miniプラン（¥1,980/月）が館内ルール・周辺情報をフル活用することで、Smallプラン（¥3,980/月）に近づく可能性がある
- 料金差¥2,000に対して、機能差が20件のFAQのみでは不十分

**影響**:
- Smallプランの価値が相対的に低下する
- MiniプランからSmallプランへのアップグレード意欲が低下する可能性がある

#### リスク2: 収益機会の損失

**問題**:
- ユーザーがMiniプランで満足し、Smallプランへのアップグレードを検討しない
- 月額¥2,000の収益機会を失う可能性がある

**影響**:
- ARPU（Average Revenue Per User）の低下
- 長期的な収益成長の阻害

#### リスク3: 不公平感の発生

**問題**:
- 全プランで館内ルール・周辺情報が同じ（1000文字）であることの不公平感
- 上位プラン利用者からの不満の可能性

**影響**:
- 顧客満足度の低下
- チャーン率の上昇

---

## 4. ユーザー提案の検討

### 4.1 提案1: ローンチ時は500文字×2（合計1000文字）でスタート

#### 概要

- 館内ルール・周辺情報をそれぞれ500文字（合計1000文字）でスタート
- 様子を見て後から増やす
- 理由: 文字数が少なければ上位プランが特をすることになる

#### メリット

1. **現状の不整合の解消**
   - データベース、UI、プロンプトの文字数制限を統一（500文字）
   - ユーザーに誤解を与えない

2. **段階的な機能拡張**
   - ローンチ時は500文字でスタートし、様子を見て増やす
   - リスクを最小限に抑えながら機能を拡張できる

3. **上位プランの価値向上**
   - 文字数が少なければ、上位プラン（文字数制限を増やす）が特をすることになる
   - プランアップグレードのインセンティブが向上する

4. **実装の簡素化**
   - 現状のプロンプト実装（500文字制限）をそのまま活用できる
   - データベースとUIの文字数制限を500文字に変更するだけで済む

#### デメリット

1. **既存データへの影響**
   - 既に1000文字入力しているユーザーがいる場合、500文字に切り詰める必要がある
   - データ移行が必要

2. **機能の縮小**
   - 現状1000文字まで入力可能な機能を500文字に縮小することになる
   - ユーザーからの不満の可能性

#### 実装方法

**バックエンド**:
```python
# backend/app/schemas/facility.py
house_rules: Optional[str] = Field(None, max_length=500, description="館内ルール（500文字以内）")
local_info: Optional[str] = Field(None, max_length=500, description="周辺情報（500文字以内）")
```

**フロントエンド**:
```vue
<!-- frontend/src/views/admin/FacilitySettings.vue -->
<Input
  v-model="formData.house_rules"
  type="textarea"
  label="館内ルール"
  :maxlength="500"
  hint="500文字以内（AI応答のコンテキストに使用されます）"
/>
```

**プロンプト**: 現状の実装（500文字制限）をそのまま使用

#### 実装コスト

- **低**: データベースとUIの文字数制限を500文字に変更するだけ

---

### 4.2 提案2: 禁止事項の追加（500文字×3 = 合計1500文字）

#### 概要

- 館内ルール・周辺情報に加えて「禁止事項」という項目を追加
- それぞれ500文字ずつで合計1500文字

#### メリット

1. **情報の分類が明確になる**
   - 館内ルール: 施設内でのルール（禁煙、門限など）
   - 周辺情報: 施設周辺の情報（最寄り駅、コンビニなど）
   - 禁止事項: 明確に禁止されている行為（喫煙、大声など）

2. **AI応答の精度向上**
   - 禁止事項を明確にすることで、AIがより適切に回答できる
   - 安全に関する情報を明確に伝えられる

3. **機能の拡張**
   - 合計1500文字まで拡張できる
   - ユーザーの要望に応えられる

#### デメリット

1. **実装コスト**
   - データベースに新しいカラム（`prohibited_items`）を追加
   - マイグレーションが必要
   - UIの追加（入力フォームの追加）

2. **複雑性の増加**
   - 3つの項目を管理する必要がある
   - プロンプト内での使用順序を検討する必要がある

#### 実装方法

**データベース**:
```python
# backend/app/models/facility.py
house_rules = Column(Text)  # 500文字
local_info = Column(Text)   # 500文字
prohibited_items = Column(Text)  # 500文字（新規追加）
```

**プロンプト**:
```python
# backend/app/ai/engine.py
facility_info = f"""
Facility: {facility.name}
Check-in: {facility.check_in_time}
Check-out: {facility.check_out_time}
WiFi SSID: {facility.wifi_ssid or "Not available"}
House Rules: {(facility.house_rules or "")[:500]}
Local Info: {(facility.local_info or "")[:500]}
Prohibited Items: {(facility.prohibited_items or "")[:500]}  # 新規追加
"""
```

**UI**:
```vue
<!-- frontend/src/views/admin/FacilitySettings.vue -->
<Input
  v-model="formData.prohibited_items"
  type="textarea"
  label="禁止事項"
  placeholder="例: 喫煙、大声、飲酒、ペットの持ち込み"
  :rows="4"
  :maxlength="500"
  hint="500文字以内（AI応答のコンテキストに使用されます）"
/>
```

#### 実装コスト

- **中**: データベースマイグレーション、UIの追加、プロンプトの更新

---

### 4.3 提案の組み合わせ

#### 推奨: 提案1（500文字×2）→ 提案2（500文字×3）の段階的実装

**フェーズ1: ローンチ時（提案1）**
- 館内ルール・周辺情報をそれぞれ500文字（合計1000文字）でスタート
- 現状の不整合を解消
- 実装コスト: 低

**フェーズ2: 機能拡張（提案2）**
- 様子を見て、禁止事項を追加（500文字×3 = 合計1500文字）
- ユーザーの要望に応える
- 実装コスト: 中

**メリット**:
- 段階的な実装により、リスクを最小限に抑えられる
- ユーザーの反応を見ながら機能を拡張できる
- 実装コストを分散できる

---

## 5. 改善案の検討（従来案）

### 5.1 改善案1: 館内ルール・周辺情報の削除

#### 概要

「館内ルール・周辺情報」機能を削除し、すべての情報をFAQで管理する。

#### メリット

1. **プラン差別化の明確化**
   - FAQ登録数のみで差別化できる
   - 料金と機能の関係が明確になる

2. **管理の簡素化**
   - 情報の管理場所が1つ（FAQ）に統一される
   - 重複管理のリスクがなくなる

3. **ベクトル検索の精度向上**
   - すべての情報がFAQとして登録されるため、ベクトル検索で適切に検索できる
   - 質問との関連性が高い情報が優先される

#### デメリット

1. **既存ユーザーへの影響**
   - 既に館内ルール・周辺情報を登録しているユーザーへの影響
   - データ移行が必要

2. **FAQ登録数の増加**
   - 館内ルール・周辺情報の内容をFAQとして登録する必要がある
   - 特にFreeプラン（20件）やMiniプラン（30件）では制限に達する可能性がある

3. **使い勝手の低下**
   - 館内ルール・周辺情報は構造化された情報として管理しやすい
   - FAQとして登録する場合、質問・回答の形式に変換する必要がある

#### 実装コスト

- **高**: 既存データの移行、UIの変更、ドキュメントの更新が必要

---

### 4.2 改善案2: プランごとの文字数制限

#### 概要

プランごとに「館内ルール・周辺情報」の文字数制限を設定する。

#### 提案する制限

| プラン | 館内ルール | 周辺情報 | 合計 |
|--------|-----------|----------|------|
| Free | 200文字 | 200文字 | 400文字 |
| Mini | 500文字 | 500文字 | 1000文字 |
| Small | 750文字 | 750文字 | 1500文字 |
| Standard | 1000文字 | 1000文字 | 2000文字 |
| Premium | 1000文字 | 1000文字 | 2000文字 |

#### メリット

1. **プラン差別化の強化**
   - 料金と機能の関係が明確になる
   - 上位プランの価値が向上する

2. **段階的な機能提供**
   - プランアップグレードのインセンティブが向上する
   - 収益機会の拡大

3. **既存機能の維持**
   - 館内ルール・周辺情報機能を維持できる
   - 既存ユーザーへの影響が少ない

#### デメリット

1. **実装コスト**
   - バックエンドのバリデーション追加
   - フロントエンドのUI変更（文字数制限の表示）
   - 既存データの移行（超過分の処理）

2. **複雑性の増加**
   - プランごとの制限管理が必要
   - ドキュメントの更新が必要

#### 実装方法

**バックエンド**:
```python
# backend/app/core/plan_limits.py
PLAN_HOUSE_RULES_LIMITS: Dict[str, int] = {
    "free": 200,
    "mini": 500,
    "small": 750,
    "standard": 1000,
    "premium": 1000
}

PLAN_LOCAL_INFO_LIMITS: Dict[str, int] = {
    "free": 200,
    "mini": 500,
    "small": 750,
    "standard": 1000,
    "premium": 1000
}
```

**バリデーション**:
```python
# backend/app/api/v1/admin/facility.py
@router.put("/settings", response_model=FacilitySettingsResponse)
async def update_facility_settings(
    request: FacilitySettingsUpdateRequest,
    current_user: User = Depends(get_current_user),
    db: AsyncSession = Depends(get_db)
):
    facility = await get_facility_by_user_id(current_user.id, db)
    plan_limits = get_plan_limits(facility.plan_type.lower())
    
    # 館内ルールの文字数チェック
    if request.house_rules:
        max_length = PLAN_HOUSE_RULES_LIMITS.get(facility.plan_type.lower(), 1000)
        if len(request.house_rules) > max_length:
            raise HTTPException(
                status_code=status.HTTP_400_BAD_REQUEST,
                detail=f"館内ルールは{max_length}文字以内で入力してください（現在のプラン: {facility.plan_type}）"
            )
    
    # 周辺情報の文字数チェック
    if request.local_info:
        max_length = PLAN_LOCAL_INFO_LIMITS.get(facility.plan_type.lower(), 1000)
        if len(request.local_info) > max_length:
            raise HTTPException(
                status_code=status.HTTP_400_BAD_REQUEST,
                detail=f"周辺情報は{max_length}文字以内で入力してください（現在のプラン: {facility.plan_type}）"
            )
```

**フロントエンド**:
```vue
<!-- frontend/src/views/admin/FacilitySettings.vue -->
<Input
  v-model="formData.house_rules"
  type="textarea"
  label="館内ルール"
  :maxlength="houseRulesMaxLength"
  :hint="`${houseRulesMaxLength}文字以内（AI応答のコンテキストに使用されます、現在のプラン: ${planType}）`"
/>
```

#### 実装コスト

- **中**: バックエンドのバリデーション追加、フロントエンドのUI変更、既存データの移行処理

---

### 4.3 改善案3: 館内ルール・周辺情報をFAQ登録数にカウント

#### 概要

「館内ルール・周辺情報」の文字数をFAQ登録数に換算してカウントする。

#### 換算方法

- **100文字 = 1件のFAQ**として換算
- 例: 館内ルール500文字 + 周辺情報500文字 = 10件のFAQ相当

#### メリット

1. **公平性の確保**
   - すべての情報をFAQ登録数として管理できる
   - プラン差別化が明確になる

2. **柔軟性の向上**
   - ユーザーがFAQと館内ルール・周辺情報のバランスを調整できる
   - 使い方に応じた最適化が可能

#### デメリット

1. **複雑性の増加**
   - 換算ロジックの実装が必要
   - ユーザーにとって理解しにくい可能性がある

2. **実装コスト**
   - FAQ登録数の計算ロジックの変更
   - UIの変更（残り登録可能数の表示）

#### 実装方法

```python
# backend/app/services/faq_service.py
def calculate_effective_faq_count(
    facility_id: int,
    faq_count: int,
    house_rules_length: int,
    local_info_length: int
) -> int:
    """
    実効FAQ登録数を計算
    館内ルール・周辺情報の文字数をFAQ登録数に換算
    """
    house_rules_faq_equivalent = (house_rules_length or 0) // 100
    local_info_faq_equivalent = (local_info_length or 0) // 100
    return faq_count + house_rules_faq_equivalent + local_info_faq_equivalent
```

#### 実装コスト

- **高**: FAQ登録数の計算ロジックの変更、UIの変更、ドキュメントの更新

---

### 4.4 改善案4: 館内ルール・周辺情報をPremiumプランのみに制限

#### 概要

「館内ルール・周辺情報」機能をPremiumプランのみに制限する。

#### メリット

1. **プラン差別化の強化**
   - Premiumプランの価値が向上する
   - 上位プランへのアップグレードインセンティブが向上する

2. **実装の簡素化**
   - プランごとの制限管理が不要
   - 既存データの移行が簡単

#### デメリット

1. **既存ユーザーへの影響**
   - Free/Mini/Small/Standardプラン利用者から機能が削除される
   - 既存データの移行が必要

2. **使い勝手の低下**
   - 多くのユーザーが利用できない機能になる
   - 顧客満足度の低下の可能性

#### 実装コスト

- **中**: 既存データの移行、UIの変更（プランによる表示制御）、ドキュメントの更新

---

## 6. 推奨改善案

### 6.1 推奨: ユーザー提案（段階的実装）

#### フェーズ1: ローンチ時（提案1）

**館内ルール・周辺情報をそれぞれ500文字（合計1000文字）でスタート**

**理由**:
1. **現状の不整合の解消**: データベース、UI、プロンプトの文字数制限を統一
2. **実装コストが低い**: データベースとUIの文字数制限を変更するだけ
3. **段階的な機能拡張**: 様子を見て後から増やすことができる
4. **上位プランの価値向上**: 文字数が少なければ、上位プラン（文字数制限を増やす）が特をすることになる

#### フェーズ2: 機能拡張（提案2）

**禁止事項を追加して500文字×3（合計1500文字）**

**理由**:
1. **情報の分類が明確になる**: 館内ルール、周辺情報、禁止事項を明確に分ける
2. **AI応答の精度向上**: 禁止事項を明確にすることで、AIがより適切に回答できる
3. **ユーザーの要望に応える**: 合計1500文字まで拡張できる

#### 実装優先度

- **フェーズ1（提案1）**: **高** - 現状の不整合を解消、ローンチ前に実装
- **フェーズ2（提案2）**: **中** - 様子を見て実装、ユーザーの要望に応じて

---

### 6.2 従来案: 改善案2（プランごとの文字数制限）

#### 理由

1. **バランスの良い改善**
   - プラン差別化を強化しつつ、既存機能を維持できる
   - 既存ユーザーへの影響が少ない

2. **実装コストが適切**
   - 中程度の実装コストで実現可能
   - 段階的な実装が可能

3. **ビジネス価値の向上**
   - プランアップグレードのインセンティブが向上する
   - 収益機会の拡大

#### 推奨する制限値

| プラン | 館内ルール | 周辺情報 | 合計 | 理由 |
|--------|-----------|----------|------|------|
| Free | 200文字 | 200文字 | 400文字 | 基本情報のみ |
| Mini | 500文字 | 500文字 | 1000文字 | 現状維持（Miniプランの価値を維持） |
| Small | 750文字 | 750文字 | 1500文字 | Miniプランとの差別化 |
| Standard | 1000文字 | 1000文字 | 2000文字 | 現状維持（Standardプランの価値を維持） |
| Premium | 1000文字 | 1000文字 | 2000文字 | 現状維持（Premiumプランの価値を維持） |

#### 実装優先度

- **高**: ビジネス整合性の確保、プラン差別化の強化

---

## 7. 実装ステップ計画

### 7.1 フェーズ1: ローンチ時（提案1 - 500文字×2）

#### ステップ1: バックエンドの実装

1. **`facility.py`のスキーマを更新**
   ```python
   # backend/app/schemas/facility.py
   house_rules: Optional[str] = Field(None, max_length=500, description="館内ルール（500文字以内）")
   local_info: Optional[str] = Field(None, max_length=500, description="周辺情報（500文字以内）")
   ```

2. **既存データの移行**
   - 超過分（500文字超）のデータを切り詰める
   - 移行スクリプトの作成

#### ステップ2: フロントエンドの実装

1. **UIの変更**
   ```vue
   <!-- frontend/src/views/admin/FacilitySettings.vue -->
   <Input
     v-model="formData.house_rules"
     type="textarea"
     label="館内ルール"
     :maxlength="500"
     hint="500文字以内（AI応答のコンテキストに使用されます）"
   />
   <Input
     v-model="formData.local_info"
     type="textarea"
     label="周辺情報"
     :maxlength="500"
     hint="500文字以内（AI応答のコンテキストに使用されます）"
   />
   ```

2. **バリデーションの追加**
   - フロントエンドでの文字数チェック
   - エラーメッセージの表示

#### ステップ3: ドキュメントの更新

1. **利用マニュアルの更新**
   - 館内ルール・周辺情報の文字数制限を500文字に更新

2. **ランディングページの更新**
   - 必要に応じて料金プラン表を更新

---

### 7.2 フェーズ2: 機能拡張（提案2 - 500文字×3）

#### ステップ1: データベースの拡張

1. **マイグレーションの作成**
   ```python
   # backend/alembic/versions/XXX_add_prohibited_items.py
   def upgrade():
       op.add_column('facilities', sa.Column('prohibited_items', sa.Text(), nullable=True))
   ```

2. **モデルの更新**
   ```python
   # backend/app/models/facility.py
   prohibited_items = Column(Text)  # 500文字
   ```

#### ステップ2: バックエンドの実装

1. **スキーマの更新**
   ```python
   # backend/app/schemas/facility.py
   prohibited_items: Optional[str] = Field(None, max_length=500, description="禁止事項（500文字以内）")
   ```

2. **プロンプトの更新**
   ```python
   # backend/app/ai/engine.py
   facility_info = f"""
   Facility: {facility.name}
   Check-in: {facility.check_in_time}
   Check-out: {facility.check_out_time}
   WiFi SSID: {facility.wifi_ssid or "Not available"}
   House Rules: {(facility.house_rules or "")[:500]}
   Local Info: {(facility.local_info or "")[:500]}
   Prohibited Items: {(facility.prohibited_items or "")[:500]}
   """
   ```

#### ステップ3: フロントエンドの実装

1. **UIの追加**
   ```vue
   <!-- frontend/src/views/admin/FacilitySettings.vue -->
   <Input
     v-model="formData.prohibited_items"
     type="textarea"
     label="禁止事項"
     placeholder="例: 喫煙、大声、飲酒、ペットの持ち込み"
     :rows="4"
     :maxlength="500"
     hint="500文字以内（AI応答のコンテキストに使用されます）"
   />
   ```

#### ステップ4: ドキュメントの更新

1. **利用マニュアルの更新**
   - 禁止事項の追加を記載

---

### 7.3 従来案: プランごとの文字数制限（将来の検討事項）

将来的にプラン差別化を強化する場合は、以下の実装を検討：

#### ステップ1: バックエンドの実装

1. **`plan_limits.py`に制限値を追加**
   ```python
   PLAN_HOUSE_RULES_LIMITS: Dict[str, int] = {
       "free": 200,
       "mini": 500,
       "small": 750,
       "standard": 1000,
       "premium": 1000
   }
   ```

2. **バリデーションの追加**
   - `facility.py`のAPIエンドポイントにバリデーションを追加
   - プランごとの文字数制限をチェック

3. **既存データの移行**
   - 超過分のデータを切り詰める
   - 移行スクリプトの作成

### ステップ2: フロントエンドの実装

1. **UIの変更**
   - プランごとの文字数制限を表示
   - 残り文字数の表示

2. **バリデーションの追加**
   - フロントエンドでの文字数チェック
   - エラーメッセージの表示

### ステップ3: ドキュメントの更新

1. **利用マニュアルの更新**
   - プランごとの文字数制限を記載

2. **ランディングページの更新**
   - 料金プラン表に文字数制限を追加

---

## 8. 結論

### 8.1 現状の問題点

1. **プラン差別化の弱化**
   - Miniプランが館内ルール・周辺情報をフル活用することで、Smallプランに近づく可能性がある
   - 料金差¥2,000に対して、機能差が20件のFAQのみでは不十分

2. **ビジネスリスク**
   - Smallプランへのアップグレード意欲の低下
   - 収益機会の損失
   - 不公平感の発生

### 8.2 推奨改善案

**ユーザー提案: 段階的実装**

**フェーズ1: ローンチ時（提案1）**
- 館内ルール・周辺情報をそれぞれ500文字（合計1000文字）でスタート
- **メリット**: 現状の不整合の解消、実装コストが低い、段階的な機能拡張
- **デメリット**: 既存データへの影響（500文字に切り詰める必要がある）
- **実装優先度**: **高** - ローンチ前に実装

**フェーズ2: 機能拡張（提案2）**
- 禁止事項を追加して500文字×3（合計1500文字）
- **メリット**: 情報の分類が明確になる、AI応答の精度向上、ユーザーの要望に応える
- **デメリット**: 実装コスト（中程度）、複雑性の増加
- **実装優先度**: **中** - 様子を見て実装

### 8.3 今後の検討事項

1. **既存データの移行**
   - 超過分のデータをどのように処理するか
   - ユーザーへの通知方法

2. **UI/UXの改善**
   - プランごとの文字数制限を分かりやすく表示
   - 残り文字数の表示

3. **マーケティング戦略**
   - プラン差別化の強化をマーケティングに反映
   - アップグレードインセンティブの向上

---

## 9. 参照文書

- `docs/Summary/yadopera-v03-summary.md`: 料金プラン定義
- `backend/app/core/plan_limits.py`: プラン制限定義
- `backend/app/schemas/facility.py`: 施設設定スキーマ
- `frontend/src/views/admin/FacilitySettings.vue`: 施設設定画面
- `docs/20260120_館内ルール周辺情報とFAQの関係_調査分析レポート.md`: 館内ルール・周辺情報とFAQの関係

---

**調査完了日時**: 2026年1月20日  
**最終更新日時**: 2026年1月20日（最終決定を反映）  
**最終決定**: 
- **館内ルール・周辺情報・禁止事項の3項目をそれぞれ500文字（合計1500文字）で実装**
- 次回セッションで実装予定

**実装計画書**: `docs/20260120_館内ルール周辺情報禁止事項_実装計画書.md`

